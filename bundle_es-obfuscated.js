const a0_0x19d63f=a0_0xfa1d;(function(_0xe0adf7,_0x47a0e9){const _0x9d4815=a0_0xfa1d,_0x5e1812=_0xe0adf7();while(!![]){try{const _0x3805d7=parseInt(_0x9d4815(0x21d))/0x1*(-parseInt(_0x9d4815(0x235))/0x2)+-parseInt(_0x9d4815(0x34d))/0x3*(-parseInt(_0x9d4815(0x1c5))/0x4)+parseInt(_0x9d4815(0x22c))/0x5+parseInt(_0x9d4815(0x144))/0x6*(-parseInt(_0x9d4815(0x268))/0x7)+parseInt(_0x9d4815(0x36a))/0x8*(-parseInt(_0x9d4815(0x345))/0x9)+-parseInt(_0x9d4815(0xf3))/0xa+parseInt(_0x9d4815(0xd9))/0xb;if(_0x3805d7===_0x47a0e9)break;else _0x5e1812['push'](_0x5e1812['shift']());}catch(_0x516465){_0x5e1812['push'](_0x5e1812['shift']());}}}(a0_0x11ee,0xb60d7));import{computed,ref,watch,createApp,onMounted}from'vue';import{ElPopover,ElInputNumber,ElColorPicker,ElIcon,ElSwitch,ElOption,ElSelect,ElButton,ElSlider,ElDrawer,ElMessage}from'element-plus';import{Scissor,Close,Check,Edit}from'element-plus-icon';import*as a0_0x412c21 from'three';import{EventDispatcher,Vector3,MOUSE,TOUCH,Spherical,Quaternion,Vector2,Vector4,Clock,Frustum,Matrix4}from'three';import a0_0x243156 from'earcut';import a0_0x4c3ad7 from'clipper_js';const PlacementEnum={'left':a0_0x19d63f(0x2c9)};var ArrowDrawer={'props':{'visible':Boolean,'setVisible':Function,'width':Number,'placement':{'type':String,'default':PlacementEnum['left']},'title':String},'setup'(_0x24584b,_0x2caa79){const _0x426cbe=computed(()=>{const _0x414760=a0_0xfa1d;return _0x24584b[_0x414760(0x410)]?'arrow-right':_0x414760(0x353);}),_0x117747=computed(()=>{const _0x356891=a0_0xfa1d;return _0x24584b[_0x356891(0x410)]?_0x356891(0x353):_0x356891(0xed);}),_0x5c3c9d=computed(()=>{const _0x52370a=a0_0xfa1d;return _0x24584b['placement']===PlacementEnum[_0x52370a(0x2c9)]?_0x24584b[_0x52370a(0x410)]?{'left':_0x52370a(0x3d6)}:{'left':-_0x24584b['width']+'px'}:_0x24584b[_0x52370a(0x410)]?{'right':'0px'}:{'right':-_0x24584b[_0x52370a(0x3e7)]+'px'};}),_0x2875e3=computed(()=>{const _0x542be4=a0_0xfa1d;return _0x24584b[_0x542be4(0x347)]===PlacementEnum[_0x542be4(0x2c9)]?_0x24584b[_0x542be4(0x410)]?{'left':'-8px'}:{'left':_0x542be4(0x3d6)}:_0x24584b['visible']?{'right':_0x542be4(0x13e)}:{'right':_0x542be4(0x3d6)};}),_0x28be8=computed(()=>{const _0x2783e2=a0_0xfa1d;return{'width':_0x24584b[_0x2783e2(0x3e7)]+'px','height':_0x2783e2(0x21c)};}),_0x2cace2=()=>{const _0x1d6c59=a0_0xfa1d;_0x24584b['visible']?_0x24584b[_0x1d6c59(0x3b4)](![]):_0x24584b[_0x1d6c59(0x3b4)](!![]);};return{'toggleVisible':_0x2cace2,'arrowLeftClass':_0x426cbe,'arrowRightClass':_0x117747,'boxStyleObj':_0x5c3c9d,'drawerHandleStyleObj':_0x2875e3,'wrapperStyle':_0x28be8};},'template':a0_0x19d63f(0x1a3)},dot_vertexGlsl=a0_0x19d63f(0x1d5),dot_fragmentGlsl='\x0avarying\x20vec2\x20uv2;\x0avarying\x20vec2\x20vUv;\x0auniform\x20vec2\x20repeat;\x0a\x0a\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20vec2\x20coord\x20=\x20uv2\x20*\x20repeat;\x20//\x20uv2\x20*\x20repeat;\x20\x20vUv\x20*\x20repeat;\x0a\x20\x20\x20\x20float\x20toCenter\x20=\x20length(fract(coord)\x20-\x200.5);\x0a\x20\x20\x20\x20float\x20b\x20=\x20smoothstep(0.1,\x200.12,\x20toCenter);\x0a\x20\x20\x20\x20float\x20c\x20=\x20max(smoothstep(0.12,\x200.15,\x20toCenter),\x201.0\x20-\x20b);\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20vec4\x20innerColor\x20=\x20vec4(1.0);\x0a\x20\x20\x20\x20vec4\x20outerColor\x20=\x20vec4(0.0,\x200.0,\x200.0,\x201.0);\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20mix(innerColor,\x20vec4(0.0),\x20b);\x0a\x20\x20\x20\x20vec4\x20color2\x20=\x20mix(outerColor,\x20vec4(0.0),\x20c);\x0a\x20\x20\x20\x20gl_FragColor\x20=\x20color2\x20+\x20color;\x20//LinearTosRGB(color);\x0a\x20\x20}\x0a\x20\x20\x20\x20';const planeXY=new a0_0x412c21[(a0_0x19d63f(0x39b))](new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x0,0x1)),defaultAreaColor='#1e90ff';new a0_0x412c21[(a0_0x19d63f(0x1fc))]({'color':defaultAreaColor,'transparent':!![],'opacity':0.8,'side':a0_0x412c21[a0_0x19d63f(0x168)],'wireframe':![]});function flatten(_0x15503c){const _0xec02aa=a0_0x19d63f;let _0x1bff34=_0x15503c[0x0]['z']!=undefined?0x3:0x2,_0x48f334=new Float32Array(_0x15503c[_0xec02aa(0x180)]*_0x1bff34),_0x31ec92=0x0;return _0x15503c[_0xec02aa(0x156)](_0x2b6b4d=>{_0x48f334[_0x31ec92++]=_0x2b6b4d['x'],_0x48f334[_0x31ec92++]=_0x2b6b4d['y'];if(_0x1bff34==0x3)_0x48f334[_0x31ec92++]=_0x2b6b4d['z'];}),_0x48f334;}function toFixedVector(_0x35ca54,_0x1054d1){const _0x25e47a=a0_0x19d63f;if(_0x35ca54 instanceof a0_0x412c21[_0x25e47a(0x1c6)]){const {x:_0x47c07e,y:_0x4cecae,z:_0x52919d}=_0x35ca54;_0x35ca54[_0x25e47a(0x3b0)](parseFloat(_0x47c07e[_0x25e47a(0x2ea)](_0x1054d1)),parseFloat(_0x4cecae['toFixed'](_0x1054d1)),parseFloat(_0x52919d[_0x25e47a(0x2ea)](_0x1054d1)));}else{if(_0x35ca54 instanceof a0_0x412c21[_0x25e47a(0x334)]){const {x:_0x28383a,y:_0xe3fdb9}=_0x35ca54;_0x35ca54[_0x25e47a(0x3b0)](parseFloat(_0x28383a['toFixed'](_0x1054d1)),parseFloat(_0xe3fdb9[_0x25e47a(0x2ea)](_0x1054d1)));}}return _0x35ca54;}function normalizeUvVectors(_0x5685ef){const _0x25e085=a0_0x19d63f,_0x366141=new a0_0x412c21['Box2']()[_0x25e085(0x2ef)](_0x5685ef),{min:_0x58afb7,max:_0x5ae078}=_0x366141,_0x278e26=_0x5ae078['x']-_0x58afb7['x'],_0x393340=_0x5ae078['y']-_0x58afb7['y'],_0x577531=_0x278e26>_0x393340?_0x278e26:_0x393340,_0x32a295=_0x58afb7[_0x25e085(0x2a8)]()['add'](_0x5ae078)[_0x25e085(0x1b8)](0x2),_0xfaa4af=[];return _0x5685ef[_0x25e085(0x156)](_0x31b91b=>{const _0x541621=(_0x31b91b['x']-_0x32a295['x'])/_0x577531+0.5,_0x4b5978=(_0x31b91b['y']-_0x32a295['y'])/_0x577531+0.5;_0xfaa4af['push'](_0x541621,_0x4b5978);}),_0xfaa4af;}const PI2=Math['PI']*0x2;function getAngle(_0x418682,_0x1eadd4){const _0x4139be=a0_0x19d63f;let _0x179635=Math[_0x4139be(0x1bb)](_0x1eadd4,_0x418682);return _0x179635>PI2&&(_0x179635-=PI2),_0x179635<0x0&&(_0x179635+=PI2),_0x179635;}function angleDiff(_0x4ea837,_0x135ef0){let _0x303b42=_0x135ef0-_0x4ea837;if(_0x303b42>Math['PI'])_0x303b42-=PI2;else _0x303b42<=-Math['PI']&&(_0x303b42+=PI2);return _0x303b42;}function getOldToNewAngle(_0x2aea68,_0x51dc86){const _0x201cd1=getAngle(_0x51dc86['x'],_0x51dc86['y']),_0x54dfe9=getAngle(_0x2aea68['x'],_0x2aea68['y']);return angleDiff(_0x54dfe9,_0x201cd1);}const _planeMat=new a0_0x412c21[(a0_0x19d63f(0x1f6))](),_facing=new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x0,0x1);function getPolygonGeometry2d(_0x545e0d){const _0x163786=a0_0x19d63f;return getPolygonGeometry(_0x545e0d[_0x163786(0x275)],_planeMat,_facing);}function getPolygonGeometry(_0x36c36c,_0x221ba1,_0x4dee00){const _0xef4b05=a0_0x19d63f,_0x1d7140=_0x36c36c[0x0],_0x102533=_0x36c36c[0x1];let _0x155f59=[];const _0x5b30a9=[];_0x1d7140[_0xef4b05(0x156)](_0x4a42fe=>{const _0x5f352f=_0xef4b05;_0x155f59[_0x5f352f(0x32e)](_0x4a42fe['x'],_0x4a42fe['y']),_0x5b30a9['push'](_0x4dee00);});const _0x58dd07=a0_0x243156[_0xef4b05(0x23b)](_0x155f59,_0x102533),_0x2c07eb=new a0_0x412c21['BufferGeometry'](),_0x829d39=[],_0x7e5b07=_0x1d7140[_0xef4b05(0x24a)](_0x55fecb=>{const _0x496772=_0xef4b05,_0x3fe32d=new a0_0x412c21[(_0x496772(0x1c6))](_0x55fecb['x'],_0x55fecb['y'],0x0);return _0x829d39['push'](new a0_0x412c21[(_0x496772(0x334))](_0x55fecb['x'],_0x55fecb['y'])),_0x3fe32d[_0x496772(0x3b7)](_0x221ba1);});_0x2c07eb[_0xef4b05(0x248)](_0xef4b05(0x3ce),new a0_0x412c21[(_0xef4b05(0x3b1))](flatten(_0x7e5b07),0x3)),_0x2c07eb[_0xef4b05(0x248)]('normal',new a0_0x412c21[(_0xef4b05(0x3b1))](flatten(_0x5b30a9),0x3));const _0x4a23bc=normalizeUvVectors(_0x829d39);return _0x2c07eb[_0xef4b05(0x248)]('uv',new a0_0x412c21[(_0xef4b05(0x3b1))](new Float32Array(_0x4a23bc),0x2)),_0x2c07eb['setIndex'](_0x58dd07),_0x2c07eb[_0xef4b05(0x135)](),_0x2c07eb['computeBoundingBox'](),_0x2c07eb;}function drawGridOrigin(_0x16b754){const _0x2de6c6=a0_0x19d63f;let _0x122a1=document['createElement'](_0x2de6c6(0x372)),_0x53ed3b=_0x122a1[_0x2de6c6(0x2a1)]('2d');_0x122a1[_0x2de6c6(0x1be)]=_0x16b754*0x2,_0x122a1[_0x2de6c6(0x3e7)]=_0x16b754*0x2;let _0x31c7db={'x':_0x16b754*0x2,'y':_0x16b754},_0x3b4c51={'x':_0x16b754,'y':0x0},_0x24a0ef={'x':0x0,'y':_0x16b754},_0x3f3359={'x':_0x16b754,'y':_0x16b754*0x2};return _0x53ed3b[_0x2de6c6(0x1f4)](),_0x53ed3b['moveTo'](_0x31c7db['x'],_0x31c7db['y']),_0x53ed3b[_0x2de6c6(0x3ee)](_0x3b4c51['x'],_0x3b4c51['y']),_0x53ed3b['lineTo'](_0x24a0ef['x'],_0x24a0ef['y']),_0x53ed3b['lineTo'](_0x3f3359['x'],_0x3f3359['y']),_0x53ed3b['closePath'](),_0x53ed3b[_0x2de6c6(0x3f8)]='#000',_0x53ed3b['fill'](),_0x122a1;}function makeCanvasSprite(_0x5a6f39){const _0x2a7b77=a0_0x19d63f;let _0x1ac7c7=new a0_0x412c21[(_0x2a7b77(0x38d))](_0x5a6f39);_0x1ac7c7[_0x2a7b77(0x1f3)]=!![];let _0x1802fc=new a0_0x412c21['SpriteMaterial']({'map':_0x1ac7c7,'sizeAttenuation':![]}),_0x37baa7=new a0_0x412c21['Sprite'](_0x1802fc);_0x37baa7['center']=new a0_0x412c21[(_0x2a7b77(0x334))](0.5,0.5);let _0x446066={'w':_0x5a6f39[_0x2a7b77(0x3e7)],'h':_0x5a6f39[_0x2a7b77(0x1be)]};return _0x37baa7['scale'][_0x2a7b77(0x3b0)](_0x446066['w']/window[_0x2a7b77(0x2e0)],_0x446066['h']/window[_0x2a7b77(0x2e0)],0x1),_0x37baa7;}function getGridOrigin(_0x4238ee){const _0x471dd9=a0_0x19d63f;let _0x3eb0c7=drawGridOrigin(_0x4238ee),_0x55a651=makeCanvasSprite(_0x3eb0c7);return _0x55a651[_0x471dd9(0x133)][_0x471dd9(0x11b)]=!![],_0x55a651;}function updatePosAttr(_0x3d9c32,_0x41a900,_0x3ce071,_0xbfa007=!![]){const _0x166043=a0_0x19d63f,_0x3353ec=_0x3d9c32[_0x166043(0x2f3)]('position');_0x3353ec[_0x166043(0x18c)](_0x41a900,_0x3ce071['x'],_0x3ce071['y'],_0x3ce071['z']),_0xbfa007&&(_0x3353ec[_0x166043(0x1f3)]=!![]);}function bufferAttributeToVectors(_0x351383){const _0x313fd1=a0_0x19d63f,_0x5e023d=[];for(let _0x61808f=0x0;_0x61808f<_0x351383[_0x313fd1(0x37a)];_0x61808f++){let _0x1fc9c1;switch(_0x351383[_0x313fd1(0x245)]){case 0x2:_0x1fc9c1=new a0_0x412c21['Vector2']()['fromBufferAttribute'](_0x351383,_0x61808f);break;case 0x3:_0x1fc9c1=new a0_0x412c21[(_0x313fd1(0x1c6))]()['fromBufferAttribute'](_0x351383,_0x61808f);break;case 0x4:_0x1fc9c1=new a0_0x412c21[(_0x313fd1(0xf6))]()[_0x313fd1(0x2ed)](_0x351383,_0x61808f);break;}_0x5e023d[_0x313fd1(0x32e)](_0x1fc9c1);}return _0x5e023d;}function bufferAttributeToVectorsV2(_0x315fa9,_0x322952){const _0x244de0=a0_0x19d63f;for(let _0x3eeeb8=0x0;_0x3eeeb8<_0x315fa9['count'];_0x3eeeb8++){const _0x369381=_0x322952[_0x3eeeb8];_0x369381[_0x244de0(0x2ed)](_0x315fa9,_0x3eeeb8);}return _0x322952;}const screenDefault={'left':0x0,'top':0x0,'width':window['innerWidth'],'height':window['innerHeight']};function getMouseRaycaster(_0x2917b5,_0x25f1f9,_0x291c01,_0x4bcd45,_0x55899b=screenDefault){const _0x5215fa=a0_0x19d63f;_0x2917b5[_0x5215fa(0x1cf)][_0x5215fa(0x339)][_0x5215fa(0x101)]=0.1;const _0x33c60e=canvasCoordToScreenCoord({'x':_0x291c01,'y':_0x4bcd45},_0x55899b);return _0x2917b5[_0x5215fa(0x392)](_0x33c60e,_0x25f1f9),_0x2917b5;}function canvasCoordToScreenCoord(_0x1b5e07,_0x5b1866=screenDefault){const _0x1b3577=a0_0x19d63f,_0x3fb3a8=_0x1b5e07['x']-_0x5b1866['left'],_0x3556f5=_0x1b5e07['y']-_0x5b1866['top'];return{'x':_0x3fb3a8/(_0x5b1866[_0x1b3577(0x3e7)]*0x1)*0x2-0x1,'y':-_0x3556f5/(_0x5b1866['height']*0x1)*0x2+0x1};}function getDotMaterial(){const _0xf9f1b8=a0_0x19d63f,_0x3da771={'repeat':{'value':new a0_0x412c21[(_0xf9f1b8(0x334))](0x78,0x78*window[_0xf9f1b8(0x1a6)]/window[_0xf9f1b8(0x2e0)])}},_0x13fabb=new a0_0x412c21[(_0xf9f1b8(0x399))]({'uniforms':_0x3da771,'vertexShader':dot_vertexGlsl,'fragmentShader':dot_fragmentGlsl,'side':a0_0x412c21['DoubleSide'],'transparent':!![],'depthTest':![]});return _0x13fabb;}function createContourLine(_0x693ce3,_0x4153c5,_0x524ded='#d40099',_0x17528b=![],_0x5ac0ee=undefined){const _0x228d40=a0_0x19d63f,_0x4edae4={'color':_0x524ded,'toneMapped':![],'transparent':!![],'depthTest':![],'depthWrite':![]},_0x57bf19=_0x17528b?new a0_0x412c21['LineDashedMaterial'](_0x4edae4):new a0_0x412c21['LineBasicMaterial'](_0x4edae4);_0x17528b&&(_0x57bf19[_0x228d40(0x3fa)]=0.1,_0x57bf19[_0x228d40(0x409)]=0.1);const _0x105943=[];_0x693ce3[_0x228d40(0x156)]((_0x2fa9d7,_0x4ee255)=>{const _0x21bddf=_0x228d40;_0x2fa9d7[_0x21bddf(0x156)]((_0x2d0fe2,_0x104024)=>{const _0x3e7518=_0x21bddf,_0x547db2=new a0_0x412c21[(_0x3e7518(0x1c6))](_0x2d0fe2['x'],_0x2d0fe2['y'],_0x4153c5);_0x105943[_0x3e7518(0x32e)](_0x547db2);let _0x3f1bfb=_0x2fa9d7[_0x104024+0x1];_0x104024===_0x2fa9d7[_0x3e7518(0x180)]-0x1&&(_0x3f1bfb=_0x2fa9d7[0x0]);const _0x5275bd=new a0_0x412c21[(_0x3e7518(0x1c6))](_0x3f1bfb['x'],_0x3f1bfb['y'],_0x4153c5);_0x105943['push'](_0x5275bd);}),_0x5ac0ee&&!_0x5ac0ee[_0x4ee255]&&(_0x105943[_0x21bddf(0x308)](),_0x105943['pop']());});const _0x1f80cc=new a0_0x412c21[(_0x228d40(0x27a))]();_0x1f80cc[_0x228d40(0x248)](_0x228d40(0x3ce),new a0_0x412c21['BufferAttribute'](flatten(_0x105943),0x3));const _0x340248=new a0_0x412c21[(_0x228d40(0x316))](_0x1f80cc,_0x57bf19);return _0x340248[_0x228d40(0x3b3)](),_0x340248;}const adhereTolerance=0.001;function findAdheres(_0x1ba365,_0x3aa491,_0x52b1b1){const _0x4f8903=new Set();return _0x3aa491['forEach'](_0x4e61ee=>{const _0x54e93c=a0_0xfa1d;_0x1ba365[_0x54e93c(0x156)](_0x1eaf96=>{const _0x41884a=_0x54e93c,_0x3a976e=_0x4e61ee-_0x1eaf96-_0x52b1b1,_0x533694=Math['abs'](_0x3a976e);_0x533694<=adhereTolerance&&_0x4f8903[_0x41884a(0x37e)](_0x1eaf96+_0x52b1b1);});}),[..._0x4f8903];}function getClosestSpan(_0x301ef3,_0xdc3b8a,_0x5a41e8=0.2){const _0x566747=a0_0x19d63f;let _0x12088e=Infinity,_0x2822ee=0x0;const _0x13385c=[];_0xdc3b8a[_0x566747(0x156)](_0x50d26a=>{const _0x38955a=_0x566747;_0x301ef3[_0x38955a(0x156)](_0x2eb0a4=>{const _0x47da4e=_0x38955a,_0x275901=_0x50d26a-_0x2eb0a4,_0x557eba=Math[_0x47da4e(0x3ca)](_0x275901);_0x557eba<=adhereTolerance?!_0x13385c[_0x47da4e(0x119)](_0x2eb0a4)&&_0x13385c['push'](_0x2eb0a4):_0x557eba<=_0x5a41e8&&(_0x12088e>_0x557eba&&(_0x12088e=_0x557eba,_0x2822ee=_0x275901));});});if(_0x13385c[_0x566747(0x180)]>0x0)return _0x13385c[_0x566747(0x28b)](0x0),_0x13385c;if(_0x12088e<Infinity){const _0x51aea6=findAdheres(_0x301ef3,_0xdc3b8a,_0x2822ee);return _0x51aea6[_0x566747(0x28b)](_0x2822ee),_0x51aea6;}return[];}const _changeEvent={'type':a0_0x19d63f(0x2dc)},_startEvent={'type':'start'},_endEvent={'type':'end'};class OrbitControls extends EventDispatcher{constructor(_0x2770bd,_0x29300f){const _0xd9efbf=a0_0x19d63f;super();if(_0x29300f===undefined)console[_0xd9efbf(0x26c)]('THREE.OrbitControls:\x20The\x20second\x20parameter\x20\x22domElement\x22\x20is\x20now\x20mandatory.');if(_0x29300f===document)console[_0xd9efbf(0x33d)]('THREE.OrbitControls:\x20\x22document\x22\x20should\x20not\x20be\x20used\x20as\x20the\x20target\x20\x22domElement\x22.\x20Please\x20use\x20\x22renderer.domElement\x22\x20instead.');this[_0xd9efbf(0x3ec)]=_0x2770bd,this[_0xd9efbf(0xf9)]=_0x29300f,this[_0xd9efbf(0xf9)][_0xd9efbf(0x1b3)][_0xd9efbf(0x12a)]=_0xd9efbf(0x1cc),this[_0xd9efbf(0x2d8)]=!![],this[_0xd9efbf(0x28e)]=new Vector3(),this['minDistance']=0x0,this['maxDistance']=Infinity,this[_0xd9efbf(0x130)]=0x0,this[_0xd9efbf(0x40e)]=Infinity,this[_0xd9efbf(0x254)]=0x0,this[_0xd9efbf(0x2fb)]=Math['PI'],this[_0xd9efbf(0xec)]=-Infinity,this[_0xd9efbf(0x312)]=Infinity,this[_0xd9efbf(0x1f8)]=![],this[_0xd9efbf(0x14c)]=0.05,this[_0xd9efbf(0x2a2)]=!![],this[_0xd9efbf(0x3e0)]=0x1,this[_0xd9efbf(0x12d)]=!![],this[_0xd9efbf(0xf0)]=0x1,this[_0xd9efbf(0x26e)]=!![],this[_0xd9efbf(0x2f2)]=0x1,this['screenSpacePanning']=!![],this[_0xd9efbf(0x327)]=0x7,this['autoRotate']=![],this[_0xd9efbf(0x2b1)]=0x2,this[_0xd9efbf(0x311)]={'LEFT':_0xd9efbf(0x222),'UP':'ArrowUp','RIGHT':_0xd9efbf(0x322),'BOTTOM':_0xd9efbf(0x3e6)},this['mouseButtons']={'LEFT':MOUSE[_0xd9efbf(0x1bd)],'MIDDLE':MOUSE[_0xd9efbf(0x139)],'RIGHT':MOUSE[_0xd9efbf(0x267)]},this[_0xd9efbf(0x414)]={'ONE':TOUCH['ROTATE'],'TWO':TOUCH['DOLLY_PAN']},this[_0xd9efbf(0xea)]=this['target'][_0xd9efbf(0x2a8)](),this[_0xd9efbf(0x217)]=this[_0xd9efbf(0x3ec)][_0xd9efbf(0x3ce)]['clone'](),this[_0xd9efbf(0x175)]=this[_0xd9efbf(0x3ec)][_0xd9efbf(0x1a1)],this[_0xd9efbf(0x3cc)]=null,this[_0xd9efbf(0x141)]=function(){return _0x3e3ac0['phi'];},this[_0xd9efbf(0x250)]=function(){const _0x54da04=_0xd9efbf;return _0x3e3ac0[_0x54da04(0x162)];},this['getDistance']=function(){const _0x9eb028=_0xd9efbf;return this[_0x9eb028(0x3ec)]['position']['distanceTo'](this[_0x9eb028(0x28e)]);},this[_0xd9efbf(0x22b)]=function(_0x4194cb){const _0x2d4f5f=_0xd9efbf;_0x4194cb[_0x2d4f5f(0x31b)]('keydown',_0x1088a6),this[_0x2d4f5f(0x3cc)]=_0x4194cb;},this[_0xd9efbf(0x131)]=function(){const _0x4ebe52=_0xd9efbf;_0x26a0d7[_0x4ebe52(0xea)][_0x4ebe52(0x357)](_0x26a0d7[_0x4ebe52(0x28e)]),_0x26a0d7[_0x4ebe52(0x217)][_0x4ebe52(0x357)](_0x26a0d7[_0x4ebe52(0x3ec)][_0x4ebe52(0x3ce)]),_0x26a0d7[_0x4ebe52(0x175)]=_0x26a0d7[_0x4ebe52(0x3ec)][_0x4ebe52(0x1a1)];},this[_0xd9efbf(0x17c)]=function(){const _0x25938f=_0xd9efbf;_0x26a0d7['target'][_0x25938f(0x357)](_0x26a0d7[_0x25938f(0xea)]),_0x26a0d7[_0x25938f(0x3ec)][_0x25938f(0x3ce)][_0x25938f(0x357)](_0x26a0d7[_0x25938f(0x217)]),_0x26a0d7['object'][_0x25938f(0x1a1)]=_0x26a0d7['zoom0'],_0x26a0d7['object'][_0x25938f(0x2ee)](),_0x26a0d7[_0x25938f(0x213)](_changeEvent),_0x26a0d7['update'](),_0x1fe13d=_0xe3de6f['NONE'];},this[_0xd9efbf(0x2e4)]=(function(){const _0x41d60d=_0xd9efbf,_0x32372a=new Vector3(),_0x28d092=new Quaternion()[_0x41d60d(0x2d9)](_0x2770bd['up'],new Vector3(0x0,0x1,0x0)),_0x229872=_0x28d092[_0x41d60d(0x2a8)]()[_0x41d60d(0x39c)](),_0x294113=new Vector3(),_0x23eec5=new Quaternion(),_0x287731=0x2*Math['PI'];return function _0x55a384(){const _0xcb1b75=_0x41d60d,_0x17a3ec=_0x26a0d7[_0xcb1b75(0x3ec)][_0xcb1b75(0x3ce)];_0x32372a['copy'](_0x17a3ec)[_0xcb1b75(0x343)](_0x26a0d7[_0xcb1b75(0x28e)]),_0x32372a[_0xcb1b75(0xd7)](_0x28d092),_0x3e3ac0[_0xcb1b75(0x1b7)](_0x32372a);_0x26a0d7['autoRotate']&&_0x1fe13d===_0xe3de6f[_0xcb1b75(0x3c9)]&&_0x4da11b(_0x1fc5cc());_0x26a0d7[_0xcb1b75(0x1f8)]?(_0x3e3ac0[_0xcb1b75(0x162)]+=_0xd0d36a[_0xcb1b75(0x162)]*_0x26a0d7[_0xcb1b75(0x14c)],_0x3e3ac0[_0xcb1b75(0x103)]+=_0xd0d36a['phi']*_0x26a0d7[_0xcb1b75(0x14c)]):(_0x3e3ac0['theta']+=_0xd0d36a[_0xcb1b75(0x162)],_0x3e3ac0[_0xcb1b75(0x103)]+=_0xd0d36a['phi']);let _0x3cb834=_0x26a0d7[_0xcb1b75(0xec)],_0x3f116f=_0x26a0d7['maxAzimuthAngle'];if(isFinite(_0x3cb834)&&isFinite(_0x3f116f)){if(_0x3cb834<-Math['PI'])_0x3cb834+=_0x287731;else{if(_0x3cb834>Math['PI'])_0x3cb834-=_0x287731;}if(_0x3f116f<-Math['PI'])_0x3f116f+=_0x287731;else{if(_0x3f116f>Math['PI'])_0x3f116f-=_0x287731;}_0x3cb834<=_0x3f116f?_0x3e3ac0[_0xcb1b75(0x162)]=Math[_0xcb1b75(0x40d)](_0x3cb834,Math[_0xcb1b75(0x11d)](_0x3f116f,_0x3e3ac0[_0xcb1b75(0x162)])):_0x3e3ac0[_0xcb1b75(0x162)]=_0x3e3ac0[_0xcb1b75(0x162)]>(_0x3cb834+_0x3f116f)/0x2?Math['max'](_0x3cb834,_0x3e3ac0['theta']):Math[_0xcb1b75(0x11d)](_0x3f116f,_0x3e3ac0['theta']);}_0x3e3ac0[_0xcb1b75(0x103)]=Math[_0xcb1b75(0x40d)](_0x26a0d7[_0xcb1b75(0x254)],Math[_0xcb1b75(0x11d)](_0x26a0d7[_0xcb1b75(0x2fb)],_0x3e3ac0[_0xcb1b75(0x103)])),_0x3e3ac0[_0xcb1b75(0x100)](),_0x3e3ac0[_0xcb1b75(0x121)]*=_0x6b0dd3,_0x3e3ac0[_0xcb1b75(0x121)]=Math[_0xcb1b75(0x40d)](_0x26a0d7[_0xcb1b75(0x236)],Math[_0xcb1b75(0x11d)](_0x26a0d7[_0xcb1b75(0x206)],_0x3e3ac0[_0xcb1b75(0x121)]));_0x26a0d7[_0xcb1b75(0x1f8)]===!![]?_0x26a0d7[_0xcb1b75(0x28e)][_0xcb1b75(0x194)](_0x18ba0c,_0x26a0d7['dampingFactor']):_0x26a0d7['target'][_0xcb1b75(0x37e)](_0x18ba0c);_0x32372a[_0xcb1b75(0x165)](_0x3e3ac0),_0x32372a[_0xcb1b75(0xd7)](_0x229872),_0x17a3ec[_0xcb1b75(0x357)](_0x26a0d7[_0xcb1b75(0x28e)])[_0xcb1b75(0x37e)](_0x32372a),_0x26a0d7[_0xcb1b75(0x3ec)][_0xcb1b75(0x388)](_0x26a0d7[_0xcb1b75(0x28e)]);_0x26a0d7[_0xcb1b75(0x1f8)]===!![]?(_0xd0d36a[_0xcb1b75(0x162)]*=0x1-_0x26a0d7[_0xcb1b75(0x14c)],_0xd0d36a[_0xcb1b75(0x103)]*=0x1-_0x26a0d7[_0xcb1b75(0x14c)],_0x18ba0c[_0xcb1b75(0x365)](0x1-_0x26a0d7[_0xcb1b75(0x14c)])):(_0xd0d36a['set'](0x0,0x0,0x0),_0x18ba0c[_0xcb1b75(0x3b0)](0x0,0x0,0x0));_0x6b0dd3=0x1;if(_0x476182||_0x294113[_0xcb1b75(0x186)](_0x26a0d7[_0xcb1b75(0x3ec)][_0xcb1b75(0x3ce)])>_0x288913||0x8*(0x1-_0x23eec5[_0xcb1b75(0x160)](_0x26a0d7[_0xcb1b75(0x3ec)]['quaternion']))>_0x288913)return _0x26a0d7[_0xcb1b75(0x213)](_changeEvent),_0x294113['copy'](_0x26a0d7[_0xcb1b75(0x3ec)][_0xcb1b75(0x3ce)]),_0x23eec5['copy'](_0x26a0d7[_0xcb1b75(0x3ec)]['quaternion']),_0x476182=![],!![];return![];};}()),this['dispose']=function(){const _0xa4b9ec=_0xd9efbf;_0x26a0d7[_0xa4b9ec(0xf9)][_0xa4b9ec(0x27b)](_0xa4b9ec(0x16d),_0x338163),_0x26a0d7[_0xa4b9ec(0xf9)][_0xa4b9ec(0x27b)](_0xa4b9ec(0x126),_0x23d340),_0x26a0d7['domElement'][_0xa4b9ec(0x27b)](_0xa4b9ec(0x313),_0x37d750),_0x26a0d7[_0xa4b9ec(0xf9)][_0xa4b9ec(0x27b)](_0xa4b9ec(0x124),_0x57ac5e),_0x26a0d7['domElement'][_0xa4b9ec(0x27b)]('pointermove',_0x5b250e),_0x26a0d7[_0xa4b9ec(0xf9)][_0xa4b9ec(0x27b)]('pointerup',_0x4eb6e0),_0x26a0d7[_0xa4b9ec(0x3cc)]!==null&&_0x26a0d7[_0xa4b9ec(0x3cc)]['removeEventListener'](_0xa4b9ec(0x125),_0x1088a6);};const _0x26a0d7=this,_0xe3de6f={'NONE':-0x1,'ROTATE':0x0,'DOLLY':0x1,'PAN':0x2,'TOUCH_ROTATE':0x3,'TOUCH_PAN':0x4,'TOUCH_DOLLY_PAN':0x5,'TOUCH_DOLLY_ROTATE':0x6};let _0x1fe13d=_0xe3de6f[_0xd9efbf(0x3c9)];const _0x288913=0.000001,_0x3e3ac0=new Spherical(),_0xd0d36a=new Spherical();let _0x6b0dd3=0x1;const _0x18ba0c=new Vector3();let _0x476182=![];const _0x2bf946=new Vector2(),_0x146b6c=new Vector2(),_0x500498=new Vector2(),_0xfed390=new Vector2(),_0x146106=new Vector2(),_0x5666f6=new Vector2(),_0x11570a=new Vector2(),_0x70c4e2=new Vector2(),_0x136d2f=new Vector2(),_0x26f7d0=[],_0x390642={};function _0x1fc5cc(){return 0x2*Math['PI']/0x3c/0x3c*_0x26a0d7['autoRotateSpeed'];}function _0x26aa22(){const _0x4b035a=_0xd9efbf;return Math['pow'](0.95,_0x26a0d7[_0x4b035a(0x3e0)]);}function _0x4da11b(_0x154ffe){_0xd0d36a['theta']-=_0x154ffe;}function _0x4115cb(_0x26060f){const _0x29be27=_0xd9efbf;_0xd0d36a[_0x29be27(0x103)]-=_0x26060f;}const _0x410b95=(function(){const _0x39e76d=new Vector3();return function _0x664e46(_0x2f603a,_0x3d70f4){const _0xaafced=a0_0xfa1d;_0x39e76d['setFromMatrixColumn'](_0x3d70f4,0x0),_0x39e76d[_0xaafced(0x365)](-_0x2f603a),_0x18ba0c[_0xaafced(0x37e)](_0x39e76d);};}()),_0x555a19=(function(){const _0x56b489=new Vector3();return function _0x57c9b0(_0xa25957,_0xfb81be){const _0x5b2acd=a0_0xfa1d;_0x26a0d7[_0x5b2acd(0x243)]===!![]?_0x56b489['setFromMatrixColumn'](_0xfb81be,0x1):(_0x56b489[_0x5b2acd(0x2cd)](_0xfb81be,0x0),_0x56b489[_0x5b2acd(0x3a7)](_0x26a0d7[_0x5b2acd(0x3ec)]['up'],_0x56b489)),_0x56b489[_0x5b2acd(0x365)](_0xa25957),_0x18ba0c[_0x5b2acd(0x37e)](_0x56b489);};}()),_0x5ac0b9=(function(){const _0x124412=new Vector3();return function _0x45a503(_0x1c0057,_0x32147e){const _0x57f684=a0_0xfa1d,_0x504293=_0x26a0d7[_0x57f684(0xf9)];if(_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x3fb)]){const _0x153578=_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x3ce)];_0x124412['copy'](_0x153578)[_0x57f684(0x343)](_0x26a0d7[_0x57f684(0x28e)]);let _0x138037=_0x124412['length']();_0x138037*=Math[_0x57f684(0x301)](_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x3fd)]/0x2*Math['PI']/0xb4),_0x410b95(0x2*_0x1c0057*_0x138037/_0x504293[_0x57f684(0x367)],_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x149)]),_0x555a19(0x2*_0x32147e*_0x138037/_0x504293[_0x57f684(0x367)],_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x149)]);}else _0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x306)]?(_0x410b95(_0x1c0057*(_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x201)]-_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x2c9)])/_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x1a1)]/_0x504293['clientWidth'],_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x149)]),_0x555a19(_0x32147e*(_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x1d7)]-_0x26a0d7['object']['bottom'])/_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x1a1)]/_0x504293[_0x57f684(0x367)],_0x26a0d7[_0x57f684(0x3ec)][_0x57f684(0x149)])):_0x26a0d7[_0x57f684(0x26e)]=![];};}());function _0x1c3aa0(_0x50d082){const _0x3ddae8=_0xd9efbf;if(_0x26a0d7[_0x3ddae8(0x3ec)][_0x3ddae8(0x3fb)])_0x6b0dd3/=_0x50d082;else _0x26a0d7[_0x3ddae8(0x3ec)][_0x3ddae8(0x306)]?(_0x26a0d7[_0x3ddae8(0x3ec)]['zoom']=Math[_0x3ddae8(0x40d)](_0x26a0d7[_0x3ddae8(0x130)],Math[_0x3ddae8(0x11d)](_0x26a0d7[_0x3ddae8(0x40e)],_0x26a0d7[_0x3ddae8(0x3ec)]['zoom']*_0x50d082)),_0x26a0d7[_0x3ddae8(0x3ec)][_0x3ddae8(0x2ee)](),_0x476182=!![]):_0x26a0d7[_0x3ddae8(0x2a2)]=![];}function _0x31953b(_0x589351){const _0x235756=_0xd9efbf;if(_0x26a0d7['object']['isPerspectiveCamera'])_0x6b0dd3*=_0x589351;else _0x26a0d7[_0x235756(0x3ec)][_0x235756(0x306)]?(_0x26a0d7[_0x235756(0x3ec)]['zoom']=Math[_0x235756(0x40d)](_0x26a0d7[_0x235756(0x130)],Math[_0x235756(0x11d)](_0x26a0d7['maxZoom'],_0x26a0d7['object'][_0x235756(0x1a1)]/_0x589351)),_0x26a0d7['object']['updateProjectionMatrix'](),_0x476182=!![]):_0x26a0d7[_0x235756(0x2a2)]=![];}function _0x5bcb53(_0x5b84a0){const _0x18ed76=_0xd9efbf;_0x2bf946[_0x18ed76(0x3b0)](_0x5b84a0[_0x18ed76(0x142)],_0x5b84a0[_0x18ed76(0x386)]);}function _0x433550(_0xe00c46){const _0x49c15e=_0xd9efbf;_0x11570a['set'](_0xe00c46[_0x49c15e(0x142)],_0xe00c46[_0x49c15e(0x386)]);}function _0x204241(_0x125c44){const _0x31a429=_0xd9efbf;_0xfed390['set'](_0x125c44[_0x31a429(0x142)],_0x125c44[_0x31a429(0x386)]);}function _0x1e667d(_0x10d4f6){const _0x2aafd2=_0xd9efbf;_0x146b6c['set'](_0x10d4f6[_0x2aafd2(0x142)],_0x10d4f6['clientY']),_0x500498[_0x2aafd2(0x1dd)](_0x146b6c,_0x2bf946)[_0x2aafd2(0x365)](_0x26a0d7[_0x2aafd2(0xf0)]);const _0x288d9a=_0x26a0d7[_0x2aafd2(0xf9)];_0x4da11b(0x2*Math['PI']*_0x500498['x']/_0x288d9a[_0x2aafd2(0x367)]),_0x4115cb(0x2*Math['PI']*_0x500498['y']/_0x288d9a['clientHeight']),_0x2bf946['copy'](_0x146b6c),_0x26a0d7['update']();}function _0x5e5113(_0x4c4d94){const _0x23999b=_0xd9efbf;_0x70c4e2[_0x23999b(0x3b0)](_0x4c4d94[_0x23999b(0x142)],_0x4c4d94['clientY']),_0x136d2f[_0x23999b(0x1dd)](_0x70c4e2,_0x11570a);if(_0x136d2f['y']>0x0)_0x1c3aa0(_0x26aa22());else _0x136d2f['y']<0x0&&_0x31953b(_0x26aa22());_0x11570a[_0x23999b(0x357)](_0x70c4e2),_0x26a0d7[_0x23999b(0x2e4)]();}function _0x1bbe34(_0x1b0817){const _0x29da04=_0xd9efbf;_0x146106[_0x29da04(0x3b0)](_0x1b0817[_0x29da04(0x142)],_0x1b0817[_0x29da04(0x386)]),_0x5666f6[_0x29da04(0x1dd)](_0x146106,_0xfed390)[_0x29da04(0x365)](_0x26a0d7['panSpeed']),_0x5ac0b9(_0x5666f6['x'],_0x5666f6['y']),_0xfed390[_0x29da04(0x357)](_0x146106),_0x26a0d7[_0x29da04(0x2e4)]();}function _0x66c3f(_0x2a4d91){const _0x4c9d7c=_0xd9efbf;if(_0x2a4d91[_0x4c9d7c(0x3f2)]<0x0)_0x31953b(_0x26aa22());else _0x2a4d91[_0x4c9d7c(0x3f2)]>0x0&&_0x1c3aa0(_0x26aa22());_0x26a0d7[_0x4c9d7c(0x2e4)]();}function _0x30a384(_0x12e0b2){const _0x1e77fe=_0xd9efbf;let _0xacdf43=![];switch(_0x12e0b2[_0x1e77fe(0x3dd)]){case _0x26a0d7[_0x1e77fe(0x311)]['UP']:_0x5ac0b9(0x0,_0x26a0d7[_0x1e77fe(0x327)]),_0xacdf43=!![];break;case _0x26a0d7[_0x1e77fe(0x311)][_0x1e77fe(0x2f7)]:_0x5ac0b9(0x0,-_0x26a0d7[_0x1e77fe(0x327)]),_0xacdf43=!![];break;case _0x26a0d7[_0x1e77fe(0x311)][_0x1e77fe(0xdb)]:_0x5ac0b9(_0x26a0d7[_0x1e77fe(0x327)],0x0),_0xacdf43=!![];break;case _0x26a0d7[_0x1e77fe(0x311)][_0x1e77fe(0x145)]:_0x5ac0b9(-_0x26a0d7[_0x1e77fe(0x327)],0x0),_0xacdf43=!![];break;}_0xacdf43&&(_0x12e0b2['preventDefault'](),_0x26a0d7[_0x1e77fe(0x2e4)]());}function _0x1630c7(){const _0x44f19f=_0xd9efbf;if(_0x26f7d0[_0x44f19f(0x180)]===0x1)_0x2bf946['set'](_0x26f7d0[0x0][_0x44f19f(0x2f9)],_0x26f7d0[0x0]['pageY']);else{const _0x28548b=0.5*(_0x26f7d0[0x0][_0x44f19f(0x2f9)]+_0x26f7d0[0x1][_0x44f19f(0x2f9)]),_0x4b0b84=0.5*(_0x26f7d0[0x0][_0x44f19f(0x2be)]+_0x26f7d0[0x1][_0x44f19f(0x2be)]);_0x2bf946['set'](_0x28548b,_0x4b0b84);}}function _0x4f2454(){const _0x3d6db9=_0xd9efbf;if(_0x26f7d0['length']===0x1)_0xfed390[_0x3d6db9(0x3b0)](_0x26f7d0[0x0][_0x3d6db9(0x2f9)],_0x26f7d0[0x0][_0x3d6db9(0x2be)]);else{const _0x1316d4=0.5*(_0x26f7d0[0x0]['pageX']+_0x26f7d0[0x1][_0x3d6db9(0x2f9)]),_0x1c8851=0.5*(_0x26f7d0[0x0]['pageY']+_0x26f7d0[0x1][_0x3d6db9(0x2be)]);_0xfed390['set'](_0x1316d4,_0x1c8851);}}function _0x1b1fc8(){const _0x31e68f=_0xd9efbf,_0x4a7567=_0x26f7d0[0x0]['pageX']-_0x26f7d0[0x1][_0x31e68f(0x2f9)],_0x47bb51=_0x26f7d0[0x0][_0x31e68f(0x2be)]-_0x26f7d0[0x1][_0x31e68f(0x2be)],_0x143c38=Math[_0x31e68f(0x2af)](_0x4a7567*_0x4a7567+_0x47bb51*_0x47bb51);_0x11570a[_0x31e68f(0x3b0)](0x0,_0x143c38);}function _0x17d44c(){const _0x35592e=_0xd9efbf;if(_0x26a0d7[_0x35592e(0x2a2)])_0x1b1fc8();if(_0x26a0d7[_0x35592e(0x26e)])_0x4f2454();}function _0x2976cb(){const _0x7ff53c=_0xd9efbf;if(_0x26a0d7[_0x7ff53c(0x2a2)])_0x1b1fc8();if(_0x26a0d7[_0x7ff53c(0x12d)])_0x1630c7();}function _0x37e0ae(_0x4a1e51){const _0x4ff568=_0xd9efbf;if(_0x26f7d0[_0x4ff568(0x180)]==0x1)_0x146b6c[_0x4ff568(0x3b0)](_0x4a1e51[_0x4ff568(0x2f9)],_0x4a1e51[_0x4ff568(0x2be)]);else{const _0x523f9e=_0x4bc52f(_0x4a1e51),_0x30cbae=0.5*(_0x4a1e51[_0x4ff568(0x2f9)]+_0x523f9e['x']),_0x266ed9=0.5*(_0x4a1e51['pageY']+_0x523f9e['y']);_0x146b6c[_0x4ff568(0x3b0)](_0x30cbae,_0x266ed9);}_0x500498[_0x4ff568(0x1dd)](_0x146b6c,_0x2bf946)[_0x4ff568(0x365)](_0x26a0d7[_0x4ff568(0xf0)]);const _0x2746e1=_0x26a0d7[_0x4ff568(0xf9)];_0x4da11b(0x2*Math['PI']*_0x500498['x']/_0x2746e1[_0x4ff568(0x367)]),_0x4115cb(0x2*Math['PI']*_0x500498['y']/_0x2746e1[_0x4ff568(0x367)]),_0x2bf946[_0x4ff568(0x357)](_0x146b6c);}function _0x37ca99(_0x252457){const _0x1c9915=_0xd9efbf;if(_0x26f7d0[_0x1c9915(0x180)]===0x1)_0x146106['set'](_0x252457[_0x1c9915(0x2f9)],_0x252457[_0x1c9915(0x2be)]);else{const _0x560ab4=_0x4bc52f(_0x252457),_0x220083=0.5*(_0x252457[_0x1c9915(0x2f9)]+_0x560ab4['x']),_0x27b3b5=0.5*(_0x252457[_0x1c9915(0x2be)]+_0x560ab4['y']);_0x146106[_0x1c9915(0x3b0)](_0x220083,_0x27b3b5);}_0x5666f6[_0x1c9915(0x1dd)](_0x146106,_0xfed390)[_0x1c9915(0x365)](_0x26a0d7[_0x1c9915(0x2f2)]),_0x5ac0b9(_0x5666f6['x'],_0x5666f6['y']),_0xfed390[_0x1c9915(0x357)](_0x146106);}function _0x214da2(_0x56c790){const _0x5bdb65=_0xd9efbf,_0x2d28b8=_0x4bc52f(_0x56c790),_0x68162=_0x56c790[_0x5bdb65(0x2f9)]-_0x2d28b8['x'],_0x4a5c87=_0x56c790[_0x5bdb65(0x2be)]-_0x2d28b8['y'],_0xee4d54=Math['sqrt'](_0x68162*_0x68162+_0x4a5c87*_0x4a5c87);_0x70c4e2['set'](0x0,_0xee4d54),_0x136d2f[_0x5bdb65(0x3b0)](0x0,Math[_0x5bdb65(0x24c)](_0x70c4e2['y']/_0x11570a['y'],_0x26a0d7['zoomSpeed'])),_0x1c3aa0(_0x136d2f['y']),_0x11570a[_0x5bdb65(0x357)](_0x70c4e2);}function _0x21b56c(_0x43c022){const _0x3c7b5c=_0xd9efbf;if(_0x26a0d7['enableZoom'])_0x214da2(_0x43c022);if(_0x26a0d7[_0x3c7b5c(0x26e)])_0x37ca99(_0x43c022);}function _0x45233b(_0x3e3281){const _0x1443bc=_0xd9efbf;if(_0x26a0d7[_0x1443bc(0x2a2)])_0x214da2(_0x3e3281);if(_0x26a0d7['enableRotate'])_0x37e0ae(_0x3e3281);}function _0x23d340(_0x27e096){const _0x5717cf=_0xd9efbf;if(_0x26a0d7['enabled']===![])return;_0x26f7d0[_0x5717cf(0x180)]===0x0&&(_0x26a0d7['domElement'][_0x5717cf(0x418)](_0x27e096[_0x5717cf(0x251)]),_0x26a0d7[_0x5717cf(0xf9)][_0x5717cf(0x31b)]('pointermove',_0x5b250e),_0x26a0d7[_0x5717cf(0xf9)][_0x5717cf(0x31b)](_0x5717cf(0x340),_0x4eb6e0)),_0x158eb9(_0x27e096),_0x27e096[_0x5717cf(0x12f)]===_0x5717cf(0x373)?_0x3c80ec(_0x27e096):_0x48a02c(_0x27e096);}function _0x5b250e(_0x40f585){const _0x3b1795=_0xd9efbf;if(_0x26a0d7[_0x3b1795(0x2d8)]===![])return;_0x40f585['pointerType']===_0x3b1795(0x373)?_0x23a833(_0x40f585):_0x6b81f6(_0x40f585);}function _0x4eb6e0(_0x7f7c6f){const _0x12ebbb=_0xd9efbf;_0x113291(_0x7f7c6f),_0x26f7d0[_0x12ebbb(0x180)]===0x0&&(_0x26a0d7[_0x12ebbb(0xf9)]['releasePointerCapture'](_0x7f7c6f[_0x12ebbb(0x251)]),_0x26a0d7[_0x12ebbb(0xf9)][_0x12ebbb(0x27b)](_0x12ebbb(0x355),_0x5b250e),_0x26a0d7['domElement']['removeEventListener'](_0x12ebbb(0x340),_0x4eb6e0)),_0x26a0d7[_0x12ebbb(0x213)](_endEvent),_0x1fe13d=_0xe3de6f['NONE'];}function _0x37d750(_0x1510c1){_0x113291(_0x1510c1);}function _0x48a02c(_0x39409f){const _0x5b05c7=_0xd9efbf;let _0x3a089e;switch(_0x39409f[_0x5b05c7(0x193)]){case 0x0:_0x3a089e=_0x26a0d7[_0x5b05c7(0x234)][_0x5b05c7(0xdb)];break;case 0x1:_0x3a089e=_0x26a0d7[_0x5b05c7(0x234)][_0x5b05c7(0x10f)];break;case 0x2:_0x3a089e=_0x26a0d7[_0x5b05c7(0x234)]['RIGHT'];break;default:_0x3a089e=-0x1;}switch(_0x3a089e){case MOUSE[_0x5b05c7(0x139)]:if(_0x26a0d7['enableZoom']===![])return;_0x433550(_0x39409f),_0x1fe13d=_0xe3de6f[_0x5b05c7(0x139)];break;case MOUSE[_0x5b05c7(0x1bd)]:if(_0x39409f[_0x5b05c7(0x3c3)]||_0x39409f['metaKey']||_0x39409f['shiftKey']){if(_0x26a0d7['enablePan']===![])return;_0x204241(_0x39409f),_0x1fe13d=_0xe3de6f[_0x5b05c7(0x267)];}else{if(_0x26a0d7[_0x5b05c7(0x12d)]===![])return;_0x5bcb53(_0x39409f),_0x1fe13d=_0xe3de6f['ROTATE'];}break;case MOUSE['PAN']:if(_0x39409f[_0x5b05c7(0x3c3)]||_0x39409f[_0x5b05c7(0x1db)]||_0x39409f[_0x5b05c7(0x276)]){if(_0x26a0d7['enableRotate']===![])return;_0x5bcb53(_0x39409f),_0x1fe13d=_0xe3de6f[_0x5b05c7(0x1bd)];}else{if(_0x26a0d7['enablePan']===![])return;_0x204241(_0x39409f),_0x1fe13d=_0xe3de6f[_0x5b05c7(0x267)];}break;default:_0x1fe13d=_0xe3de6f[_0x5b05c7(0x3c9)];}_0x1fe13d!==_0xe3de6f['NONE']&&_0x26a0d7[_0x5b05c7(0x213)](_startEvent);}function _0x6b81f6(_0x36fff4){const _0x589152=_0xd9efbf;if(_0x26a0d7[_0x589152(0x2d8)]===![])return;switch(_0x1fe13d){case _0xe3de6f[_0x589152(0x1bd)]:if(_0x26a0d7[_0x589152(0x12d)]===![])return;_0x1e667d(_0x36fff4);break;case _0xe3de6f[_0x589152(0x139)]:if(_0x26a0d7[_0x589152(0x2a2)]===![])return;_0x5e5113(_0x36fff4);break;case _0xe3de6f[_0x589152(0x267)]:if(_0x26a0d7[_0x589152(0x26e)]===![])return;_0x1bbe34(_0x36fff4);break;}}function _0x57ac5e(_0x4140a6){const _0x53d736=_0xd9efbf;if(_0x26a0d7[_0x53d736(0x2d8)]===![]||_0x26a0d7[_0x53d736(0x2a2)]===![]||_0x1fe13d!==_0xe3de6f[_0x53d736(0x3c9)])return;_0x4140a6['preventDefault'](),_0x26a0d7['dispatchEvent'](_startEvent),_0x66c3f(_0x4140a6),_0x26a0d7[_0x53d736(0x213)](_endEvent);}function _0x1088a6(_0x3c7c6a){const _0x2d8845=_0xd9efbf;if(_0x26a0d7[_0x2d8845(0x2d8)]===![]||_0x26a0d7['enablePan']===![])return;_0x30a384(_0x3c7c6a);}function _0x3c80ec(_0x47662d){const _0x3a3712=_0xd9efbf;_0x2c3b7b(_0x47662d);switch(_0x26f7d0['length']){case 0x1:switch(_0x26a0d7['touches'][_0x3a3712(0x20f)]){case TOUCH[_0x3a3712(0x1bd)]:if(_0x26a0d7['enableRotate']===![])return;_0x1630c7(),_0x1fe13d=_0xe3de6f[_0x3a3712(0x3fe)];break;case TOUCH['PAN']:if(_0x26a0d7[_0x3a3712(0x26e)]===![])return;_0x4f2454(),_0x1fe13d=_0xe3de6f[_0x3a3712(0xfd)];break;default:_0x1fe13d=_0xe3de6f[_0x3a3712(0x3c9)];}break;case 0x2:switch(_0x26a0d7[_0x3a3712(0x414)][_0x3a3712(0x319)]){case TOUCH['DOLLY_PAN']:if(_0x26a0d7[_0x3a3712(0x2a2)]===![]&&_0x26a0d7[_0x3a3712(0x26e)]===![])return;_0x17d44c(),_0x1fe13d=_0xe3de6f['TOUCH_DOLLY_PAN'];break;case TOUCH['DOLLY_ROTATE']:if(_0x26a0d7[_0x3a3712(0x2a2)]===![]&&_0x26a0d7[_0x3a3712(0x12d)]===![])return;_0x2976cb(),_0x1fe13d=_0xe3de6f[_0x3a3712(0x28d)];break;default:_0x1fe13d=_0xe3de6f[_0x3a3712(0x3c9)];}break;default:_0x1fe13d=_0xe3de6f[_0x3a3712(0x3c9)];}_0x1fe13d!==_0xe3de6f[_0x3a3712(0x3c9)]&&_0x26a0d7[_0x3a3712(0x213)](_startEvent);}function _0x23a833(_0x19165f){const _0x41735c=_0xd9efbf;_0x2c3b7b(_0x19165f);switch(_0x1fe13d){case _0xe3de6f[_0x41735c(0x3fe)]:if(_0x26a0d7['enableRotate']===![])return;_0x37e0ae(_0x19165f),_0x26a0d7[_0x41735c(0x2e4)]();break;case _0xe3de6f[_0x41735c(0xfd)]:if(_0x26a0d7[_0x41735c(0x26e)]===![])return;_0x37ca99(_0x19165f),_0x26a0d7[_0x41735c(0x2e4)]();break;case _0xe3de6f['TOUCH_DOLLY_PAN']:if(_0x26a0d7['enableZoom']===![]&&_0x26a0d7[_0x41735c(0x26e)]===![])return;_0x21b56c(_0x19165f),_0x26a0d7[_0x41735c(0x2e4)]();break;case _0xe3de6f[_0x41735c(0x28d)]:if(_0x26a0d7[_0x41735c(0x2a2)]===![]&&_0x26a0d7[_0x41735c(0x12d)]===![])return;_0x45233b(_0x19165f),_0x26a0d7[_0x41735c(0x2e4)]();break;default:_0x1fe13d=_0xe3de6f['NONE'];}}function _0x338163(_0x2b1ff5){const _0x46e844=_0xd9efbf;if(_0x26a0d7[_0x46e844(0x2d8)]===![])return;_0x2b1ff5[_0x46e844(0x323)]();}function _0x158eb9(_0xda4983){const _0x22a672=_0xd9efbf;_0x26f7d0[_0x22a672(0x32e)](_0xda4983);}function _0x113291(_0x5445ea){const _0x180e72=_0xd9efbf;delete _0x390642[_0x5445ea[_0x180e72(0x251)]];for(let _0x2bd8fa=0x0;_0x2bd8fa<_0x26f7d0[_0x180e72(0x180)];_0x2bd8fa++){if(_0x26f7d0[_0x2bd8fa][_0x180e72(0x251)]==_0x5445ea[_0x180e72(0x251)]){_0x26f7d0[_0x180e72(0x2e8)](_0x2bd8fa,0x1);return;}}}function _0x2c3b7b(_0x29a7cf){const _0x1c712d=_0xd9efbf;let _0x990669=_0x390642[_0x29a7cf[_0x1c712d(0x251)]];_0x990669===undefined&&(_0x990669=new Vector2(),_0x390642[_0x29a7cf[_0x1c712d(0x251)]]=_0x990669),_0x990669[_0x1c712d(0x3b0)](_0x29a7cf[_0x1c712d(0x2f9)],_0x29a7cf[_0x1c712d(0x2be)]);}function _0x4bc52f(_0x38e05e){const _0x7eac4b=_0xd9efbf,_0x35102a=_0x38e05e['pointerId']===_0x26f7d0[0x0][_0x7eac4b(0x251)]?_0x26f7d0[0x1]:_0x26f7d0[0x0];return _0x390642[_0x35102a[_0x7eac4b(0x251)]];}_0x26a0d7[_0xd9efbf(0xf9)][_0xd9efbf(0x31b)](_0xd9efbf(0x16d),_0x338163),_0x26a0d7[_0xd9efbf(0xf9)]['addEventListener'](_0xd9efbf(0x126),_0x23d340),_0x26a0d7[_0xd9efbf(0xf9)][_0xd9efbf(0x31b)](_0xd9efbf(0x313),_0x37d750),_0x26a0d7['domElement'][_0xd9efbf(0x31b)](_0xd9efbf(0x124),_0x57ac5e,{'passive':![]}),this[_0xd9efbf(0x2e4)]();}}const orbitChangeEvent={'type':a0_0x19d63f(0x2dc)},changeEvent={'type':a0_0x19d63f(0x349)},startEvent={'type':a0_0x19d63f(0x210)},endEvent={'type':a0_0x19d63f(0x183)},tempVector=new Vector4(0x0,0x0,0x0,0x0);class FlyOrbitControls extends OrbitControls{constructor(_0x379e97,_0x24a78d){const _0x500bef=a0_0x19d63f,_0x16df7e=_0x5ea4a6=>{const _0x110c48=a0_0xfa1d;this['enabled']&&Object[_0x110c48(0x3c5)](_0x5ea4a6,_0x110c48(0x276),{'get'(){return![];}});};_0x24a78d[_0x500bef(0x31b)](_0x500bef(0x126),_0x16df7e),super(_0x379e97,_0x24a78d),this[_0x500bef(0x266)]=!![],this['enableFlight']=!![],this[_0x500bef(0x157)]=0.25,this['fastSpeed']=0x1,this[_0x500bef(0x3cb)]='w',this[_0x500bef(0x3db)]='s',this[_0x500bef(0x179)]='a',this[_0x500bef(0x2c4)]='d',this['upKey']='q',this['downKey']='e',this[_0x500bef(0x2c0)]=_0x500bef(0x1e8);let _0x34444d=![],_0x296763=![],_0x3c03e7=![],_0x67cb9=![],_0x507b1c=![],_0x398856=![],_0x42c932=![],_0x20a707=0x0,_0x4f4f91=0x0,_0x3b0404=0x0,_0x4c0b80=-0x1;const _0x545c97=new Vector3(),_0x3a2321=new Clock(),_0x4b34a=()=>{const _0x3b53f2=_0x500bef;if(_0x4c0b80!==-0x1){cancelAnimationFrame(_0x4c0b80),_0x4c0b80=-0x1,this['minDistance']=_0x4f4f91,this[_0x3b53f2(0x206)]=_0x3b0404;const _0x33c493=Math[_0x3b53f2(0x11d)](_0x20a707,_0x379e97[_0x3b53f2(0x3ce)][_0x3b53f2(0x3df)](_0x545c97));tempVector['set'](0x0,0x0,-0x1,0x0)[_0x3b53f2(0x3b7)](_0x379e97['matrixWorld']),this['target'][_0x3b53f2(0x357)](_0x379e97[_0x3b53f2(0x3ce)])[_0x3b53f2(0x194)](tempVector,_0x33c493),this[_0x3b53f2(0x213)](endEvent);}},_0x375624=()=>{const _0x290098=_0x500bef;if(!this[_0x290098(0x2d8)]||!this[_0x290098(0x158)])return;_0x4c0b80=requestAnimationFrame(_0x375624),tempVector[_0x290098(0x3b0)](0x0,0x0,0x0,0x0);if(_0x296763)tempVector['z']-=0x1;if(_0x3c03e7)tempVector['z']+=0x1;if(_0x67cb9)tempVector['x']-=0x1;if(_0x507b1c)tempVector['x']+=0x1;if(_0x398856)tempVector['y']+=0x1;if(_0x42c932)tempVector['y']-=0x1;tempVector[_0x290098(0x3b7)](_0x379e97[_0x290098(0x2d7)]);const _0x4d8027=0x3c*_0x3a2321[_0x290098(0x220)](),_0x2225dc=_0x34444d?this[_0x290098(0x2c6)]:this[_0x290098(0x157)];_0x379e97[_0x290098(0x3ce)]['addScaledVector'](tempVector,_0x2225dc*_0x4d8027),this[_0x290098(0x28e)][_0x290098(0x194)](tempVector,_0x2225dc*_0x4d8027),this[_0x290098(0x213)](changeEvent),this[_0x290098(0x213)](orbitChangeEvent);},_0x183048=_0x22e888=>{const _0x4ac6a2=_0x500bef;if(!this[_0x4ac6a2(0x266)])return;if(_0x22e888['target']!==document[_0x4ac6a2(0x34c)])return;const _0x49f476=_0x22e888[_0x4ac6a2(0x295)][_0x4ac6a2(0x167)]();_0x4c0b80===-0x1&&(_0x3b0404=this[_0x4ac6a2(0x206)],_0x4f4f91=this[_0x4ac6a2(0x236)],_0x20a707=_0x379e97[_0x4ac6a2(0x3ce)]['distanceTo'](this['target']),_0x545c97['copy'](this[_0x4ac6a2(0x28e)]));switch(_0x49f476){case this[_0x4ac6a2(0x3cb)]:_0x296763=!![];break;case this['backKey']:_0x3c03e7=!![];break;case this[_0x4ac6a2(0x179)]:_0x67cb9=!![];break;case this['rightKey']:_0x507b1c=!![];break;case this[_0x4ac6a2(0x2a6)]:_0x398856=!![];break;case this[_0x4ac6a2(0x116)]:_0x42c932=!![];break;case this[_0x4ac6a2(0x2c0)]:_0x34444d=!![];break;}switch(_0x49f476){case this[_0x4ac6a2(0x2c0)]:case this[_0x4ac6a2(0x3cb)]:case this[_0x4ac6a2(0x3db)]:case this['leftKey']:case this[_0x4ac6a2(0x2c4)]:case this['upKey']:case this[_0x4ac6a2(0x116)]:_0x22e888[_0x4ac6a2(0x114)](),_0x22e888[_0x4ac6a2(0x323)]();}(_0x296763||_0x3c03e7||_0x67cb9||_0x507b1c||_0x398856||_0x42c932||_0x34444d)&&(this[_0x4ac6a2(0x236)]=0.01,this[_0x4ac6a2(0x206)]=0.01,tempVector[_0x4ac6a2(0x3b0)](0x0,0x0,-0x1,0x0)['applyMatrix4'](_0x379e97[_0x4ac6a2(0x2d7)]),this[_0x4ac6a2(0x28e)][_0x4ac6a2(0x357)](_0x379e97[_0x4ac6a2(0x3ce)])[_0x4ac6a2(0x194)](tempVector,0.01),_0x4c0b80===-0x1&&(this[_0x4ac6a2(0x213)](startEvent),_0x3a2321['getDelta'](),_0x375624()));},_0xb9d7bb=_0x1c04a8=>{const _0x4cbf32=_0x500bef,_0x2e922e=_0x1c04a8[_0x4cbf32(0x295)]['toLowerCase']();switch(_0x2e922e){case this[_0x4cbf32(0x2c0)]:case this[_0x4cbf32(0x3cb)]:case this[_0x4cbf32(0x3db)]:case this[_0x4cbf32(0x179)]:case this[_0x4cbf32(0x2c4)]:case this[_0x4cbf32(0x2a6)]:case this[_0x4cbf32(0x116)]:_0x1c04a8[_0x4cbf32(0x114)](),_0x1c04a8[_0x4cbf32(0x323)]();}switch(_0x2e922e){case this['forwardKey']:_0x296763=![];break;case this[_0x4cbf32(0x3db)]:_0x3c03e7=![];break;case this[_0x4cbf32(0x179)]:_0x67cb9=![];break;case this['rightKey']:_0x507b1c=![];break;case this[_0x4cbf32(0x2a6)]:_0x398856=![];break;case this['downKey']:_0x42c932=![];break;case this[_0x4cbf32(0x2c0)]:_0x34444d=![];break;}!(_0x296763||_0x3c03e7||_0x67cb9||_0x507b1c||_0x398856||_0x42c932||_0x34444d)&&_0x4b34a();},_0x3333eb=()=>{_0x4b34a();};this[_0x500bef(0x2d2)]=_0x3333eb,this[_0x500bef(0x11c)]=_0x183048,this[_0x500bef(0x2ab)]=_0xb9d7bb,this[_0x500bef(0x389)]=_0x16df7e,document['addEventListener']('blur',_0x3333eb),document['addEventListener']('keydown',_0x183048),document[_0x500bef(0x31b)](_0x500bef(0xf7),_0xb9d7bb);}[a0_0x19d63f(0x3a5)](){const _0x49da1d=a0_0x19d63f;super[_0x49da1d(0x3a5)](),document[_0x49da1d(0x27b)]('blur',this['blurCallback']),document[_0x49da1d(0x27b)](_0x49da1d(0x125),this[_0x49da1d(0x11c)]),document[_0x49da1d(0x27b)](_0x49da1d(0xf7),this[_0x49da1d(0x2ab)]),this[_0x49da1d(0xf9)][_0x49da1d(0x27b)](_0x49da1d(0x126),this['disableShiftKeyCallback']);}}const predefineColors=ref([a0_0x19d63f(0x32d),'#ff8c00','#ffd700',a0_0x19d63f(0x127),a0_0x19d63f(0x1cb),a0_0x19d63f(0x342),a0_0x19d63f(0xff),a0_0x19d63f(0x390),a0_0x19d63f(0xee),'hsv(51,\x20100,\x2098)',a0_0x19d63f(0x23c),'hsl(181,\x20100%,\x2037%)',a0_0x19d63f(0x2a5),a0_0x19d63f(0x181)]);class KeyEventCode{[a0_0x19d63f(0x32f)]=a0_0x19d63f(0x32f);[a0_0x19d63f(0x3e6)]=a0_0x19d63f(0x3e6);[a0_0x19d63f(0x222)]=a0_0x19d63f(0x222);[a0_0x19d63f(0x322)]=a0_0x19d63f(0x322);['Delete']='Delete';['C']=a0_0x19d63f(0x361);['F']=a0_0x19d63f(0x2d6);['G']=a0_0x19d63f(0x16b);['H']=a0_0x19d63f(0x112);['I']=a0_0x19d63f(0x30f);['J']=a0_0x19d63f(0x2ba);['L']=a0_0x19d63f(0x226);['M']=a0_0x19d63f(0xdc);['N']=a0_0x19d63f(0x3c1);['O']='KeyO';['P']=a0_0x19d63f(0x12e);['R']=a0_0x19d63f(0x348);['U']='KeyU';[a0_0x19d63f(0x289)]=a0_0x19d63f(0x289);['W']='KeyW';['S']=a0_0x19d63f(0x1f7);['A']='KeyA';['D']=a0_0x19d63f(0x33c);['Q']=a0_0x19d63f(0x159);['E']=a0_0x19d63f(0x3d1);['T']='KeyT';['V']=a0_0x19d63f(0x14e);['Y']=a0_0x19d63f(0x3ba);['Z']=a0_0x19d63f(0xd6);[a0_0x19d63f(0x10d)]='Equal';[a0_0x19d63f(0x39d)]=a0_0x19d63f(0x39d);[a0_0x19d63f(0x1e3)]=a0_0x19d63f(0x1e3);[a0_0x19d63f(0x352)]=a0_0x19d63f(0x352);[a0_0x19d63f(0x3ea)]='Digit2';[a0_0x19d63f(0x29a)]='Digit3';[a0_0x19d63f(0x240)]=a0_0x19d63f(0x240);[a0_0x19d63f(0x38b)]=a0_0x19d63f(0x38b);[a0_0x19d63f(0x1af)]=a0_0x19d63f(0x1af);[a0_0x19d63f(0x20a)]=a0_0x19d63f(0x20a);[a0_0x19d63f(0x232)]=a0_0x19d63f(0x35c);[a0_0x19d63f(0x2de)]=a0_0x19d63f(0x1fb);}function a0_0xfa1d(_0x193a32,_0x461e82){const _0x11ee5d=a0_0x11ee();return a0_0xfa1d=function(_0xfa1dae,_0xd173a){_0xfa1dae=_0xfa1dae-0xd5;let _0x27053f=_0x11ee5d[_0xfa1dae];return _0x27053f;},a0_0xfa1d(_0x193a32,_0x461e82);}const KeyCode=new KeyEventCode(),WorldConfig={'order_area':0x12c,'order_lines':0x190,'order_joined':0x3f5,'order_vert_hover':0x3f6,'order_vert_edit':0x3f7,'order_vert_cross':0x3f8,'order_adhere_lines':0x3f9,'order_2d_transform':0x2328,'order_paste_item':0x2329,'localSaveName':a0_0x19d63f(0x303),'version':0x1,'adhereRadiusForJoin':0.2,'adhereRadiusForEditing':0.07,'adhereEdgeDistance':0.05};new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x0,0x1),new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x1,0x0),new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x1,0x0,0x0);const MouseButton={'left':0x0,'right':0x2},KeyboardState={'keyDownAlt':![],'keyDownCtrl':![],'keyDownShift':![]},assets3dBaseUrl=a0_0x19d63f(0x358);window['addEventListener'](a0_0x19d63f(0x125),_0x55324e=>{const _0x10bd60=a0_0x19d63f;KeyboardState[_0x10bd60(0xe0)]=_0x55324e[_0x10bd60(0x28a)],KeyboardState[_0x10bd60(0x15f)]=_0x55324e[_0x10bd60(0x3c3)],KeyboardState[_0x10bd60(0x29f)]=_0x55324e['shiftKey'];}),window['addEventListener']('keyup',_0x4a2c62=>{const _0x293bc2=a0_0x19d63f;KeyboardState[_0x293bc2(0xe0)]=![],KeyboardState['keyDownCtrl']=![];});class PluginBase{['pointerDown'](_0xc70a9b){}['pointerMove'](_0x460a3e){}[a0_0x19d63f(0x1ef)](_0x245929){}['pointerUpUnmoved'](_0x3da828){}}function debounce(_0x3a7192,_0x4da7d3){let _0x514cdb=null;return function(){_0x514cdb!==null&&clearTimeout(_0x514cdb),_0x514cdb=setTimeout(_0x3a7192,_0x4da7d3);};}const removeArrayItem=(_0x54a7eb,_0x45e5e4)=>{const _0x20ad56=a0_0x19d63f,_0x47a835=_0x54a7eb[_0x20ad56(0x3d5)](_0x45e5e4);_0x47a835>=0x0&&_0x54a7eb['splice'](_0x47a835,0x1);};function addArrayItems(_0x257de8,_0x547401){const _0x45cca5=a0_0x19d63f;for(let _0x20c638=0x1;_0x20c638<arguments[_0x45cca5(0x180)];_0x20c638++){const _0x52fc51=arguments[_0x20c638],_0x2bb1a9=_0x257de8[_0x45cca5(0x3d5)](_0x52fc51);_0x2bb1a9<0x0&&_0x257de8['push'](_0x52fc51);}}const replaceArrayItem=(_0x45a179,_0x4b8b0b,_0x535fee)=>{const _0x27e5a9=_0x45a179['indexOf'](_0x535fee);_0x27e5a9>=0x0&&(_0x45a179[_0x27e5a9]=_0x4b8b0b);};function arrAsubB(_0x3a5ae8,_0x12b1df){const _0x410dfe=a0_0x19d63f;return _0x12b1df[_0x410dfe(0x156)](_0x1f5e7a=>{const _0x4b0cd4=_0x3a5ae8['indexOf'](_0x1f5e7a);_0x4b0cd4>=0x0&&_0x3a5ae8['splice'](_0x4b0cd4,0x1);}),_0x3a5ae8;}function arrAunionB(_0x1d1f00,_0x431cb2){const _0x1af96d=[..._0x1d1f00];return _0x431cb2['forEach'](_0xccbe23=>{const _0x2d428d=a0_0xfa1d,_0x35fca1=_0x1d1f00[_0x2d428d(0x3d5)](_0xccbe23);_0x35fca1<0x0&&_0x1af96d[_0x2d428d(0x32e)](_0xccbe23);}),_0x1af96d;}function circlesToVerts(_0x3a6f8e){const _0x4a9757=a0_0x19d63f,_0x496761=[],_0x51ffcd=[];let _0x5471b9=0x0;for(let _0x3ab86e=0x0;_0x3ab86e<_0x3a6f8e[_0x4a9757(0x180)];_0x3ab86e++){const _0x5035e7=_0x3a6f8e[_0x3ab86e];_0x5471b9+=_0x5035e7[_0x4a9757(0x180)],_0x3ab86e<_0x3a6f8e[_0x4a9757(0x180)]-0x1&&_0x51ffcd[_0x4a9757(0x32e)](_0x5471b9),_0x496761[_0x4a9757(0x32e)](..._0x5035e7);}return[_0x496761,_0x51ffcd];}function vertsToCircles(_0x5c1e1b){const _0x38e626=a0_0x19d63f,_0x49fe6a=_0x5c1e1b[0x0],_0x2c3ba7=_0x5c1e1b[0x1];if(!_0x2c3ba7['length'])return[_0x49fe6a];const _0x5e8512=[];let _0x58064c=0x0;return _0x2c3ba7[_0x38e626(0x156)]((_0x3be50f,_0x2bd817)=>{const _0x53c3dc=_0x38e626;_0x2bd817>0x0&&(_0x58064c=_0x2c3ba7[_0x2bd817-0x1]),_0x5e8512[_0x53c3dc(0x32e)](_0x49fe6a['slice'](_0x58064c,_0x3be50f));}),_0x5e8512[_0x38e626(0x32e)](_0x49fe6a[_0x38e626(0x3b6)](_0x2c3ba7[_0x2c3ba7[_0x38e626(0x180)]-0x1],_0x49fe6a[_0x38e626(0x180)])),_0x5e8512;}function getLocalItem(_0x1594ec){const _0x7f8761=a0_0x19d63f,_0xcc326d=localStorage['getItem'](_0x1594ec);if(!_0xcc326d)return null;try{return JSON[_0x7f8761(0x2fe)](_0xcc326d);}catch(_0x50cec9){return null;}}function setLocalItem(_0x21af6e,_0x145ff5){const _0x24d0f2=a0_0x19d63f;_0x145ff5===undefined||_0x145ff5===null?localStorage[_0x24d0f2(0x3c2)](_0x21af6e):localStorage[_0x24d0f2(0x26a)](_0x21af6e,JSON[_0x24d0f2(0x113)](_0x145ff5));}function numToStr16(_0x3e591a){const _0x579281=a0_0x19d63f,_0x4c3cf5='00'+parseInt(_0x3e591a)[_0x579281(0x173)](0x10);return _0x4c3cf5[_0x579281(0x368)](_0x4c3cf5['length']-0x2,_0x4c3cf5[_0x579281(0x180)]);}function rgbaStrToColorOpacitiy(_0x4bfca6){const _0x57f9c6=/^(\w+)\(([^\)]*)\)/['exec'](_0x4bfca6),_0x389c4f=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/['exec'](_0x57f9c6[0x2]),_0x2d7eeb='#'+numToStr16(_0x389c4f[0x1])+numToStr16(_0x389c4f[0x2])+numToStr16(_0x389c4f[0x3]),_0xba12f9=parseFloat(_0x389c4f[0x4]);return{'cssColor':_0x2d7eeb,'opacity':_0xba12f9};}function colorOpacityToRgba(_0x3aed53,_0x5582f8){const _0x4a7eee=a0_0x19d63f,_0x3c78ce=parseInt(_0x3aed53[_0x4a7eee(0x368)](0x1,0x3),0x10),_0x1664fa=parseInt(_0x3aed53['substring'](0x3,0x5),0x10),_0x5d0cb7=parseInt(_0x3aed53[_0x4a7eee(0x368)](0x5,0x7),0x10);return _0x4a7eee(0x290)+_0x3c78ce+',\x20'+_0x1664fa+',\x20'+_0x5d0cb7+',\x20'+_0x5582f8+')';}let areaCount=0x1;function setAreaCount(_0x12fdff){areaCount<=_0x12fdff&&(areaCount=_0x12fdff+0x1);}class Area2d{static [a0_0x19d63f(0x265)]={'color':'#1e90ff','opacity':0.8};['id']=0x0;[a0_0x19d63f(0x275)];[a0_0x19d63f(0x3b2)]='';[a0_0x19d63f(0x385)]=0.8;[a0_0x19d63f(0x3ce)]=[0x0,0x0,0x0];[a0_0x19d63f(0x1ce)]=0x0;['scale']=[0x1,0x1];[a0_0x19d63f(0x17f)]=[];['order']=WorldConfig[a0_0x19d63f(0x1d2)];constructor(){const _0x1865a6=a0_0x19d63f;this['id']=areaCount++,this['cssColor']=Area2d[_0x1865a6(0x265)][_0x1865a6(0x15e)],this['opacity']=Area2d[_0x1865a6(0x265)]['opacity'];}['setDefaultVerts'](){const _0x1ec94f=a0_0x19d63f;return this[_0x1ec94f(0x275)]=[[{'x':0.5,'y':0.5},{'x':0.5,'y':-0.5},{'x':-0.5,'y':-0.5},{'x':-0.5,'y':0.5}],[]],this['_hw0']=0.5,this['_hh0']=0.5,this;}[a0_0x19d63f(0x298)](_0x4ed058=![]){const _0x45dfed=a0_0x19d63f,_0x5e6fbc=new Area2d();return _0x5e6fbc['verts']=[],_0x5e6fbc[_0x45dfed(0x275)][0x0]=this[_0x45dfed(0x275)][0x0][_0x45dfed(0x3b6)](),_0x5e6fbc[_0x45dfed(0x275)][0x1]=this[_0x45dfed(0x275)][0x1][_0x45dfed(0x3b6)](),_0x5e6fbc[_0x45dfed(0x385)]=this['opacity'],_0x5e6fbc[_0x45dfed(0x3b2)]=this[_0x45dfed(0x3b2)],_0x4ed058&&(_0x5e6fbc[_0x45dfed(0x1ce)]=this[_0x45dfed(0x1ce)],_0x5e6fbc[_0x45dfed(0x154)]=this[_0x45dfed(0x154)][_0x45dfed(0x3b6)](),_0x5e6fbc[_0x45dfed(0x3ce)]=this[_0x45dfed(0x3ce)][_0x45dfed(0x3b6)]()),_0x5e6fbc;}[a0_0x19d63f(0x260)](_0x65823d,_0x5e2420=!![]){const _0x249ae1=a0_0x19d63f;return this[_0x249ae1(0x385)]=_0x65823d[_0x249ae1(0x385)],this[_0x249ae1(0x3b2)]=_0x65823d['cssColor'],_0x5e2420&&(this[_0x249ae1(0x1ce)]=_0x65823d[_0x249ae1(0x1ce)],this[_0x249ae1(0x154)]=_0x65823d['scale']['slice'](),this[_0x249ae1(0x3ce)]=_0x65823d[_0x249ae1(0x3ce)][_0x249ae1(0x3b6)]()),this;}[a0_0x19d63f(0x28c)](){const _0x1c8b26=a0_0x19d63f;this[_0x1c8b26(0x17f)]['length']=0x0;const _0x2e8573=this['verts'][0x0],_0x1c7f72=vertsToCircles(this[_0x1c8b26(0x275)]);return _0x1c7f72[_0x1c8b26(0x156)](_0x17b0a4=>{const _0x5d9174=_0x1c8b26;_0x17b0a4[_0x5d9174(0x156)]((_0x2b057c,_0x3923b3)=>{const _0x23bc1b=_0x5d9174,_0x1012ec=_0x17b0a4[(_0x3923b3+0x1)%_0x17b0a4[_0x23bc1b(0x180)]];this[_0x23bc1b(0x17f)][_0x23bc1b(0x32e)](_0x2e8573['indexOf'](_0x2b057c),_0x2e8573[_0x23bc1b(0x3d5)](_0x1012ec));});}),this[_0x1c8b26(0x17f)];}[a0_0x19d63f(0x3f3)](_0x5d8a31){const _0x2ae5cc=a0_0x19d63f,_0xde205c=this[_0x2ae5cc(0x275)][0x1];if(!_0xde205c['length'])return 0x0;for(let _0x59e0ec=0x0;_0x59e0ec<_0xde205c['length'];_0x59e0ec++){if(_0x5d8a31<_0xde205c[_0x59e0ec])return _0x59e0ec;}return _0xde205c[_0x2ae5cc(0x180)];}[a0_0x19d63f(0x27c)](_0x253d18){const _0xc77e73=a0_0x19d63f,_0x161b8d=this[_0xc77e73(0x275)][0x1];if(!_0x161b8d['length'])return;const _0x5f32fb=this[_0xc77e73(0x3f3)](_0x253d18);_0x161b8d[_0xc77e73(0x156)]((_0xdfb099,_0x479a22)=>{_0x479a22>=_0x5f32fb&&(_0x161b8d[_0x479a22]=_0x161b8d[_0x479a22]+0x1);});}[a0_0x19d63f(0xf5)](_0xbd1fe1){const _0x496d0d=a0_0x19d63f,_0x561278=this[_0x496d0d(0x275)][0x1],_0x558a28=this['verts'][0x0];_0x558a28['splice'](_0xbd1fe1,0x1);if(!_0x561278[_0x496d0d(0x180)])return;const _0x477706=this[_0x496d0d(0x3f3)](_0xbd1fe1);_0x561278[_0x496d0d(0x156)]((_0x6cc9c1,_0x12441c)=>{_0x12441c>=_0x477706&&(_0x561278[_0x12441c]=_0x561278[_0x12441c]-0x1);});const _0x56baa0=vertsToCircles(this[_0x496d0d(0x275)]);if(_0x56baa0[0x0]['length']<0x3){this[_0x496d0d(0x275)]=null;return;}const _0x4e079f=_0x56baa0['filter'](_0xe6de71=>_0xe6de71[_0x496d0d(0x180)]>0x2);_0x4e079f['length']<_0x56baa0[_0x496d0d(0x180)]&&(this['verts']=circlesToVerts(_0x4e079f));}[a0_0x19d63f(0x3ae)](){const _0x1b7414=vertsToCircles(this['verts']);return _0x1b7414[0x0];}[a0_0x19d63f(0x19a)](){const _0x398e71=a0_0x19d63f,_0xb1456c={'color':this[_0x398e71(0x3b2)],'rotZ':this[_0x398e71(0x1ce)],'opacity':this[_0x398e71(0x385)],'order':this['order']};_0xb1456c['id']=this['id'],_0xb1456c[_0x398e71(0x3ce)]=this[_0x398e71(0x3ce)][_0x398e71(0x24a)](_0x3049c3=>parseFloat(_0x3049c3['toFixed'](0x3))),_0xb1456c[_0x398e71(0x154)]=this[_0x398e71(0x154)]['map'](_0x4ebec4=>parseFloat(_0x4ebec4[_0x398e71(0x2ea)](0x3))),_0xb1456c[_0x398e71(0x275)]=[[],[]];const _0x89325c=_0xb1456c[_0x398e71(0x275)][0x0];return this[_0x398e71(0x275)][0x0][_0x398e71(0x156)](_0x29a740=>{const _0x26d73a=_0x398e71;_0x89325c['push'](parseFloat(_0x29a740['x'][_0x26d73a(0x2ea)](0x3))),_0x89325c[_0x26d73a(0x32e)](parseFloat(_0x29a740['y'][_0x26d73a(0x2ea)](0x3)));}),_0xb1456c['verts'][0x1]=this[_0x398e71(0x275)][0x1],_0xb1456c;}['fromJsonObj'](_0x45ff4d){const _0x3f667a=a0_0x19d63f;this['id']=_0x45ff4d['id']||0x0,setAreaCount(this['id']),this[_0x3f667a(0x2ca)]=_0x45ff4d[_0x3f667a(0x2ca)]||WorldConfig[_0x3f667a(0x1d2)],this[_0x3f667a(0x3b2)]=_0x45ff4d[_0x3f667a(0x15e)],this[_0x3f667a(0x3ce)]=_0x45ff4d[_0x3f667a(0x3ce)],this[_0x3f667a(0x1ce)]=_0x45ff4d['rotZ'],this['scale']=_0x45ff4d['scale'],this[_0x3f667a(0x385)]=_0x45ff4d['opacity']||0.8,this[_0x3f667a(0x275)]=[[],_0x45ff4d[_0x3f667a(0x275)][0x1]];const _0xed8b3e=_0x45ff4d[_0x3f667a(0x275)][0x0];for(let _0x5d2135=0x0;_0x5d2135<_0xed8b3e[_0x3f667a(0x180)];_0x5d2135+=0x2){const _0x2647ca={'x':_0xed8b3e[_0x5d2135],'y':_0xed8b3e[_0x5d2135+0x1]};this[_0x3f667a(0x275)][0x0][_0x3f667a(0x32e)](_0x2647ca);}return this;}['scaleTo'](_0x3c5c75){const _0x31cffc=a0_0x19d63f;return this[_0x31cffc(0x154)][0x0]=_0x3c5c75,this[_0x31cffc(0x154)][0x1]=_0x3c5c75,this;}['scaleSet'](_0x4b0755,_0x33346b){const _0x48dcb6=a0_0x19d63f;this[_0x48dcb6(0x154)][0x0]=_0x4b0755,this[_0x48dcb6(0x154)][0x1]=_0x33346b;}}const clipper=new a0_0x4c3ad7[(a0_0x19d63f(0x152))](),clipperOffset=new a0_0x4c3ad7[(a0_0x19d63f(0x10b))](0x2,0.25),scale=0x3e8,minimum=0x1/scale;function equals(_0x5d5a66,_0xbfc6b8,_0x288aaf=!![]){if(_0x5d5a66===_0xbfc6b8)return!![];if(_0x288aaf)return Math['abs'](_0x5d5a66['x']-_0xbfc6b8['x'])<=minimum&&Math['abs'](_0x5d5a66['y']-_0xbfc6b8['y'])<=minimum;return _0x5d5a66['x']===_0xbfc6b8['x']&&_0x5d5a66['y']===_0xbfc6b8['y'];}function circlesToClipPaths(_0x4084e0,_0x1b7ef7=0x1){const _0x546454=a0_0x19d63f,_0xdaa89d=[],_0x55f26a=vertsToCircles(_0x4084e0);for(let _0x2e292f=0x0;_0x2e292f<_0x55f26a['length'];_0x2e292f++){const _0x3f1b4b=_0x55f26a[_0x2e292f],_0x5eb2ab=[];for(let _0x3d99f6=0x0;_0x3d99f6<_0x3f1b4b[_0x546454(0x180)];_0x3d99f6++){const _0x2d0ca2=_0x3f1b4b[_0x3d99f6],_0x3fe341={'X':_0x2d0ca2['x'],'Y':_0x2d0ca2['y']};_0x1b7ef7>0x1&&(_0x3fe341['X']=Math['round'](_0x3fe341['X']*_0x1b7ef7),_0x3fe341['Y']=Math[_0x546454(0x25f)](_0x3fe341['Y']*_0x1b7ef7)),_0x5eb2ab[_0x546454(0x32e)](_0x3fe341);}_0xdaa89d[_0x546454(0x32e)](_0x5eb2ab);}return _0xdaa89d;}function extractCirclesArrFrom(_0x34a24d,_0x290e86=[]){const _0x41db2c=a0_0x19d63f,_0x562ba3=[];for(let _0x37b8af=0x0;_0x37b8af<_0x34a24d[_0x41db2c(0x12b)]['length'];_0x37b8af++){const _0x11c568=_0x34a24d[_0x41db2c(0x12b)][_0x37b8af],_0x5dc958=_0x11c568['m_polygon'][_0x41db2c(0x24a)](_0x47d886=>{return{'x':_0x47d886['X']/scale,'y':_0x47d886['Y']/scale};}),_0x40fcfc=[_0x5dc958];for(let _0x2bb21a=0x0;_0x2bb21a<_0x11c568['m_Childs'][_0x41db2c(0x180)];_0x2bb21a++){const _0x74bd=_0x11c568[_0x41db2c(0x12b)][_0x2bb21a],_0x2e0a9b=_0x74bd['m_polygon'][_0x41db2c(0x24a)](_0x2bcc7e=>{return{'x':_0x2bcc7e['X']/scale,'y':_0x2bcc7e['Y']/scale};});_0x40fcfc['push'](_0x2e0a9b);if(_0x74bd[_0x41db2c(0x12b)][_0x41db2c(0x180)]){const _0x631d53=new a0_0x4c3ad7[(_0x41db2c(0x205))]();_0x631d53[_0x41db2c(0x12b)]=_0x74bd[_0x41db2c(0x12b)],_0x562ba3['push'](_0x631d53);}}_0x290e86[_0x41db2c(0x32e)](_0x40fcfc);}return _0x562ba3[_0x41db2c(0x156)](_0x57d357=>extractCirclesArrFrom(_0x57d357,_0x290e86)),_0x290e86;}function boolPolygons(_0x4353f5,_0xb3f931){const _0x5266f7=a0_0x19d63f,_0x1708fd=[],_0x4a5771=[];for(let _0x527070=0x0;_0x527070<_0x4353f5[_0x5266f7(0x180)];_0x527070++){const _0x4a7dcc=_0x4353f5[_0x527070],_0x141f79=circlesToClipPaths(_0x4a7dcc);_0x1708fd[_0x5266f7(0x32e)](..._0x141f79),_0x527070===0x0&&_0x4a5771[_0x5266f7(0x32e)](..._0x141f79);}a0_0x4c3ad7['JS'][_0x5266f7(0x241)](_0x1708fd,scale),clipper[_0x5266f7(0x2c2)]();for(let _0x1335e1=0x0;_0x1335e1<_0x1708fd['length'];_0x1335e1++){const _0x240bc5=_0x4a5771[_0x5266f7(0x119)](_0x1708fd[_0x1335e1])?a0_0x4c3ad7[_0x5266f7(0x3af)][_0x5266f7(0x3d3)]:a0_0x4c3ad7[_0x5266f7(0x3af)][_0x5266f7(0x1c0)];clipper['AddPath'](_0x1708fd[_0x1335e1],_0x240bc5,!![]);}const _0x37558a=new a0_0x4c3ad7[(_0x5266f7(0x205))](),_0xf69c4d=a0_0x4c3ad7[_0x5266f7(0x3bc)]['pftNonZero'];clipper['Execute'](_0xb3f931,_0x37558a,_0xf69c4d,_0xf69c4d);const _0x321051=extractCirclesArrFrom(_0x37558a),_0x10f8f7=_0x321051[_0x5266f7(0x24a)](_0x20a231=>circlesToVerts(_0x20a231));return _0x10f8f7;}class ClipperTool{static ['_jtType']=a0_0x4c3ad7['JoinType']['jtMiter'];static [a0_0x19d63f(0x122)]=a0_0x4c3ad7[a0_0x19d63f(0x1ea)][a0_0x19d63f(0x1a4)];static[a0_0x19d63f(0x255)](){const _0x592d53=a0_0x19d63f;return ClipperTool[_0x592d53(0x2c1)];}static[a0_0x19d63f(0x29e)](_0x1c6468){ClipperTool['_jtType']=_0x1c6468;}static[a0_0x19d63f(0xeb)](){const _0x2c0cd5=a0_0x19d63f;return ClipperTool[_0x2c0cd5(0x122)];}static[a0_0x19d63f(0x21b)](_0x34d78b){const _0xd5bf45=a0_0x19d63f;ClipperTool[_0xd5bf45(0x122)]=_0x34d78b;}static[a0_0x19d63f(0x13a)](_0x103fe6,_0x1a3dc5,_0x46c70f=!![]){const _0x4b6735=a0_0x19d63f;clipperOffset['Clear']();const _0x3b6e59=[],_0x478219=Math[_0x4b6735(0x25f)];_0x103fe6[_0x4b6735(0x156)](_0x3cff82=>{const _0x3ebce7=_0x4b6735,_0x223b5=[];_0x3cff82[_0x3ebce7(0x156)](_0x291a1e=>{_0x223b5['push']({'X':_0x478219(_0x291a1e['x']*scale),'Y':_0x478219(_0x291a1e['y']*scale)});}),_0x3b6e59['push'](_0x223b5);});const _0x24fd8b=_0x46c70f?a0_0x4c3ad7['EndType']['etClosedPolygon']:ClipperTool[_0x4b6735(0x122)];clipperOffset['AddPaths'](_0x3b6e59,ClipperTool[_0x4b6735(0x2c1)],_0x24fd8b);const _0x5cccc2=new a0_0x4c3ad7[(_0x4b6735(0x205))]();clipperOffset[_0x4b6735(0x324)](_0x5cccc2,_0x478219(_0x1a3dc5*scale));const _0x491db7=extractCirclesArrFrom(_0x5cccc2);return _0x491db7;}static['expandSlicePaths'](_0x324d19,_0x4bd2d2){const _0xfb8da=a0_0x19d63f;clipperOffset[_0xfb8da(0x2c2)]();const _0x53874e=Math[_0xfb8da(0x25f)];_0x324d19[_0xfb8da(0x156)]((_0x472bc4,_0x2819fb)=>{const _0x4e10e0=_0xfb8da,_0x54238e=_0x4bd2d2[_0x2819fb],_0x228f14=!!_0x54238e[0x0]?a0_0x4c3ad7[_0x4e10e0(0x1ea)][_0x4e10e0(0x2a0)]:a0_0x4c3ad7[_0x4e10e0(0x1ea)][_0x4e10e0(0x1a4)],_0x572afe=[];_0x472bc4[_0x4e10e0(0x156)](_0x19862e=>{const _0x501ba9=_0x4e10e0,_0x1a0cbf=[];_0x19862e[_0x501ba9(0x156)](_0x33036=>{const _0x4863f8=_0x501ba9;_0x1a0cbf[_0x4863f8(0x32e)]({'X':_0x53874e(_0x33036['x']*scale),'Y':_0x53874e(_0x33036['y']*scale)});}),_0x572afe[_0x501ba9(0x32e)](_0x1a0cbf);}),clipperOffset['AddPaths'](_0x572afe,a0_0x4c3ad7[_0x4e10e0(0x35a)]['jtRound'],_0x228f14);});const _0x474bdb=new a0_0x4c3ad7[(_0xfb8da(0x2d3))]();return clipperOffset[_0xfb8da(0x324)](_0x474bdb,0x1),_0x474bdb;}static[a0_0x19d63f(0x25b)](_0x48befc,_0x22e42c){const _0xb424dd=a0_0x19d63f;clipper[_0xb424dd(0x2c2)]();const _0x38011b=circlesToClipPaths(_0x48befc,scale);for(let _0x59d854=0x0;_0x59d854<_0x38011b[_0xb424dd(0x180)];_0x59d854++){clipper[_0xb424dd(0x2d0)](_0x38011b[_0x59d854],a0_0x4c3ad7[_0xb424dd(0x3af)][_0xb424dd(0x3d3)],!![]);}for(let _0x549235=0x0;_0x549235<_0x22e42c[_0xb424dd(0x180)];_0x549235++){clipper['AddPath'](_0x22e42c[_0x549235],a0_0x4c3ad7[_0xb424dd(0x3af)][_0xb424dd(0x1c0)],!![]);}const _0x134f30=new a0_0x4c3ad7[(_0xb424dd(0x205))](),_0x111e15=a0_0x4c3ad7[_0xb424dd(0x3bc)]['pftNonZero'];clipper[_0xb424dd(0x324)](a0_0x4c3ad7[_0xb424dd(0x398)]['ctDifference'],_0x134f30,_0x111e15,_0x111e15);const _0x477be0=extractCirclesArrFrom(_0x134f30),_0x560e78=_0x477be0[_0xb424dd(0x24a)](_0x5932ef=>circlesToVerts(_0x5932ef));return _0x560e78;}static['pointInPolygon'](_0x38a20d,_0x24ccf4){const _0x3987ae=a0_0x19d63f,_0x2127b4={'X':_0x38a20d['x'],'Y':_0x38a20d['y']},_0xd1822e=_0x24ccf4[_0x3987ae(0x24a)](_0x3720ee=>{const _0x524444=_0x3987ae;return _0x3720ee[_0x524444(0x24a)](_0x1527a7=>{return{'X':_0x1527a7['x'],'Y':_0x1527a7['y']};});});for(let _0x533f31=0x0;_0x533f31<_0xd1822e[_0x3987ae(0x180)];_0x533f31++){const _0x5a568a=a0_0x4c3ad7[_0x3987ae(0x152)][_0x3987ae(0x1b0)](_0x2127b4,_0xd1822e[_0x533f31]),_0x22a2fb=_0x5a568a===0x1,_0x5d477f=_0x5a568a===0x0,_0x33904e=_0x5a568a===-0x1;if(_0x533f31===0x0&&(_0x5d477f||_0x33904e))return![];if(_0x533f31>0x0&&_0x22a2fb)return![];}return!![];}static[a0_0x19d63f(0x333)](_0x4ee2eb,_0x205567){const _0x21c505=a0_0x19d63f,_0x27726c=_0x4ee2eb['map'](_0x44b31b=>{return{'X':_0x44b31b['x'],'Y':_0x44b31b['y']};}),_0x471963=_0x205567[_0x21c505(0x24a)](_0x50d0c4=>{return{'X':_0x50d0c4['x'],'Y':_0x50d0c4['y']};});for(let _0x30254f=0x0;_0x30254f<_0x471963[_0x21c505(0x180)];_0x30254f++){const _0x3bda56=a0_0x4c3ad7[_0x21c505(0x152)][_0x21c505(0x1b0)](_0x471963[_0x30254f],_0x27726c),_0x1b9095=_0x3bda56===0x0;if(_0x1b9095)return![];}return!![];}static[a0_0x19d63f(0x176)](_0x164fea,_0x2bfc2d){const _0x282701=a0_0x19d63f,[_0x3f5e8d,_0x991737]=_0x164fea,[_0x1a97e9,_0x4f558f]=_0x2bfc2d;if(_0x3f5e8d[_0x282701(0x180)]!==_0x1a97e9[_0x282701(0x180)]||_0x991737['length']!==_0x4f558f[_0x282701(0x180)])return![];for(let _0x643e0a=0x0;_0x643e0a<_0x3f5e8d[_0x282701(0x180)];_0x643e0a++){const _0x20fbbd=_0x3f5e8d[_0x643e0a],_0x40b0e5=_0x1a97e9[_0x643e0a];if(!equals(_0x20fbbd,_0x40b0e5))return![];}for(let _0x42ebaf=0x0;_0x42ebaf<_0x991737[_0x282701(0x180)];_0x42ebaf++){if(_0x991737[_0x42ebaf]!==_0x4f558f[_0x42ebaf])return![];}return!![];}static['isPolygonAintersectsB'](_0x35e07a,_0x58a053){const _0x3ceaeb=a0_0x19d63f,_0x452db2=circlesToClipPaths(_0x35e07a),_0x55b09d=circlesToClipPaths(_0x58a053);a0_0x4c3ad7['JS'][_0x3ceaeb(0x241)](_0x452db2,scale),a0_0x4c3ad7['JS'][_0x3ceaeb(0x241)](_0x55b09d,scale),clipper[_0x3ceaeb(0x2c2)](),clipper[_0x3ceaeb(0x155)](_0x452db2,a0_0x4c3ad7[_0x3ceaeb(0x3af)][_0x3ceaeb(0x3d3)],!![]),clipper[_0x3ceaeb(0x155)](_0x55b09d,a0_0x4c3ad7[_0x3ceaeb(0x3af)][_0x3ceaeb(0x1c0)],!![]);const _0x281c39=[],_0x5bf31d=a0_0x4c3ad7[_0x3ceaeb(0x3bc)][_0x3ceaeb(0x3b9)];return clipper[_0x3ceaeb(0x324)](a0_0x4c3ad7[_0x3ceaeb(0x398)][_0x3ceaeb(0xe2)],_0x281c39,_0x5bf31d,_0x5bf31d),_0x281c39[_0x3ceaeb(0x180)]&&_0x281c39[0x0]['length']>0x2;}static[a0_0x19d63f(0x32a)](_0x1b3341){const _0x2dd26a=a0_0x19d63f;return boolPolygons(_0x1b3341,a0_0x4c3ad7[_0x2dd26a(0x398)]['ctUnion']);}static[a0_0x19d63f(0x1d9)](_0x5227f6){const _0x50e55f=a0_0x19d63f;return boolPolygons(_0x5227f6,a0_0x4c3ad7[_0x50e55f(0x398)][_0x50e55f(0xe2)]);}static[a0_0x19d63f(0x2b0)](_0x261c1b,_0x5038e0){return boolPolygons(_0x261c1b,_0x5038e0);}static[a0_0x19d63f(0x407)](_0x4c0b00){return boolPolygons(_0x4c0b00,a0_0x4c3ad7['ClipType']['ctDifference']);}static['polygonsXor'](_0x172c2a){const _0x5eaf0d=a0_0x19d63f;return boolPolygons(_0x172c2a,a0_0x4c3ad7[_0x5eaf0d(0x398)][_0x5eaf0d(0x252)]);}}let lineCount=0x1;function setLineCount(_0x337951){lineCount<=_0x337951&&(lineCount=_0x337951+0x1);}new a0_0x412c21['Matrix4'](),new a0_0x412c21[(a0_0x19d63f(0x364))](),new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x0,0x1),new a0_0x412c21[(a0_0x19d63f(0x1c6))](),new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function roundPt(_0x1a73e7){const _0x2f3f60=a0_0x19d63f;return _0x1a73e7['x']=Math[_0x2f3f60(0x25f)](_0x1a73e7['x']*0x3e8)/0x3e8,_0x1a73e7['y']=Math[_0x2f3f60(0x25f)](_0x1a73e7['y']*0x3e8)/0x3e8,_0x1a73e7;}function equalPt(_0x12796e,_0x11972e){const _0x2cc42c=a0_0x19d63f,_0x1a81e4=Math[_0x2cc42c(0x3ca)](_0x12796e['x']-_0x11972e['x']),_0x230952=Math[_0x2cc42c(0x3ca)](_0x12796e['y']-_0x11972e['y']);return _0x1a81e4<0.0015&&_0x230952<0.0015;}class Lines2d{static [a0_0x19d63f(0x265)]={'color':'#1e90ff','opacity':0x1};['id']=0x0;[a0_0x19d63f(0x3ed)]=[];['cssColor']='';[a0_0x19d63f(0x385)]=0x1;[a0_0x19d63f(0x3ce)]=[0x0,0x0,0x0];[a0_0x19d63f(0x1ce)]=0x0;['scale']=[0x1,0x1];['closing']=[0x0];constructor(){const _0x2c3fcd=a0_0x19d63f;this[_0x2c3fcd(0x3b2)]=Lines2d[_0x2c3fcd(0x265)][_0x2c3fcd(0x15e)],this[_0x2c3fcd(0x385)]=Lines2d[_0x2c3fcd(0x265)]['opacity'],this['id']=lineCount++;}['getStartEnd'](){const _0x2ab905=a0_0x19d63f,_0x21c44b=this[_0x2ab905(0x3ed)][0x0],_0x35cc95=roundPt(_0x21c44b[0x0]),_0x4d14f8=roundPt(_0x21c44b[_0x21c44b[_0x2ab905(0x180)]-0x1]);return[_0x35cc95,_0x4d14f8];}[a0_0x19d63f(0xe8)](){const _0x156af2=a0_0x19d63f,_0x1cc100=[];return this[_0x156af2(0x3ed)][_0x156af2(0x156)](_0xb50fac=>{const _0x5741f2=_0x156af2;_0xb50fac[_0x5741f2(0x156)](_0x4f41d7=>{const _0x4a4fc7=_0x5741f2;_0x1cc100[_0x4a4fc7(0x32e)](new a0_0x412c21[(_0x4a4fc7(0x1c6))](_0x4f41d7['x'],_0x4f41d7['y'],0x0));});}),_0x1cc100;}['isClosed'](){const _0x23085f=a0_0x19d63f;return this[_0x23085f(0x237)][0x0]===0x1;}[a0_0x19d63f(0x2bd)](){const _0x251922=a0_0x19d63f;return this[_0x251922(0x237)][0x0]===0x0;}[a0_0x19d63f(0x40c)](_0x1b1cc4=0x1){const _0x56f42f=a0_0x19d63f;this[_0x56f42f(0x237)]['length']=0x0;for(let _0x5929c8=0x0;_0x5929c8<this[_0x56f42f(0x3ed)][_0x56f42f(0x180)];_0x5929c8++){this[_0x56f42f(0x237)]['push'](_0x1b1cc4);}}[a0_0x19d63f(0x16e)](){const _0x22c50e=a0_0x19d63f,_0x16471a=new Lines2d();return _0x16471a[_0x22c50e(0x17d)](this)[_0x22c50e(0x2ad)](this)[_0x22c50e(0x401)](this);}['copyPoints'](_0x13eb8f){const _0x5d640b=a0_0x19d63f,_0x1950d5=[];return _0x13eb8f[_0x5d640b(0x3ed)][_0x5d640b(0x156)](_0x2913e6=>_0x1950d5['push'](_0x2913e6[_0x5d640b(0x3b6)]())),this[_0x5d640b(0x3ed)]=_0x1950d5,this;}[a0_0x19d63f(0x2ad)](_0x5f44d0){const _0x1347e6=a0_0x19d63f;return this[_0x1347e6(0x1ce)]=_0x5f44d0['rotZ'],this['scale']=_0x5f44d0[_0x1347e6(0x154)]['slice'](),this['position']=_0x5f44d0[_0x1347e6(0x3ce)]['slice'](),this;}[a0_0x19d63f(0x401)](_0x588d2b){const _0x1c69a3=a0_0x19d63f;return this[_0x1c69a3(0x385)]=_0x588d2b[_0x1c69a3(0x385)],this['cssColor']=_0x588d2b[_0x1c69a3(0x3b2)],_0x588d2b['closing']&&(this[_0x1c69a3(0x237)]=_0x588d2b[_0x1c69a3(0x237)][_0x1c69a3(0x3b6)]()),this;}[a0_0x19d63f(0x19a)](){const _0x1590cc=a0_0x19d63f,_0x7c2d21={'color':this[_0x1590cc(0x3b2)],'rotZ':this[_0x1590cc(0x1ce)],'opacity':this['opacity']};_0x7c2d21['id']=this['id'],_0x7c2d21[_0x1590cc(0x3ce)]=this[_0x1590cc(0x3ce)][_0x1590cc(0x24a)](_0x477e4e=>parseFloat(_0x477e4e[_0x1590cc(0x2ea)](0x3))),_0x7c2d21[_0x1590cc(0x154)]=this[_0x1590cc(0x154)][_0x1590cc(0x24a)](_0x60f63=>parseFloat(_0x60f63[_0x1590cc(0x2ea)](0x3))),_0x7c2d21[_0x1590cc(0x237)]=this[_0x1590cc(0x237)];const _0x5867b1=[];return this[_0x1590cc(0x3ed)][_0x1590cc(0x156)](_0x400cdb=>{const _0x44a54c=_0x1590cc,_0xc1b92e=[];_0x400cdb[_0x44a54c(0x156)](_0x546a0e=>{const _0x2542e8=_0x44a54c;_0xc1b92e[_0x2542e8(0x32e)](parseFloat(_0x546a0e['x'][_0x2542e8(0x2ea)](0x3))),_0xc1b92e[_0x2542e8(0x32e)](parseFloat(_0x546a0e['y'][_0x2542e8(0x2ea)](0x3)));}),_0x5867b1[_0x44a54c(0x32e)](_0xc1b92e);}),_0x7c2d21[_0x1590cc(0x3ed)]=_0x5867b1,_0x7c2d21;}[a0_0x19d63f(0x366)](_0x57f2cc){const _0xba3ba1=a0_0x19d63f;this['id']=_0x57f2cc['id']||0x0,setLineCount(this['id']),this[_0xba3ba1(0x3b2)]=_0x57f2cc[_0xba3ba1(0x15e)],this['position']=_0x57f2cc['position'],this['rotZ']=_0x57f2cc[_0xba3ba1(0x1ce)],this['scale']=_0x57f2cc[_0xba3ba1(0x154)],this[_0xba3ba1(0x385)]=_0x57f2cc[_0xba3ba1(0x385)],this[_0xba3ba1(0x237)]=_0x57f2cc['closing']||[0x1],this['points'][_0xba3ba1(0x180)]=0x0;for(let _0x3d16aa=0x0;_0x3d16aa<_0x57f2cc[_0xba3ba1(0x3ed)][_0xba3ba1(0x180)];_0x3d16aa++){const _0x43f246=_0x57f2cc[_0xba3ba1(0x3ed)][_0x3d16aa],_0x31a7f1=[];for(let _0x495abd=0x0;_0x495abd<_0x43f246[_0xba3ba1(0x180)];_0x495abd+=0x2){const _0x42968d={'x':_0x43f246[_0x495abd],'y':_0x43f246[_0x495abd+0x1]};_0x31a7f1['push'](_0x42968d);}this[_0xba3ba1(0x3ed)][_0xba3ba1(0x32e)](_0x31a7f1);}return this;}}class UndoEnum{['addItems']='addItems';[a0_0x19d63f(0x1b9)]=a0_0x19d63f(0x1b9);['transformItems']=a0_0x19d63f(0x1ca);[a0_0x19d63f(0x3d9)]=a0_0x19d63f(0x3d9);['replaceItem']=a0_0x19d63f(0x397);[a0_0x19d63f(0x26d)]=a0_0x19d63f(0x26d);[a0_0x19d63f(0x26f)]=a0_0x19d63f(0x26f);[a0_0x19d63f(0x2e5)]=a0_0x19d63f(0x2e5);[a0_0x19d63f(0x379)]=a0_0x19d63f(0x379);['replaceAreasUndo']=a0_0x19d63f(0x35e);['shapeArea']='shapeArea';[a0_0x19d63f(0x36c)]='shapeAreaUndo';[a0_0x19d63f(0x335)]=a0_0x19d63f(0x335);[a0_0x19d63f(0x223)]=a0_0x19d63f(0x223);[a0_0x19d63f(0x230)]=a0_0x19d63f(0x230);['redoCopy']=a0_0x19d63f(0x1ff);[a0_0x19d63f(0x1fe)]=[];constructor(){const _0x426da9=a0_0x19d63f;for(const _0x50e06b in this){typeof this[_0x50e06b]===_0x426da9(0x376)&&this[_0x426da9(0x1fe)]['push'](this[_0x50e06b]);}}}const UndoType=new UndoEnum(),dv$1=WorldConfig[a0_0x19d63f(0x39f)]*WorldConfig[a0_0x19d63f(0x39f)],de$1=WorldConfig[a0_0x19d63f(0x2e7)]*WorldConfig['adhereEdgeDistance'],editVertStart$1=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),pointOnPlane$1=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x0,0x0,0x0);const downPos$5=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),spCircle$1=new a0_0x412c21['TextureLoader']()[a0_0x19d63f(0x310)](assets3dBaseUrl+'texture/circle.png'),pSelectMat$1=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0x10,'sizeAttenuation':![],'map':spCircle$1,'alphaTest':0.5,'color':'#000','depthTest':![],'depthWrite':![],'transparent':!![]});new a0_0x412c21[(a0_0x19d63f(0x1f6))]();const pHoverMat$1=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0xc,'sizeAttenuation':![],'map':spCircle$1,'color':a0_0x19d63f(0x1e5),'alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]}),spCross$1=new a0_0x412c21[(a0_0x19d63f(0x3d8))]()[a0_0x19d63f(0x310)](assets3dBaseUrl+a0_0x19d63f(0x375)),pCrossMat$1=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0x18,'sizeAttenuation':![],'map':spCross$1,'color':a0_0x19d63f(0x195),'alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]}),spDisc$1=new a0_0x412c21[(a0_0x19d63f(0x3d8))]()[a0_0x19d63f(0x310)](assets3dBaseUrl+a0_0x19d63f(0x314)),pointsMaterial=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0xc,'sizeAttenuation':![],'color':'#fff','map':spDisc$1,'alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]}),pointGeo$1=new a0_0x412c21[(a0_0x19d63f(0x27a))]();pointGeo$1[a0_0x19d63f(0x248)]('position',new a0_0x412c21['BufferAttribute'](new Float32Array([0x0,0x0,0x0]),0x3));const hoverEdgePointer$1=new a0_0x412c21[(a0_0x19d63f(0x1dc))](pointGeo$1,pHoverMat$1),hoverVertexPointer$1=new a0_0x412c21[(a0_0x19d63f(0x1dc))](pointGeo$1,pSelectMat$1);hoverEdgePointer$1[a0_0x19d63f(0x336)]=WorldConfig['order_vert_edit'],hoverVertexPointer$1[a0_0x19d63f(0x336)]=WorldConfig[a0_0x19d63f(0x1c1)];const crossSetGeo$1=new a0_0x412c21['BufferGeometry']();crossSetGeo$1['setAttribute'](a0_0x19d63f(0x3ce),new a0_0x412c21[(a0_0x19d63f(0x3b1))](new Float32Array(new Array(0x1b)[a0_0x19d63f(0x128)](0x0)),0x3));const crossSetPointer$1=new a0_0x412c21[(a0_0x19d63f(0x1dc))](crossSetGeo$1,pCrossMat$1);crossSetPointer$1['renderOrder']=WorldConfig[a0_0x19d63f(0x174)];let AdhereItem$1=class AdhereItem{[a0_0x19d63f(0x1d3)]=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();['posOnEdge']=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();['index']=-0x1;[a0_0x19d63f(0x37d)]=![];[a0_0x19d63f(0x2b3)]=![];};const adhereItem$1=new AdhereItem$1();let leftMousePressing$1=![];class ModifyVertexPlugin extends PluginBase{[a0_0x19d63f(0x3be)]=[];['_lines']=[];['_areaMesh'];[a0_0x19d63f(0x22d)];[a0_0x19d63f(0x39a)];[a0_0x19d63f(0x2f6)];constructor(_0x1ec2f7){const _0x5d1b08=a0_0x19d63f;super(),this[_0x5d1b08(0x2f6)]=_0x1ec2f7;}[a0_0x19d63f(0x33e)](){const _0x296df2=a0_0x19d63f;this[_0x296df2(0x21a)][_0x296df2(0x180)]=0x0;const _0x386281=this[_0x296df2(0x30e)]['vo'][_0x296df2(0x28c)](),_0x557715=this[_0x296df2(0x3be)];for(let _0x504dbd=0x0;_0x504dbd<_0x386281[_0x296df2(0x180)];_0x504dbd+=0x2){const _0x15627b=_0x557715[_0x386281[_0x504dbd]],_0xc1cc90=_0x557715[_0x386281[_0x504dbd+0x1]],_0xb0f9a6=new a0_0x412c21[(_0x296df2(0x123))](_0x15627b,_0xc1cc90);this[_0x296df2(0x21a)][_0x296df2(0x32e)](_0xb0f9a6);}}[a0_0x19d63f(0x258)](){const _0x13bb7e=a0_0x19d63f;if(!this[_0x13bb7e(0x30e)])return;this[_0x13bb7e(0x30e)][_0x13bb7e(0x150)](),hoverVertexPointer$1[_0x13bb7e(0x11a)](),hoverEdgePointer$1[_0x13bb7e(0x11a)](),adhereItem$1[_0x13bb7e(0x37d)]=![],adhereItem$1[_0x13bb7e(0x2b3)]=![],this[_0x13bb7e(0x39a)]['removeFromParent'](),this[_0x13bb7e(0x3be)]['length']=0x0,this[_0x13bb7e(0x21a)]['length']=0x0,this['_areaMesh']=null,this[_0x13bb7e(0x22d)]=null;}['selectArea'](_0x552ba8){const _0x4b9e0d=a0_0x19d63f;if(this[_0x4b9e0d(0x30e)]===_0x552ba8)return;_0x552ba8[_0x4b9e0d(0x277)](),this['_areaMesh']=_0x552ba8;const _0x46aab6=_0x552ba8[_0x4b9e0d(0x163)];this[_0x4b9e0d(0x39a)]=new a0_0x412c21[(_0x4b9e0d(0x1dc))](_0x46aab6,pointsMaterial),this[_0x4b9e0d(0x39a)][_0x4b9e0d(0x336)]=WorldConfig[_0x4b9e0d(0x32b)],this[_0x4b9e0d(0x2f6)][_0x4b9e0d(0x1d8)]['add'](this[_0x4b9e0d(0x39a)]),this[_0x4b9e0d(0x3be)]=bufferAttributeToVectors(_0x46aab6[_0x4b9e0d(0x2f3)](_0x4b9e0d(0x3ce))),this['_updateLines']();}[a0_0x19d63f(0x115)](){const _0x165fa8=a0_0x19d63f,_0x15ebe7=this[_0x165fa8(0x2f6)][_0x165fa8(0x25d)],_0x5d6792=this[_0x165fa8(0x30e)];if(!_0x5d6792)return;let _0x394d3a;if(this[_0x165fa8(0x22d)]['onEdge'])_0x394d3a=this['_newMeshByVertAdd'](adhereItem$1[_0x165fa8(0x287)],adhereItem$1[_0x165fa8(0x296)]);else this['_currentAdhere'][_0x165fa8(0x37d)]&&KeyboardState[_0x165fa8(0xe0)]&&(_0x394d3a=this[_0x165fa8(0x188)](adhereItem$1[_0x165fa8(0x287)]));if(!_0x394d3a)return;replaceArrayItem(_0x15ebe7[_0x165fa8(0x394)],_0x394d3a,_0x5d6792),this[_0x165fa8(0x2f6)][_0x165fa8(0x1d8)]['add'](_0x394d3a),_0x5d6792['removeFromParent'](),this[_0x165fa8(0x258)](),_0x394d3a[_0x165fa8(0x10c)](),this['selectArea'](_0x394d3a);const _0x2060ab=_0x394d3a,_0x20b3bb=_0x5d6792,_0x21071d=_0x15ebe7[_0x165fa8(0x394)];this[_0x165fa8(0x2f6)][_0x165fa8(0x33f)][_0x165fa8(0x346)](UndoType['replaceItem'],{'addedItem':_0x2060ab,'removedItem':_0x20b3bb,'arr':_0x21071d});}[a0_0x19d63f(0x29d)](_0xa06108,_0x334102){const _0x559261=a0_0x19d63f,_0x2ddb96=this[_0x559261(0x30e)],_0x5d39d0=[];this[_0x559261(0x21a)][_0x559261(0x156)]((_0x5846b3,_0x3f53ed)=>{const _0x44491f=_0x559261;_0x5d39d0[_0x44491f(0x32e)](_0x5846b3[_0x44491f(0x3a1)]),_0x3f53ed===_0xa06108&&_0x5d39d0['push'](_0x334102['clone']());});const _0x4851dd=_0x2ddb96['vo'][_0x559261(0x298)](![]);_0x4851dd[_0x559261(0x27c)](_0xa06108),_0x4851dd[_0x559261(0x275)]=[_0x5d39d0,_0x4851dd['verts'][0x1]];const _0x2d983e=new Area2dMesh(_0x4851dd);return _0x2d983e[_0x559261(0x29c)](),_0x2d983e;}['_newMeshByVertRemove'](_0x574348){const _0x1f1c2d=a0_0x19d63f;if(this[_0x1f1c2d(0x3be)]['length']<0x4)return null;const _0x4f8ac2=this[_0x1f1c2d(0x30e)],_0x4b2db6=_0x4f8ac2['vo']['cloneArea'](![]);_0x4b2db6[_0x1f1c2d(0xf5)](_0x574348);if(!_0x4b2db6[_0x1f1c2d(0x275)])return null;const _0x5a082b=new Area2dMesh(_0x4b2db6);return _0x5a082b[_0x1f1c2d(0x29c)](),_0x5a082b;}[a0_0x19d63f(0x1a0)](_0x2ed9f7){const _0x26e99=a0_0x19d63f;if(_0x2ed9f7[_0x26e99(0x193)]===MouseButton[_0x26e99(0x201)])return;leftMousePressing$1=!![];const _0xe02be4=this['scene3d'][_0x26e99(0x25d)],_0x3ff266=this[_0x26e99(0x2f6)]['mouseRaycaster'];if(!_0xe02be4[_0x26e99(0x231)]||!this[_0x26e99(0x30e)])return;_0x3ff266['ray'][_0x26e99(0x288)](planeXY,downPos$5);const _0x1e31c8=_0x3ff266[_0x26e99(0x1d1)](_0xe02be4[_0x26e99(0x394)],![]);if(_0x1e31c8[_0x26e99(0x180)]){const _0x1eb2ea=_0x1e31c8[0x0][_0x26e99(0x3ec)];if(_0x1eb2ea===this['_areaMesh'])return;else this[_0x26e99(0x258)](),_0x1eb2ea[_0x26e99(0x10c)](),this[_0x26e99(0x229)](_0x1eb2ea);}else!this[_0x26e99(0x22d)]&&this[_0x26e99(0x258)]();}['pointerMove'](_0x1f5188){const _0x4de1b6=a0_0x19d63f;if(_0x1f5188[_0x4de1b6(0x193)]===MouseButton['right'])return;const _0x141602=this[_0x4de1b6(0x2f6)][_0x4de1b6(0x25d)],_0x50b511=this['scene3d'][_0x4de1b6(0x1d8)],_0x59c42a=this[_0x4de1b6(0x30e)];if(!_0x141602[_0x4de1b6(0x231)]||!_0x59c42a)return;const _0x4c9fc1=this[_0x4de1b6(0x2f6)]['mouseRaycaster'][_0x4de1b6(0x106)][_0x4de1b6(0x288)](planeXY,pointOnPlane$1);if(!_0x4c9fc1)return;const _0x49f4ea=this['_currentAdhere'];if(_0x49f4ea&&_0x49f4ea[_0x4de1b6(0x1d3)]&&leftMousePressing$1&&!_0x49f4ea[_0x4de1b6(0x2b3)]){const _0x3647fa=pointOnPlane$1[_0x4de1b6(0x2a8)]()['sub'](editVertStart$1);_0x3647fa[_0x4de1b6(0x37e)](_0x49f4ea['ctrlPoint']),updatePosAttr(_0x59c42a[_0x4de1b6(0x163)],_0x49f4ea['index'],_0x3647fa),updatePosAttr(this[_0x4de1b6(0x39a)][_0x4de1b6(0x163)],_0x49f4ea[_0x4de1b6(0x287)],_0x3647fa),hoverVertexPointer$1[_0x4de1b6(0x3ce)][_0x4de1b6(0x357)](_0x3647fa),this[_0x4de1b6(0x3be)][_0x49f4ea[_0x4de1b6(0x287)]][_0x4de1b6(0x357)](_0x3647fa),_0x59c42a[_0x4de1b6(0x249)]();}else{hoverVertexPointer$1[_0x4de1b6(0x11a)](),hoverEdgePointer$1[_0x4de1b6(0x11a)](),crossSetPointer$1[_0x4de1b6(0x11a)](),adhereItem$1['onPoint']=![],adhereItem$1[_0x4de1b6(0x2b3)]=![];for(let _0x44ea35=0x0;_0x44ea35<this[_0x4de1b6(0x3be)][_0x4de1b6(0x180)];_0x44ea35++){const _0x15a2b0=this[_0x4de1b6(0x3be)][_0x44ea35],_0x55f622=_0x15a2b0['distanceToSquared'](pointOnPlane$1);if(_0x55f622<=dv$1){adhereItem$1[_0x4de1b6(0x1d3)][_0x4de1b6(0x357)](_0x15a2b0),adhereItem$1[_0x4de1b6(0x287)]=_0x44ea35,this[_0x4de1b6(0x22d)]=adhereItem$1,_0x50b511[_0x4de1b6(0x37e)](hoverVertexPointer$1),hoverVertexPointer$1[_0x4de1b6(0x3ce)][_0x4de1b6(0x357)](adhereItem$1[_0x4de1b6(0x1d3)]),adhereItem$1[_0x4de1b6(0x37d)]=!![],editVertStart$1[_0x4de1b6(0x357)](pointOnPlane$1);KeyboardState['keyDownAlt']&&(_0x50b511[_0x4de1b6(0x37e)](crossSetPointer$1),crossSetPointer$1[_0x4de1b6(0x3ce)][_0x4de1b6(0x357)](adhereItem$1[_0x4de1b6(0x1d3)]));return;}}for(let _0x123068=0x0;_0x123068<this['_lines'][_0x4de1b6(0x180)];_0x123068++){const _0x4ea075=this[_0x4de1b6(0x21a)][_0x123068],_0x4231e5=_0x4ea075['closestPointToPointParameter'](pointOnPlane$1,![]);if(_0x4231e5>0x1||_0x4231e5<0x0)continue;const _0x8159ed=_0x4ea075[_0x4de1b6(0x136)](pointOnPlane$1,![],adhereItem$1[_0x4de1b6(0x296)]),_0xe3b47f=_0x8159ed[_0x4de1b6(0x186)](pointOnPlane$1);if(_0xe3b47f<=de$1){adhereItem$1[_0x4de1b6(0x296)]=_0x8159ed,adhereItem$1[_0x4de1b6(0x287)]=_0x123068,this[_0x4de1b6(0x22d)]=adhereItem$1,this['scene3d']['scene'][_0x4de1b6(0x37e)](hoverEdgePointer$1),hoverEdgePointer$1[_0x4de1b6(0x3ce)][_0x4de1b6(0x357)](adhereItem$1[_0x4de1b6(0x296)]),adhereItem$1[_0x4de1b6(0x2b3)]=!![];return;}}this[_0x4de1b6(0x22d)]=null,leftMousePressing$1&&(this[_0x4de1b6(0x30e)][_0x4de1b6(0x3ce)][_0x4de1b6(0x357)](_0x4c9fc1)[_0x4de1b6(0x343)](downPos$5),this['_areaMesh']['markAsLocal'](),this[_0x4de1b6(0x39a)]['position'][_0x4de1b6(0x357)](this['_areaMesh'][_0x4de1b6(0x3ce)]));}}[a0_0x19d63f(0x1ef)](_0x3d10ca){const _0x458839=a0_0x19d63f;leftMousePressing$1=![];if(_0x3d10ca[_0x458839(0x193)]===MouseButton[_0x458839(0x201)])return;const _0x4b0ff2=this['scene3d'][_0x458839(0x25d)];if(!_0x4b0ff2[_0x458839(0x231)])return;if(this[_0x458839(0x30e)]){this['_areaMesh']['resetTransform'](),this[_0x458839(0x39a)][_0x458839(0x3ce)][_0x458839(0x3b0)](0x0,0x0,0x0);if(this['_currentAdhere']){const _0x5ca69d=this[_0x458839(0x22d)]['ctrlPoint'][_0x458839(0x2a8)](),_0x49feb1=this['_currentAdhere'][_0x458839(0x287)],_0x3ece77=this['_vectors'][_0x49feb1][_0x458839(0x2a8)](),_0x4acf80=this['_areaMesh'][_0x458839(0x163)],_0x4437d7=this[_0x458839(0x39a)][_0x458839(0x163)];this[_0x458839(0x2f6)][_0x458839(0x33f)][_0x458839(0x346)](UndoType[_0x458839(0x24b)],{'oldPos':_0x5ca69d,'newPos':_0x3ece77,'geometry1':_0x4acf80,'geometry2':_0x4437d7,'index':_0x49feb1});}}}[a0_0x19d63f(0x2f4)](_0x49071e){const _0x317f3d=a0_0x19d63f;leftMousePressing$1=![];const _0x245057=this[_0x317f3d(0x2f6)],_0x57d0ef=this[_0x317f3d(0x2f6)]['store'];if(_0x49071e['button']===MouseButton[_0x317f3d(0x201)]){_0x57d0ef[_0x317f3d(0x231)]&&(this[_0x317f3d(0x258)](),_0x57d0ef[_0x317f3d(0x1aa)]());return;}if(!_0x57d0ef[_0x317f3d(0x231)])return;if(this[_0x317f3d(0x30e)]&&this[_0x317f3d(0x22d)])this['replaceSelectArea']();else{this[_0x317f3d(0x258)]();const _0x208a61=_0x245057['mouseRaycaster'],_0x521372=_0x208a61[_0x317f3d(0x1d1)](_0x57d0ef[_0x317f3d(0x394)],![]);if(!_0x521372['length'])return;const _0x3b263f=_0x521372[0x0][_0x317f3d(0x3ec)];_0x3b263f[_0x317f3d(0x10c)](),this[_0x317f3d(0x229)](_0x3b263f);}}}const mat$2=new a0_0x412c21[(a0_0x19d63f(0x1f6))](),line3$1=new a0_0x412c21['Line3'](),v1$2=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),v2$1=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),vStart=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),vEnd=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function closedLines2dEntitiesToArea2ds(_0x3800b9){const _0x3fe10e=a0_0x19d63f,_0x5eb911=[],_0x393e3b=[],_0x6a17dc=[],_0x44c94=[];_0x3800b9[_0x3fe10e(0x156)](_0x5e188b=>{const _0x368b34=_0x3fe10e,_0x1f9bfd=_0x5e188b['vo']['points'][0x0][_0x368b34(0x24a)](_0x21624c=>new a0_0x412c21[(_0x368b34(0x1c6))](_0x21624c['x'],_0x21624c['y'],0x0)),_0x57f005=circlesToVerts(_0x5e188b['vo'][_0x368b34(0x3ed)]);a0_0x412c21[_0x368b34(0x3d0)][_0x368b34(0x38a)](_0x1f9bfd)?(_0x5eb911[_0x368b34(0x32e)](_0x57f005),_0x44c94[_0x368b34(0x32e)](_0x5e188b['vo'])):(_0x393e3b[_0x368b34(0x32e)](_0x57f005),_0x6a17dc[_0x368b34(0x32e)](_0x5e188b['vo']));});const _0x1b2d90=[],_0x4fce4d=[];_0x393e3b[_0x3fe10e(0x156)]((_0x58e3b9,_0x4bfe1a)=>{const _0x44e81e=_0x3fe10e,_0x55a371=_0x6a17dc[_0x4bfe1a];if(_0x5eb911[_0x44e81e(0x180)]){const _0x2a738c=[_0x58e3b9][_0x44e81e(0x2c7)](_0x5eb911),_0x575e76=ClipperTool['polygonsSub'](_0x2a738c);_0x575e76[_0x44e81e(0x156)](_0x7dd585=>{const _0x153785=_0x44e81e,_0x513f39=new Area2d()[_0x153785(0x260)](_0x55a371,![]);_0x513f39['verts']=_0x7dd585,_0x1b2d90[_0x153785(0x32e)](_0x513f39),_0x4fce4d[_0x153785(0x32e)](_0x513f39[_0x153785(0x3ae)]());});}else{const _0x53ca99=new Area2d()[_0x44e81e(0x260)](_0x55a371,![]);_0x53ca99[_0x44e81e(0x275)]=_0x58e3b9,_0x1b2d90[_0x44e81e(0x32e)](_0x53ca99);}}),_0x5eb911[_0x3fe10e(0x156)]((_0x1b1bcc,_0x590e74)=>{const _0x3c7cae=_0x3fe10e,_0x2e39d5=_0x4fce4d['find'](_0x2987c6=>ClipperTool[_0x3c7cae(0x333)](_0x2987c6,_0x1b1bcc[0x0]));if(_0x2e39d5)return;const _0x14df7b=_0x44c94[_0x590e74],_0x22dbab=new Area2d()[_0x3c7cae(0x260)](_0x14df7b,![]);_0x22dbab[_0x3c7cae(0x275)]=_0x1b1bcc,_0x1b2d90[_0x3c7cae(0x32e)](_0x22dbab);});const _0x56d692=[];return _0x1b2d90[_0x3fe10e(0x156)](_0x175593=>{const _0x3b443d=_0x3fe10e,_0x4e365a=new Area2dMesh(_0x175593);_0x4e365a['markAsWorld'](),_0x56d692[_0x3b443d(0x32e)](_0x4e365a);}),_0x56d692;}class Lines2dEntity extends a0_0x412c21[a0_0x19d63f(0x2e6)]{['vo'];[a0_0x19d63f(0x282)]=[];['circlesArr']=[];[a0_0x19d63f(0xef)];['_particles'];[a0_0x19d63f(0x30b)]=![];constructor(_0x3a6057){const _0x54d676=a0_0x19d63f;super(),this['vo']=_0x3a6057;const _0x4fc674=createContourLine(this['vo'][_0x54d676(0x3ed)],0x0,this['vo'][_0x54d676(0x3b2)],![],_0x3a6057[_0x54d676(0x237)]);_0x4fc674[_0x54d676(0x336)]=WorldConfig[_0x54d676(0x374)],this[_0x54d676(0x37e)](_0x4fc674),this['lineSegments']=_0x4fc674;const _0x1609d3=new a0_0x412c21[(_0x54d676(0x27a))]()[_0x54d676(0x2ef)](_0x3a6057['flatToVectors']()),_0x1d00fa=new a0_0x412c21[(_0x54d676(0x1dc))](_0x1609d3,pointsMaterial[_0x54d676(0x2a8)]());this[_0x54d676(0x37e)](_0x1d00fa),this[_0x54d676(0x148)]=_0x1d00fa,_0x1d00fa['renderOrder']=WorldConfig[_0x54d676(0x32b)],_0x1d00fa[_0x54d676(0x410)]=![],this[_0x54d676(0x3e3)]();}[a0_0x19d63f(0x22e)](_0x917e1d){const _0x528f70=a0_0x19d63f,_0x40c72f=createContourLine(this['vo'][_0x528f70(0x3ed)],0x0,this['vo'][_0x528f70(0x3b2)],!![],this['vo'][_0x528f70(0x237)]);return _0x40c72f[_0x528f70(0x32c)]=this,this['pasting']=_0x40c72f,_0x917e1d?(_0x40c72f['position']['copy'](this[_0x528f70(0x3ce)]),_0x40c72f[_0x528f70(0x225)][_0x528f70(0x357)](this['quaternion']),_0x40c72f[_0x528f70(0x154)][_0x528f70(0x357)](this[_0x528f70(0x154)])):this['matrixWorld']['decompose'](_0x40c72f[_0x528f70(0x3ce)],_0x40c72f[_0x528f70(0x225)],_0x40c72f['scale']),_0x40c72f[_0x528f70(0x336)]=WorldConfig[_0x528f70(0x2ff)],_0x40c72f;}[a0_0x19d63f(0x360)](_0x51e130){const _0x593fc1=a0_0x19d63f;if(!this['pasting'])return null;const _0x373324=this[_0x593fc1(0x2df)],_0x3d58be=_0x373324['host']['vo']['cloneLine']();!_0x51e130&&_0x373324[_0x593fc1(0x3ce)][_0x593fc1(0x2b8)](_0x3d58be[_0x593fc1(0x3ce)]);const _0x2ea25f=new Lines2dEntity(_0x3d58be);return _0x2ea25f;}[a0_0x19d63f(0x341)](_0x114fa0){this['_particles']['visible']=_0x114fa0;}[a0_0x19d63f(0x107)](_0x50cc7c){const _0x5d1b62=a0_0x19d63f,_0x48b914=_0x50cc7c?0x1:0x0;if(this['vo'][_0x5d1b62(0x237)][0x0]===_0x48b914)return;this['vo']['setAllClose'](_0x48b914);const _0x11618f=createContourLine(this['vo']['points'],0x0,this['vo'][_0x5d1b62(0x3b2)],![],this['vo'][_0x5d1b62(0x237)]);_0x11618f[_0x5d1b62(0x336)]=WorldConfig[_0x5d1b62(0x374)],this['lineSegments']['removeFromParent'](),this['add'](_0x11618f),this[_0x5d1b62(0xef)]=_0x11618f;}['updateShape'](_0x392b78,_0x5ccb7d){const _0x4c269a=a0_0x19d63f;updatePosAttr(this[_0x4c269a(0x148)][_0x4c269a(0x163)],_0x392b78,_0x5ccb7d);const _0x441bd0=this['vo'][_0x4c269a(0x3ed)][0x0][_0x4c269a(0x180)],_0x21a047=!!this['vo']['closing'][0x0],_0x372e93=_0x21a047?_0x392b78>0x0:_0x392b78>0x0&&_0x392b78<_0x441bd0-0x1,_0x53ab4d=this[_0x4c269a(0xef)]['geometry'];_0x372e93?(updatePosAttr(_0x53ab4d,_0x392b78*0x2-0x1,_0x5ccb7d,![]),updatePosAttr(_0x53ab4d,_0x392b78*0x2,_0x5ccb7d)):_0x21a047?(updatePosAttr(_0x53ab4d,0x0,_0x5ccb7d,![]),updatePosAttr(_0x53ab4d,_0x441bd0*0x2-0x1,_0x5ccb7d)):_0x392b78===0x0?updatePosAttr(_0x53ab4d,0x0,_0x5ccb7d):updatePosAttr(_0x53ab4d,_0x392b78*0x2-0x1,_0x5ccb7d);}[a0_0x19d63f(0x3f7)](_0x32c47c){const _0x11e073=a0_0x19d63f,_0x3d1857=!!this['vo'][_0x11e073(0x237)][0x0],_0x49c3be=this['vo'][_0x11e073(0x3ed)][0x0][_0x11e073(0x180)],_0x2da5b0=_0x32c47c+0x1,_0x118d55=this['vo'][_0x11e073(0x3ed)][0x0][_0x11e073(0x3b6)](),_0x397415=_0x118d55[_0x11e073(0x3b6)](0x0,_0x2da5b0),_0x1c8639=_0x118d55['slice'](_0x2da5b0,_0x118d55[_0x11e073(0x180)]);if(_0x3d1857)_0x2da5b0<_0x49c3be&&(this['vo'][_0x11e073(0x3ed)][0x0]=_0x1c8639[_0x11e073(0x2c7)](_0x397415),this[_0x11e073(0x148)]['geometry']['setFromPoints'](this['vo']['flatToVectors']())),this[_0x11e073(0x107)](![]);else{const _0x57c78d=_0x32c47c!==0x0&&_0x32c47c!==_0x49c3be-0x2;if(_0x57c78d){const _0x585cdd=new Lines2d()[_0x11e073(0x401)](this['vo']),_0x508220=new Lines2d()[_0x11e073(0x401)](this['vo']);_0x585cdd[_0x11e073(0x3ed)][0x0]=_0x397415,_0x508220[_0x11e073(0x3ed)][0x0]=_0x1c8639;const _0x23bc70=new Lines2dEntity(_0x585cdd)['markAsWorld'](),_0x545f18=new Lines2dEntity(_0x508220)[_0x11e073(0x29c)]();return[_0x23bc70,_0x545f18];}else _0x32c47c===0x0?this['vo'][_0x11e073(0x3ed)][0x0]['shift']():this['vo'][_0x11e073(0x3ed)][0x0][_0x11e073(0x308)](),this['vo']['closing'][0x0]=0x1,this[_0x11e073(0x107)](![]),this['_particles'][_0x11e073(0x163)][_0x11e073(0x2ef)](this['vo']['flatToVectors']());}return[];}['changeColorOpacity'](_0x4b4123,_0x287cd8){const _0x2d45cf=a0_0x19d63f;this[_0x2d45cf(0xef)]['material'][_0x2d45cf(0x15e)][_0x2d45cf(0x102)](_0x4b4123),this[_0x2d45cf(0x148)][_0x2d45cf(0x133)]['color'][_0x2d45cf(0x102)](_0x4b4123),this['vo'][_0x2d45cf(0x3b2)]=_0x4b4123,this['lineSegments'][_0x2d45cf(0x133)]['opacity']=_0x287cd8,this['vo'][_0x2d45cf(0x385)]=_0x287cd8;}[a0_0x19d63f(0xd5)](){const _0x29ed81=a0_0x19d63f,_0x17f601=bufferAttributeToVectors(this[_0x29ed81(0x148)][_0x29ed81(0x163)][_0x29ed81(0x3aa)][_0x29ed81(0x3ce)]);return _0x17f601[_0x29ed81(0x156)](_0x162cb8=>_0x162cb8[_0x29ed81(0x3b7)](this[_0x29ed81(0x2d7)])),_0x17f601;}[a0_0x19d63f(0x18e)](){const _0xe8d38c=a0_0x19d63f,_0x1be3c2=this[_0xe8d38c(0x148)][_0xe8d38c(0x163)][_0xe8d38c(0x3aa)][_0xe8d38c(0x3ce)];return vStart['fromBufferAttribute'](_0x1be3c2,0x0),vStart;}[a0_0x19d63f(0x25c)](){const _0x55cf1f=a0_0x19d63f,_0x5043cf=this[_0x55cf1f(0x148)][_0x55cf1f(0x163)][_0x55cf1f(0x3aa)][_0x55cf1f(0x3ce)];return vEnd[_0x55cf1f(0x2ed)](_0x5043cf,this['vo'][_0x55cf1f(0x3ed)][0x0][_0x55cf1f(0x180)]-0x1),vEnd;}[a0_0x19d63f(0x277)](){const _0x5ebc0f=a0_0x19d63f;if(this[_0x5ebc0f(0x30b)])return;this[_0x5ebc0f(0x105)](),this['lineSegments'][_0x5ebc0f(0x163)][_0x5ebc0f(0x3b7)](this[_0x5ebc0f(0x2d7)]),this[_0x5ebc0f(0x148)][_0x5ebc0f(0x163)][_0x5ebc0f(0x3b7)](this[_0x5ebc0f(0x2d7)]),this[_0x5ebc0f(0x3ce)][_0x5ebc0f(0x3b0)](0x0,0x0,0x0),this[_0x5ebc0f(0x154)][_0x5ebc0f(0x3b0)](0x1,0x1,0x1),this[_0x5ebc0f(0x1a7)][_0x5ebc0f(0x3b0)](0x0,0x0,0x0),this[_0x5ebc0f(0x105)](),this['vo'][_0x5ebc0f(0x3ed)][0x0]=bufferAttributeToVectors(this[_0x5ebc0f(0x148)]['geometry'][_0x5ebc0f(0x3aa)][_0x5ebc0f(0x3ce)]),this['_inWorldSpace']=!![];}['reCenter'](){const _0x237dca=a0_0x19d63f;if(!this[_0x237dca(0x30b)])return;const _0x50f1b6=this['_particles'][_0x237dca(0x163)];_0x50f1b6[_0x237dca(0x3ad)]();const _0x55d521=new a0_0x412c21['Vector3']();_0x50f1b6[_0x237dca(0x247)][_0x237dca(0x111)](_0x55d521),mat$2[_0x237dca(0x1df)](-_0x55d521['x'],-_0x55d521['y'],-_0x55d521['z']),_0x50f1b6[_0x237dca(0x3b7)](mat$2),this[_0x237dca(0xef)][_0x237dca(0x163)][_0x237dca(0x3b7)](mat$2),this[_0x237dca(0x3ce)][_0x237dca(0x357)](_0x55d521),this['vo'][_0x237dca(0x3ed)][0x0]=bufferAttributeToVectors(_0x50f1b6[_0x237dca(0x3aa)][_0x237dca(0x3ce)]),this[_0x237dca(0x3ce)]['toArray'](this['vo'][_0x237dca(0x3ce)]),this['updateMatrixWorld'](),this[_0x237dca(0x30b)]=![];}[a0_0x19d63f(0x29c)](){const _0x237472=a0_0x19d63f;return this[_0x237472(0x30b)]=!![],this;}['markAsLocal'](){const _0x33b6d3=a0_0x19d63f;return this[_0x33b6d3(0x30b)]=![],this;}[a0_0x19d63f(0x262)](){const _0x2200c6=a0_0x19d63f;return!this[_0x2200c6(0x30b)];}['updateModelData'](_0x438e70,_0x509d8e){const _0x16efe6=this['vo']['points'][0x0];_0x16efe6[_0x438e70]['x']=_0x509d8e['x'],_0x16efe6[_0x438e70]['y']=_0x509d8e['y'];}[a0_0x19d63f(0x272)](_0x3fb84f){const _0x3932ac=a0_0x19d63f;mat$2[_0x3932ac(0x357)](this['matrixWorld'])[_0x3932ac(0x39c)]();const _0x416624=v2$1['copy'](_0x3fb84f)['applyMatrix4'](mat$2),_0x1683af=this['vo']['points'],_0xd79695=ClipperTool['pointInPolygon'](_0x416624,_0x1683af),_0x5d505b=[],_0x4c9737=this['vo']['closing'];_0x1683af[_0x3932ac(0x156)]((_0x4f28f8,_0x32f6e2)=>{const _0x36ed96=_0x3932ac;_0x4f28f8[_0x36ed96(0x156)]((_0x2cbca2,_0x11e6cc)=>{const _0x584658=_0x36ed96;if(_0x11e6cc===_0x4f28f8[_0x584658(0x180)]-0x1&&!_0x4c9737[_0x32f6e2])return;const _0x345c06=_0x4f28f8[(_0x11e6cc+0x1)%_0x4f28f8[_0x584658(0x180)]];line3$1[_0x584658(0x3a1)][_0x584658(0x3b0)](_0x2cbca2['x'],_0x2cbca2['y'],0x0),line3$1['end'][_0x584658(0x3b0)](_0x345c06['x'],_0x345c06['y'],0x0),line3$1[_0x584658(0x136)](_0x416624,!![],v1$2);const _0x50ff92=v1$2[_0x584658(0x3df)](_0x416624);_0x5d505b[_0x584658(0x32e)](_0x50ff92);});});const _0x522ee3=Math['min'](..._0x5d505b);return _0xd79695?-_0x522ee3:_0x522ee3;}['drawOffsetDraft'](_0x516e04){const _0x1d26c3=a0_0x19d63f;this[_0x1d26c3(0x29b)]();const _0xabc4b4=this['vo'][_0x1d26c3(0x3ed)],_0x16cfb7=ClipperTool[_0x1d26c3(0x13a)](_0xabc4b4,_0x516e04,!!this['vo'][_0x1d26c3(0x237)][0x0]);_0x16cfb7['forEach'](_0x4f87f1=>{const _0x2437fa=_0x1d26c3,_0x22bf6f=createContourLine(_0x4f87f1,0x0,this['vo'][_0x2437fa(0x3b2)],!![]);_0x22bf6f[_0x2437fa(0x336)]=WorldConfig[_0x2437fa(0x374)],this[_0x2437fa(0x37e)](_0x22bf6f),this[_0x2437fa(0x282)][_0x2437fa(0x32e)](_0x22bf6f);}),this[_0x1d26c3(0x1c8)]=_0x16cfb7;}[a0_0x19d63f(0x29b)](){const _0x53bd01=a0_0x19d63f;this[_0x53bd01(0x282)][_0x53bd01(0x156)](_0x4005a6=>_0x4005a6[_0x53bd01(0x11a)]()),this[_0x53bd01(0x282)][_0x53bd01(0x180)]=0x0;}['applyDraft'](_0x581556,_0x1c0f30){const _0x37f3cd=a0_0x19d63f;this[_0x37f3cd(0x29b)](),this[_0x37f3cd(0x38c)]();const _0x3b8077=this[_0x37f3cd(0x1c8)];{const _0x141377=[];return _0x3b8077[_0x37f3cd(0x156)](_0x22c7dc=>{const _0x504166=_0x37f3cd;_0x22c7dc[_0x504166(0x156)](_0x36c8af=>{const _0x329509=_0x504166,_0x5b6b87=new Lines2d()[_0x329509(0x2ad)](this['vo'])['copyProperties'](this['vo']);_0x5b6b87[_0x329509(0x3ed)][0x0]=_0x36c8af,_0x5b6b87['setAllClose']();const _0x5c48cd=new Lines2dEntity(_0x5b6b87);_0x581556[_0x329509(0x37e)](_0x5c48cd),_0x1c0f30[_0x329509(0xf2)][_0x329509(0x32e)](_0x5c48cd),_0x141377[_0x329509(0x32e)](_0x141377);});}),_0x141377;}}[a0_0x19d63f(0x3e3)](){const _0xffac80=a0_0x19d63f;this[_0xffac80(0x3ce)][_0xffac80(0x2cf)](this['vo'][_0xffac80(0x3ce)]),this[_0xffac80(0x1a7)]['z']=this['vo']['rotZ'],this[_0xffac80(0x154)][_0xffac80(0x3b0)](this['vo'][_0xffac80(0x154)][0x0],this['vo'][_0xffac80(0x154)][0x1],0x1),this[_0xffac80(0x1ba)](this['vo'][_0xffac80(0x3b2)],this['vo'][_0xffac80(0x385)]);}[a0_0x19d63f(0x38c)](){const _0x4131e7=a0_0x19d63f;this[_0x4131e7(0x3ce)][_0x4131e7(0x2b8)](this['vo'][_0x4131e7(0x3ce)]),this['vo'][_0x4131e7(0x154)][0x0]=this[_0x4131e7(0x154)]['x'],this['vo'][_0x4131e7(0x154)][0x1]=this[_0x4131e7(0x154)]['y'],this['vo'][_0x4131e7(0x1ce)]=this['rotation']['z'];}}function mergeLineEntities(_0x3b3e2e,_0x34f046,_0x545427){const _0xe1b015=a0_0x19d63f,_0x518b6b=_0x3b3e2e[_0xe1b015(0x3b6)]();let _0x5df1f0=_0x518b6b['shift']();while(_0x518b6b[_0xe1b015(0x180)]){const _0x14a49f=mergeLines2dEntityWithOthers(_0x5df1f0,_0x518b6b,_0x34f046);_0x14a49f!==_0x5df1f0&&_0x545427[_0xe1b015(0x32e)](_0x14a49f);arrAsubB(_0x518b6b,_0x34f046);if(_0x518b6b['length']<0x2)return;_0x5df1f0=_0x518b6b[_0xe1b015(0x1e8)]();}}function mergeLines2dEntityWithOthers(_0xb7a7be,_0x10a895,_0x323680){const _0x56a5df=a0_0x19d63f,_0x2b068d=_0x10a895[_0x56a5df(0x209)](_0x5e4071=>_0x5e4071['vo'][_0x56a5df(0x2bd)]()&&!_0x323680[_0x56a5df(0x119)](_0x5e4071));if(_0x2b068d[_0x56a5df(0x180)]<0x1)return _0xb7a7be;const [_0x4a5374,_0x44952c]=_0xb7a7be['vo']['getStartEnd']();let _0x2e54af,_0x36341a,_0x3feb6a,_0x2ce9d8;_0x2b068d['forEach'](_0x366bd2=>{const _0x432032=_0x56a5df;if(_0x366bd2===_0xb7a7be)return;const [_0x45367c,_0x2dbc30]=_0x366bd2['vo'][_0x432032(0x384)]();if(equalPt(_0x4a5374,_0x45367c))_0x3feb6a=!![],_0x2e54af=_0x366bd2;else equalPt(_0x4a5374,_0x2dbc30)&&(_0x2e54af=_0x366bd2);if(equalPt(_0x44952c,_0x45367c))_0x36341a=_0x366bd2;else equalPt(_0x44952c,_0x2dbc30)&&(_0x2ce9d8=!![],_0x36341a=_0x366bd2);});if(!_0x2e54af&&!_0x36341a)return _0xb7a7be;const _0x3bfcd4=_0xb7a7be['vo']['points'][0x0]['slice']();if(_0x2e54af&&_0x36341a){if(_0x2e54af===_0x36341a){const _0x1220a5=_0x36341a['vo']['points'][0x0][_0x56a5df(0x3b6)]();_0x3feb6a&&_0x1220a5['reverse']();_0x1220a5[_0x56a5df(0x308)](),_0x1220a5[_0x56a5df(0x1e8)]();const _0x1e105f=_0x3bfcd4[_0x56a5df(0x2c7)](_0x1220a5),_0x2355a2=new Lines2d()[_0x56a5df(0x401)](_0x36341a['vo']);_0x2355a2[_0x56a5df(0x3ed)][0x0]=_0x1e105f,_0x2355a2[_0x56a5df(0x40c)](0x1);const _0x4e8221=new Lines2dEntity(_0x2355a2)['markAsWorld']();return addArrayItems(_0x323680,_0xb7a7be,_0x36341a),_0x4e8221;}else{const _0x2af6cb=_0x2e54af['vo'][_0x56a5df(0x3ed)][0x0][_0x56a5df(0x3b6)](),_0xfdf1c5=_0x36341a['vo'][_0x56a5df(0x3ed)][0x0][_0x56a5df(0x3b6)]();_0x3feb6a&&_0x2af6cb[_0x56a5df(0x199)]();_0x2af6cb[_0x56a5df(0x308)]();_0x2ce9d8&&_0xfdf1c5['reverse']();_0xfdf1c5[_0x56a5df(0x1e8)]();const _0x45e08c=_0x2af6cb['concat'](_0x3bfcd4)[_0x56a5df(0x2c7)](_0xfdf1c5),_0x2d5431=new Lines2d()[_0x56a5df(0x401)](_0x36341a['vo']);_0x2d5431[_0x56a5df(0x3ed)][0x0]=_0x45e08c;const _0x6a37d=new Lines2dEntity(_0x2d5431)[_0x56a5df(0x29c)]();return addArrayItems(_0x323680,_0xb7a7be,_0x2e54af,_0x36341a),mergeLines2dEntityWithOthers(_0x6a37d,_0x2b068d,_0x323680);}}if(_0x2e54af){const _0x4fef33=_0x2e54af['vo'][_0x56a5df(0x3ed)][0x0][_0x56a5df(0x3b6)]();_0x3feb6a&&_0x4fef33[_0x56a5df(0x199)]();_0x4fef33[_0x56a5df(0x308)]();const _0x6ae0d1=_0x4fef33[_0x56a5df(0x2c7)](_0x3bfcd4),_0x49b336=new Lines2d()[_0x56a5df(0x401)](_0x2e54af['vo']);_0x49b336[_0x56a5df(0x3ed)][0x0]=_0x6ae0d1;const _0x30c957=new Lines2dEntity(_0x49b336)[_0x56a5df(0x29c)]();return addArrayItems(_0x323680,_0xb7a7be,_0x2e54af),mergeLines2dEntityWithOthers(_0x30c957,_0x2b068d,_0x323680);}else{const _0xd007b5=_0x36341a['vo'][_0x56a5df(0x3ed)][0x0][_0x56a5df(0x3b6)]();_0x2ce9d8&&_0xd007b5[_0x56a5df(0x199)]();_0xd007b5[_0x56a5df(0x1e8)]();const _0x5b845a=_0x3bfcd4['concat'](_0xd007b5),_0x536077=new Lines2d()[_0x56a5df(0x401)](_0x36341a['vo']);_0x536077[_0x56a5df(0x3ed)][0x0]=_0x5b845a;const _0x7d6a5=new Lines2dEntity(_0x536077)[_0x56a5df(0x29c)]();return addArrayItems(_0x323680,_0xb7a7be,_0x36341a),mergeLines2dEntityWithOthers(_0x7d6a5,_0x2b068d,_0x323680);}}const mat$1=new a0_0x412c21[(a0_0x19d63f(0x1f6))](),line3=new a0_0x412c21[(a0_0x19d63f(0x123))](),v1$1=new a0_0x412c21['Vector3'](),v2=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function area2dsToClosedLines2ds(_0x4af7b4){const _0x11ae70=a0_0x19d63f,_0x21b28e=[];return _0x4af7b4[_0x11ae70(0x156)](_0x55e6f9=>{const _0x1719d2=_0x11ae70,_0x538b98=_0x55e6f9['vo'],_0xf61cd9=vertsToCircles(_0x538b98['verts']);_0xf61cd9[_0x1719d2(0x156)](_0x14799b=>{const _0x124419=_0x1719d2,_0x5020bb=new Lines2d()['copyProperties'](_0x538b98)[_0x124419(0x2ad)](_0x538b98);_0x5020bb[_0x124419(0x3ed)][0x0]=_0x14799b,_0x5020bb[_0x124419(0x237)][0x0]=0x1;const _0x2e4c3a=new Lines2dEntity(_0x5020bb);_0x21b28e[_0x124419(0x32e)](_0x2e4c3a);});}),_0x21b28e;}class Area2dMesh extends a0_0x412c21[a0_0x19d63f(0x19f)]{['vo'];['selectionMesh'];[a0_0x19d63f(0x182)]=[];['_tmpVectorsLocal']=[];[a0_0x19d63f(0xe9)];[a0_0x19d63f(0x30b)]=![];[a0_0x19d63f(0x177)];[a0_0x19d63f(0x282)]=[];[a0_0x19d63f(0x1c8)]=[];constructor(_0x64c1a9){const _0x18d90b=a0_0x19d63f;super(getPolygonGeometry2d(_0x64c1a9),new a0_0x412c21['MeshBasicMaterial']({'transparent':!![],'side':a0_0x412c21[_0x18d90b(0x168)],'wireframe':![]})),this[_0x18d90b(0x336)]=_0x64c1a9[_0x18d90b(0x2ca)],this['vo']=_0x64c1a9,this[_0x18d90b(0x3e3)](),this[_0x18d90b(0x104)]=new a0_0x412c21[(_0x18d90b(0x19f))](this[_0x18d90b(0x163)],getDotMaterial()),this[_0x18d90b(0x104)]['visible']=![],this[_0x18d90b(0x37e)](this[_0x18d90b(0x104)]),this[_0x18d90b(0x104)]['renderOrder']=_0x64c1a9[_0x18d90b(0x2ca)],this[_0x18d90b(0x36d)]();}['createPaste'](_0x41e173){const _0x1b4b95=a0_0x19d63f,_0x1be733=vertsToCircles(this['vo'][_0x1b4b95(0x275)]),_0x585256=createContourLine(_0x1be733,0x0,this['vo'][_0x1b4b95(0x3b2)],!![]);return _0x585256['host']=this,this[_0x1b4b95(0x2df)]=_0x585256,_0x41e173?(_0x585256['position'][_0x1b4b95(0x357)](this[_0x1b4b95(0x3ce)]),_0x585256[_0x1b4b95(0x225)][_0x1b4b95(0x357)](this[_0x1b4b95(0x225)]),_0x585256[_0x1b4b95(0x154)][_0x1b4b95(0x357)](this[_0x1b4b95(0x154)])):this[_0x1b4b95(0x2d7)]['decompose'](_0x585256[_0x1b4b95(0x3ce)],_0x585256[_0x1b4b95(0x225)],_0x585256[_0x1b4b95(0x154)]),_0x585256[_0x1b4b95(0x336)]=WorldConfig[_0x1b4b95(0x2ff)],_0x585256;}[a0_0x19d63f(0x360)](_0x35a69a){const _0x1d8fe3=a0_0x19d63f;if(!this[_0x1d8fe3(0x2df)])return null;const _0x55de88=this['pasting'],_0x8a0b2e=_0x55de88[_0x1d8fe3(0x32c)]['vo'][_0x1d8fe3(0x298)](!![]);!_0x35a69a&&_0x55de88[_0x1d8fe3(0x3ce)]['toArray'](_0x8a0b2e[_0x1d8fe3(0x3ce)]);const _0x327096=new Area2dMesh(_0x8a0b2e);return _0x327096;}[a0_0x19d63f(0x23a)](_0x2976fe){const _0x2f0ecf=a0_0x19d63f;this[_0x2f0ecf(0x336)]=_0x2976fe,this[_0x2f0ecf(0x104)][_0x2f0ecf(0x336)]=_0x2976fe,this['vo'][_0x2f0ecf(0x2ca)]=_0x2976fe;}['renewContour'](){const _0x4950f8=a0_0x19d63f;this['contour']&&this[_0x4950f8(0x177)][_0x4950f8(0x11a)]();const _0x4f011d=vertsToCircles(this['vo']['verts']),_0x14b4be=createContourLine(_0x4f011d,0x0,this['vo'][_0x4950f8(0x3b2)]);this[_0x4950f8(0x177)]=_0x14b4be,this[_0x4950f8(0x37e)](_0x14b4be),_0x14b4be[_0x4950f8(0x410)]=![];}[a0_0x19d63f(0x341)](_0x367360){const _0x4d309c=a0_0x19d63f;this[_0x4d309c(0x104)][_0x4d309c(0x410)]=_0x367360,this[_0x4d309c(0x177)][_0x4d309c(0x410)]=_0x367360;}[a0_0x19d63f(0x3dc)](_0xb72f){const _0xc862c0=a0_0x19d63f;this['selectionMesh']['visible']=![],this[_0xc862c0(0x133)]['colorWrite']=!_0xb72f;}[a0_0x19d63f(0x1ba)](_0xdaf00,_0x46943d){const _0x309f63=a0_0x19d63f;this[_0x309f63(0x133)][_0x309f63(0x15e)]['setStyle'](_0xdaf00),this['vo']['cssColor']=_0xdaf00,this[_0x309f63(0x133)][_0x309f63(0x385)]=_0x46943d,this['vo'][_0x309f63(0x385)]=_0x46943d;}[a0_0x19d63f(0x277)](){const _0x2ce787=a0_0x19d63f;if(this[_0x2ce787(0x30b)])return;this[_0x2ce787(0x105)](),this['geometry'][_0x2ce787(0x3b7)](this['matrixWorld']),this[_0x2ce787(0x3ce)][_0x2ce787(0x3b0)](0x0,0x0,0x0),this[_0x2ce787(0x154)][_0x2ce787(0x3b0)](0x1,0x1,0x1),this['rotation'][_0x2ce787(0x3b0)](0x0,0x0,0x0),this['vo'][_0x2ce787(0x275)][0x0]=bufferAttributeToVectors(this['geometry'][_0x2ce787(0x3aa)][_0x2ce787(0x3ce)]),this['_inWorldSpace']=!![];}[a0_0x19d63f(0x150)](){const _0x5d4768=a0_0x19d63f;if(!this[_0x5d4768(0x30b)])return;this[_0x5d4768(0x163)][_0x5d4768(0x3ad)]();const _0x69f632=new a0_0x412c21['Vector3']();this['geometry'][_0x5d4768(0x247)][_0x5d4768(0x111)](_0x69f632),mat$1[_0x5d4768(0x1df)](-_0x69f632['x'],-_0x69f632['y'],-_0x69f632['z']),this[_0x5d4768(0x163)]['applyMatrix4'](mat$1),this['position'][_0x5d4768(0x357)](_0x69f632),this['vo'][_0x5d4768(0x275)][0x0]=bufferAttributeToVectors(this[_0x5d4768(0x163)]['attributes']['position']),this[_0x5d4768(0x3ce)][_0x5d4768(0x2b8)](this['vo'][_0x5d4768(0x3ce)]),this[_0x5d4768(0x105)](),this[_0x5d4768(0x30b)]=![],this[_0x5d4768(0x36d)]();}['markAsWorld'](){const _0x54c867=a0_0x19d63f;this[_0x54c867(0x30b)]=!![];}[a0_0x19d63f(0x405)](){const _0x3d22a4=a0_0x19d63f;this[_0x3d22a4(0x30b)]=![];}[a0_0x19d63f(0x249)](){const _0x3cf03e=a0_0x19d63f;this[_0x3cf03e(0x163)][_0x3cf03e(0x3ad)](),this['geometry'][_0x3cf03e(0x135)]();const _0x4d84cd=this['vo'],_0x5cda47=_0x4d84cd['verts'][0x0],_0x5e373d=_0x4d84cd[_0x3cf03e(0x275)][0x1],_0x438838=[],_0x2539ce=bufferAttributeToVectorsV2(this[_0x3cf03e(0x163)][_0x3cf03e(0x2f3)](_0x3cf03e(0x3ce)),this['_tmpVectors']);_0x2539ce[_0x3cf03e(0x156)]((_0x2d948b,_0x2e1dc8)=>{const _0x250cb7=_0x3cf03e,_0x3b83e3=this[_0x250cb7(0x1ee)][_0x2e1dc8][_0x250cb7(0x357)](_0x2d948b)[_0x250cb7(0x3b7)](this[_0x250cb7(0x149)]);_0x5cda47[_0x2e1dc8]['x']=_0x3b83e3['x'],_0x5cda47[_0x2e1dc8]['y']=_0x3b83e3['y'],_0x438838[_0x250cb7(0x32e)](_0x3b83e3['x'],_0x3b83e3['y']);});const _0x496b9e=a0_0x243156[_0x3cf03e(0x23b)](_0x438838,_0x5e373d);this['geometry'][_0x3cf03e(0x287)][_0x3cf03e(0x395)][_0x3cf03e(0x180)]!==_0x496b9e[_0x3cf03e(0x180)]?this[_0x3cf03e(0x163)][_0x3cf03e(0x19d)](_0x496b9e):(this[_0x3cf03e(0x163)][_0x3cf03e(0x287)][_0x3cf03e(0x3b0)](_0x496b9e),this['geometry']['index'][_0x3cf03e(0x1f3)]=!![]);}['getDistanceToPoint'](_0x317b2d){const _0x355134=a0_0x19d63f;mat$1[_0x355134(0x357)](this['matrixWorld'])[_0x355134(0x39c)]();const _0x4573e8=v2[_0x355134(0x357)](_0x317b2d)['applyMatrix4'](mat$1),_0x248873=vertsToCircles(this['vo'][_0x355134(0x275)]),_0x52f3a8=ClipperTool[_0x355134(0xfb)](_0x4573e8,_0x248873),_0x33ee24=[];_0x248873[_0x355134(0x156)](_0x587617=>{_0x587617['forEach']((_0x3623f7,_0x88f54e)=>{const _0x4eafc7=a0_0xfa1d,_0x75bbc7=_0x587617[(_0x88f54e+0x1)%_0x587617[_0x4eafc7(0x180)]];line3[_0x4eafc7(0x3a1)]['set'](_0x3623f7['x'],_0x3623f7['y'],0x0),line3['end'][_0x4eafc7(0x3b0)](_0x75bbc7['x'],_0x75bbc7['y'],0x0),line3[_0x4eafc7(0x136)](_0x4573e8,!![],v1$1);const _0x303081=v1$1[_0x4eafc7(0x3df)](_0x4573e8);_0x33ee24[_0x4eafc7(0x32e)](_0x303081);});});const _0xc4ba50=Math[_0x355134(0x11d)](..._0x33ee24);return _0x52f3a8?-_0xc4ba50:_0xc4ba50;}[a0_0x19d63f(0x286)](_0x34599f){const _0x130fcc=a0_0x19d63f;this[_0x130fcc(0x29b)]();const _0x227ec9=vertsToCircles(this['vo'][_0x130fcc(0x275)]),_0x4f388a=ClipperTool[_0x130fcc(0x13a)](_0x227ec9,_0x34599f);_0x4f388a[_0x130fcc(0x156)](_0x1a4a25=>{const _0x5a88eb=_0x130fcc,_0x1715c6=createContourLine(_0x1a4a25,0x0,this['vo'][_0x5a88eb(0x3b2)],!![]);this[_0x5a88eb(0x37e)](_0x1715c6),this[_0x5a88eb(0x282)][_0x5a88eb(0x32e)](_0x1715c6);}),this[_0x130fcc(0x1c8)]=_0x4f388a;}['clearDaft'](){const _0x19b852=a0_0x19d63f;this['draft'][_0x19b852(0x156)](_0x278320=>_0x278320[_0x19b852(0x11a)]()),this['draft'][_0x19b852(0x180)]=0x0;}['applyDraft'](_0x1a9a7d,_0x5d338c){const _0x408b73=a0_0x19d63f;this[_0x408b73(0x29b)](),this['updateVO']();const _0x5a4434=this[_0x408b73(0x1c8)];{const _0x4deb64=[];return _0x5a4434['forEach'](_0x4a1020=>{const _0x410fbe=_0x408b73;_0x4a1020[_0x410fbe(0x156)](_0x5842be=>{const _0x314468=_0x410fbe,_0xa8513d=new Lines2d()[_0x314468(0x2ad)](this['vo'])[_0x314468(0x401)](this['vo']);_0xa8513d[_0x314468(0x3ed)][0x0]=_0x5842be,_0xa8513d[_0x314468(0x237)][0x0]=0x1,_0xa8513d[_0x314468(0x40c)]();const _0x3100e3=new Lines2dEntity(_0xa8513d);_0x1a9a7d[_0x314468(0x37e)](_0x3100e3),_0x5d338c[_0x314468(0xf2)][_0x314468(0x32e)](_0x3100e3),_0x4deb64[_0x314468(0x32e)](_0x4deb64);});}),_0x4deb64;}}[a0_0x19d63f(0x10c)](){const _0x2f51cc=a0_0x19d63f;this[_0x2f51cc(0xe9)]=this['geometry'][_0x2f51cc(0x2f3)](_0x2f51cc(0x3ce))[_0x2f51cc(0x2a8)](),this[_0x2f51cc(0xe9)]['applyMatrix4'](this[_0x2f51cc(0x2d7)]),this[_0x2f51cc(0x182)][_0x2f51cc(0x180)]=0x0,this[_0x2f51cc(0x1ee)][_0x2f51cc(0x180)]=0x0;for(let _0x2b3974=0x0;_0x2b3974<this['_bacPosAttr'][_0x2f51cc(0x37a)];_0x2b3974++){this[_0x2f51cc(0x182)][_0x2f51cc(0x32e)](new a0_0x412c21[(_0x2f51cc(0x1c6))]()),this[_0x2f51cc(0x1ee)][_0x2f51cc(0x32e)](new a0_0x412c21['Vector3']());}}[a0_0x19d63f(0x3e3)](){const _0x30baf2=a0_0x19d63f;this[_0x30baf2(0x3ce)][_0x30baf2(0x2cf)](this['vo'][_0x30baf2(0x3ce)]),this[_0x30baf2(0x1a7)]['z']=this['vo'][_0x30baf2(0x1ce)],this['scale']['set'](this['vo'][_0x30baf2(0x154)][0x0],this['vo'][_0x30baf2(0x154)][0x1],0x1),this[_0x30baf2(0x1ba)](this['vo'][_0x30baf2(0x3b2)],this['vo']['opacity']);}[a0_0x19d63f(0x38c)](){const _0x21975a=a0_0x19d63f;this['position'][_0x21975a(0x2b8)](this['vo']['position']),this['vo'][_0x21975a(0x154)][0x0]=this[_0x21975a(0x154)]['x'],this['vo'][_0x21975a(0x154)][0x1]=this[_0x21975a(0x154)]['y'],this['vo'][_0x21975a(0x1ce)]=this['rotation']['z'];}}class Scene3dEvent{static [a0_0x19d63f(0x3ef)]={'type':'area2d\x20selected','tile':a0_0x19d63f(0x2d5),'value':{'color':a0_0x19d63f(0x3e2),'opacity':0.8}};static [a0_0x19d63f(0x3f0)]={'type':a0_0x19d63f(0x3f0),'tile':'选中的2d线条','value':{'color':'#ff6000','opacity':0.8}};static [a0_0x19d63f(0x419)]={'type':'none','title':''};}class BoxFrameMesh extends a0_0x412c21[a0_0x19d63f(0x316)]{[a0_0x19d63f(0x2aa)]=new a0_0x412c21[(a0_0x19d63f(0x16a))]();[a0_0x19d63f(0x3bb)];constructor(_0x32fe41=a0_0x19d63f(0x15c),_0x53b6fb=![]){const _0x50a506=a0_0x19d63f,_0x33445b=new Uint16Array([0x0,0x1,0x1,0x2,0x2,0x3,0x3,0x0,0x4,0x5,0x5,0x6,0x6,0x7,0x7,0x4,0x0,0x4,0x1,0x5,0x2,0x6,0x3,0x7]),_0x4140c3=new Float32Array(0x8*0x3),_0x599783=new a0_0x412c21['BufferGeometry']();_0x599783[_0x50a506(0x19d)](new a0_0x412c21['BufferAttribute'](_0x33445b,0x1)),_0x599783[_0x50a506(0x248)](_0x50a506(0x3ce),new a0_0x412c21[(_0x50a506(0x3b1))](_0x4140c3,0x3)),super(_0x599783,new a0_0x412c21[(_0x50a506(0x2c8))]({'color':_0x32fe41,'toneMapped':![],'depthTest':![],'transparent':!![]})),this['renderOrder']=0x5a,this[_0x50a506(0x2bc)]='BoxGroupFrame';if(_0x53b6fb){const _0x453906=new a0_0x412c21[(_0x50a506(0x1b4))](0x1,0x1,0x1);this[_0x50a506(0x3bb)]=new a0_0x412c21[(_0x50a506(0x19f))](_0x453906,new a0_0x412c21[(_0x50a506(0x1fc))]({'transparent':!![],'opacity':0x0,'depthTest':![],'depthWrite':![]})),this[_0x50a506(0x3bb)][_0x50a506(0x154)][_0x50a506(0x3b0)](0.001,0.001,0.001),this[_0x50a506(0x37e)](this['_boxMesh']);}this['update'](new a0_0x412c21[(_0x50a506(0x16a))](new a0_0x412c21['Vector3'](),new a0_0x412c21[(_0x50a506(0x1c6))](0xa,0xa,0xa)));}[a0_0x19d63f(0x2e4)](_0x112bec){const _0x1f93ab=a0_0x19d63f;this[_0x1f93ab(0x2aa)][_0x1f93ab(0x357)](_0x112bec);const _0x17b42e=this[_0x1f93ab(0x2aa)];if(_0x17b42e['isEmpty']()){this[_0x1f93ab(0x3bb)]&&this[_0x1f93ab(0x3bb)][_0x1f93ab(0x154)][_0x1f93ab(0x3b0)](0.001,0.001,0.001);return;}else this['_boxMesh']&&_0x17b42e['getSize'](this[_0x1f93ab(0x3bb)][_0x1f93ab(0x154)]);const _0x3d2ed2=_0x17b42e['min'],_0x48ca03=_0x17b42e[_0x1f93ab(0x40d)],_0x26814c=this[_0x1f93ab(0x163)][_0x1f93ab(0x3aa)][_0x1f93ab(0x3ce)],_0x1526ee=_0x26814c[_0x1f93ab(0x395)];_0x1526ee[0x0]=_0x48ca03['x'],_0x1526ee[0x1]=_0x48ca03['y'],_0x1526ee[0x2]=_0x48ca03['z'],_0x1526ee[0x3]=_0x3d2ed2['x'],_0x1526ee[0x4]=_0x48ca03['y'],_0x1526ee[0x5]=_0x48ca03['z'],_0x1526ee[0x6]=_0x3d2ed2['x'],_0x1526ee[0x7]=_0x3d2ed2['y'],_0x1526ee[0x8]=_0x48ca03['z'],_0x1526ee[0x9]=_0x48ca03['x'],_0x1526ee[0xa]=_0x3d2ed2['y'],_0x1526ee[0xb]=_0x48ca03['z'],_0x1526ee[0xc]=_0x48ca03['x'],_0x1526ee[0xd]=_0x48ca03['y'],_0x1526ee[0xe]=_0x3d2ed2['z'],_0x1526ee[0xf]=_0x3d2ed2['x'],_0x1526ee[0x10]=_0x48ca03['y'],_0x1526ee[0x11]=_0x3d2ed2['z'],_0x1526ee[0x12]=_0x3d2ed2['x'],_0x1526ee[0x13]=_0x3d2ed2['y'],_0x1526ee[0x14]=_0x3d2ed2['z'],_0x1526ee[0x15]=_0x48ca03['x'],_0x1526ee[0x16]=_0x3d2ed2['y'],_0x1526ee[0x17]=_0x3d2ed2['z'],_0x26814c['needsUpdate']=!![],this['geometry'][_0x1f93ab(0x135)]();}['copy'](_0x5bddc6){const _0x37a07f=a0_0x19d63f;return a0_0x412c21['LineSegments'][_0x37a07f(0x37b)][_0x37a07f(0x357)][_0x37a07f(0x3a8)](this,_0x5bddc6),this;}}let groupCount=0x1;function setGroupCount(_0x5ed95f){groupCount<=_0x5ed95f&&(groupCount=_0x5ed95f+0x1);}class GroupVO{['id']=0x0;[a0_0x19d63f(0x2fd)]=[];[a0_0x19d63f(0x3ff)]=[];[a0_0x19d63f(0x22f)]=[];[a0_0x19d63f(0x3ce)]=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();[a0_0x19d63f(0x1a7)]=new a0_0x412c21[(a0_0x19d63f(0x109))]();[a0_0x19d63f(0x154)]=new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x1,0x1,0x1);['visible']=!![];['locked']=![];constructor(_0x17c1a2=![]){_0x17c1a2&&(this['id']=groupCount++);}[a0_0x19d63f(0x1fd)](){const _0x2cc728=a0_0x19d63f,_0x511107=new GroupVO(!![]);return _0x511107[_0x2cc728(0x3ce)][_0x2cc728(0x357)](this[_0x2cc728(0x3ce)]),_0x511107['rotation'][_0x2cc728(0x357)](this[_0x2cc728(0x1a7)]),_0x511107[_0x2cc728(0x154)][_0x2cc728(0x357)](this[_0x2cc728(0x154)]),_0x511107;}[a0_0x19d63f(0x27d)](){const _0x2bbc19=a0_0x19d63f;this[_0x2bbc19(0x2fd)][_0x2bbc19(0x180)]=0x0,this['areaIds']['length']=0x0,this[_0x2bbc19(0x22f)][_0x2bbc19(0x180)]=0x0;}[a0_0x19d63f(0x15a)](){const _0x356d23=a0_0x19d63f,_0x28863e=this[_0x356d23(0x2fd)][_0x356d23(0x180)]+this[_0x356d23(0x3ff)]['length']+this[_0x356d23(0x22f)]['length'];return _0x28863e===0x0;}[a0_0x19d63f(0xda)](){const _0x5255bb=a0_0x19d63f;return this[_0x5255bb(0x410)]&&!this[_0x5255bb(0x137)];}[a0_0x19d63f(0x19a)](){const _0x547ba7=a0_0x19d63f,{id:_0x1493d2,visible:_0x59841a,locked:_0x45d78e}=this,_0xff76a5={'id':_0x1493d2,'visible':_0x59841a,'locked':_0x45d78e};this[_0x547ba7(0x2fd)]['length']&&(_0xff76a5[_0x547ba7(0x2fd)]=this[_0x547ba7(0x2fd)]);this[_0x547ba7(0x3ff)][_0x547ba7(0x180)]&&(_0xff76a5['areaIds']=this[_0x547ba7(0x3ff)]);this[_0x547ba7(0x22f)][_0x547ba7(0x180)]&&(_0xff76a5[_0x547ba7(0x22f)]=this[_0x547ba7(0x22f)]);_0xff76a5[_0x547ba7(0x3ce)]=toFixedVector(this[_0x547ba7(0x3ce)],0x3)[_0x547ba7(0x2b8)]();const {x:_0x531bad,y:_0x1fbe38,z:_0x33d856}=this['rotation'];return _0xff76a5[_0x547ba7(0x1a7)]=[_0x531bad,_0x1fbe38,_0x33d856],_0xff76a5[_0x547ba7(0x154)]=toFixedVector(this[_0x547ba7(0x154)],0x3)[_0x547ba7(0x2b8)](),_0xff76a5;}[a0_0x19d63f(0x366)](_0x595619){const _0x254ef0=a0_0x19d63f;return this['id']=_0x595619['id'],setGroupCount(this['id']),_0x595619[_0x254ef0(0x2fd)]&&(this[_0x254ef0(0x2fd)]=_0x595619[_0x254ef0(0x2fd)]),_0x595619[_0x254ef0(0x3ff)]&&(this[_0x254ef0(0x3ff)]=_0x595619[_0x254ef0(0x3ff)]),_0x595619['lineIds']&&(this[_0x254ef0(0x22f)]=_0x595619[_0x254ef0(0x22f)]),this[_0x254ef0(0x3ce)][_0x254ef0(0x2cf)](_0x595619[_0x254ef0(0x3ce)]),this['rotation']['fromArray'](_0x595619[_0x254ef0(0x1a7)]),this[_0x254ef0(0x154)][_0x254ef0(0x2cf)](_0x595619[_0x254ef0(0x154)]),this;}}const box3$2=new a0_0x412c21[(a0_0x19d63f(0x16a))](),matBak=new a0_0x412c21[(a0_0x19d63f(0x1f6))]();function findScene(_0x233de6){const _0x1f4c48=a0_0x19d63f;let _0x43c9de=_0x233de6;while(_0x43c9de['parent']){_0x43c9de=_0x43c9de[_0x1f4c48(0x1b1)];}return _0x43c9de;}const hoverColor=a0_0x19d63f(0x2ce),defaultGroupColor=a0_0x19d63f(0x191);function updateParentGroups(_0x29c0b2){const _0x1b81b7=a0_0x19d63f,_0x104a56=[];_0x29c0b2[_0x1b81b7(0x156)](_0x1759f3=>{const _0x184c3e=_0x1b81b7;let _0x286371=_0x1759f3[_0x184c3e(0x1b1)];while(_0x286371){_0x286371 instanceof GroupEntity&&!_0x104a56[_0x184c3e(0x119)](_0x286371)&&(_0x286371[_0x184c3e(0x1a2)](),_0x104a56['push'](_0x286371)),_0x286371=_0x286371[_0x184c3e(0x1b1)];}});}function computeBoxByEntities(_0x200a47,_0x1c07d1){const _0xd5ebe1=a0_0x19d63f,_0x3d9db3=_0x1c07d1?_0x1c07d1:new a0_0x412c21[(_0xd5ebe1(0x16a))]();return _0x200a47[_0xd5ebe1(0x156)](_0x1f09a4=>{const _0x3b72be=_0xd5ebe1;if(_0x1f09a4 instanceof Area2dMesh)_0x3d9db3['expandByObject'](_0x1f09a4);else{if(_0x1f09a4 instanceof Lines2dEntity)_0x3d9db3[_0x3b72be(0x27f)](_0x1f09a4['lineSegments']);else{if(_0x1f09a4 instanceof GroupEntity){const _0x28f863=box3$2[_0x3b72be(0x357)](_0x1f09a4[_0x3b72be(0x17e)][_0x3b72be(0x2aa)])[_0x3b72be(0x3b7)](_0x1f09a4[_0x3b72be(0x2d7)]);_0x3d9db3['union'](_0x28f863);}}}}),_0x3d9db3;}class GroupEntity extends a0_0x412c21[a0_0x19d63f(0x2e6)]{['vo'];['volume']=0x1;[a0_0x19d63f(0x17e)]=new BoxFrameMesh(defaultGroupColor,!![]);['positionStart']=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();[a0_0x19d63f(0x170)]=new a0_0x412c21[(a0_0x19d63f(0x109))]();constructor(_0x417ccb){const _0x5a817b=a0_0x19d63f;super(),_0x417ccb&&(this['vo']=_0x417ccb,this[_0x5a817b(0x3ce)]['copy'](_0x417ccb['position']),this['rotation'][_0x5a817b(0x357)](_0x417ccb[_0x5a817b(0x1a7)]),this['scale'][_0x5a817b(0x357)](_0x417ccb[_0x5a817b(0x154)]),this['updateMatrix']()),this[_0x5a817b(0x17e)][_0x5a817b(0x410)]=![];}[a0_0x19d63f(0x2bf)](_0x40c4d6){const _0x57b4ee=a0_0x19d63f;this[_0x57b4ee(0x17e)][_0x57b4ee(0x410)]=_0x40c4d6;}[a0_0x19d63f(0x207)](_0x30fa52){const _0xc784ca=a0_0x19d63f;this[_0xc784ca(0x410)]=!_0x30fa52;}[a0_0x19d63f(0x1ac)](){const _0x1f7d0a=a0_0x19d63f;this[_0x1f7d0a(0x17e)]['userData'][_0x1f7d0a(0x204)]=this[_0x1f7d0a(0x17e)]['visible'],this[_0x1f7d0a(0x17e)][_0x1f7d0a(0x410)]=!![],this[_0x1f7d0a(0x17e)][_0x1f7d0a(0x133)][_0x1f7d0a(0x15e)][_0x1f7d0a(0x102)](hoverColor);}[a0_0x19d63f(0x2bb)](){const _0xfc47a1=a0_0x19d63f;this['boundingFrame'][_0xfc47a1(0x410)]=this[_0xfc47a1(0x17e)][_0xfc47a1(0x3a6)][_0xfc47a1(0x204)],this[_0xfc47a1(0x17e)][_0xfc47a1(0x133)]['color'][_0xfc47a1(0x102)](defaultGroupColor);}[a0_0x19d63f(0x387)](){const _0x58f253=a0_0x19d63f;this[_0x58f253(0x1ab)][_0x58f253(0x357)](this[_0x58f253(0x3ce)]),this[_0x58f253(0x170)][_0x58f253(0x357)](this[_0x58f253(0x1a7)]);}[a0_0x19d63f(0x18d)](){const _0x1a4ad5=a0_0x19d63f;return this[_0x1a4ad5(0x1b1)]instanceof a0_0x412c21['Scene'];}[a0_0x19d63f(0x214)](){const _0x4fb31=a0_0x19d63f,_0x458db7=[];return this[_0x4fb31(0x2f5)](_0x34553e=>{const _0x2e02dc=_0x4fb31;if(_0x34553e instanceof Area2dMesh)_0x458db7[_0x2e02dc(0x32e)](_0x34553e);else{if(_0x34553e instanceof Lines2dEntity)_0x458db7[_0x2e02dc(0x32e)](_0x34553e);else _0x34553e instanceof GroupEntity&&(_0x34553e!==this&&_0x458db7[_0x2e02dc(0x32e)](_0x34553e));}}),_0x458db7;}[a0_0x19d63f(0x1d0)](_0xb70384){const _0x34648b=a0_0x19d63f;if(!this['vo'])return;const {areaIds:_0x105229,lineIds:_0x37e8f5,groupIds:_0x3c2b40}=this['vo'];_0x105229['forEach'](_0x2a2094=>{const _0x94f4f5=a0_0xfa1d,_0x4c4db2=_0xb70384['area2dMeshes']['find'](_0x247f12=>_0x247f12['vo']['id']===_0x2a2094);_0x4c4db2&&this[_0x94f4f5(0x37e)](_0x4c4db2);}),_0x37e8f5['forEach'](_0x2a5eab=>{const _0x5f3e5a=a0_0xfa1d,_0x270a2b=_0xb70384[_0x5f3e5a(0xf2)][_0x5f3e5a(0x138)](_0xa096de=>_0xa096de['vo']['id']===_0x2a5eab);_0x270a2b&&this[_0x5f3e5a(0x37e)](_0x270a2b);}),_0x3c2b40[_0x34648b(0x156)](_0x879fca=>{const _0x3ed72f=_0x34648b,_0x332bc3=_0xb70384[_0x3ed72f(0x161)]['find'](_0x2b3f9f=>_0x2b3f9f['vo']['id']===_0x879fca);_0x332bc3&&this['add'](_0x332bc3);}),this[_0x34648b(0x1a2)]();}[a0_0x19d63f(0x132)](_0x111199){const _0x188065=a0_0x19d63f;if(_0x111199[_0x188065(0x180)]<0x2)return![];const _0x121daa=new GroupVO(!![]);this['vo']=_0x121daa;const _0x4b3443=new Set(),_0x2a978a=[];_0x111199[_0x188065(0x156)](_0x3276eb=>{const _0x34eed2=_0x188065;_0x3276eb instanceof GroupEntity&&_0x2a978a[_0x34eed2(0x32e)](..._0x3276eb[_0x34eed2(0x214)]()),_0x3276eb[_0x34eed2(0x1b1)]instanceof GroupEntity&&_0x4b3443[_0x34eed2(0x37e)](_0x3276eb[_0x34eed2(0x1b1)]);});const _0x286d99=[];_0x111199['forEach'](_0x4c2c2e=>{const _0x4ed3c2=_0x188065;if(_0x2a978a['includes'](_0x4c2c2e))return;if(_0x4c2c2e instanceof Area2dMesh)_0x121daa[_0x4ed3c2(0x3ff)][_0x4ed3c2(0x32e)](_0x4c2c2e['vo']['id']);else{if(_0x4c2c2e instanceof Lines2dEntity)_0x121daa[_0x4ed3c2(0x22f)][_0x4ed3c2(0x32e)](_0x4c2c2e['vo']['id']);else _0x4c2c2e instanceof GroupEntity&&_0x121daa[_0x4ed3c2(0x2fd)][_0x4ed3c2(0x32e)](_0x4c2c2e['vo']['id']);}_0x286d99[_0x4ed3c2(0x32e)](_0x4c2c2e);});let _0x13c73d=this[_0x188065(0x3cf)]();const _0x1392d7=[..._0x4b3443];if(_0x1392d7['length']===0x1){const _0x475281=_0x1392d7[0x0];_0x475281[_0x188065(0x214)]()[_0x188065(0x180)]===_0x286d99['length']&&(_0x13c73d=![]);}if(_0x13c73d){const _0xb259ac=computeBoxByEntities(_0x286d99,new a0_0x412c21[(_0x188065(0x16a))]()),_0xff42f8=this['_updateBoundingFrame'](_0xb259ac);_0x286d99[_0x188065(0x156)](_0x1eae86=>{const _0x494873=_0x188065;_0x1eae86[_0x494873(0x3ce)][_0x494873(0x13d)](_0x1eae86['matrixWorld'])[_0x494873(0x343)](_0xff42f8),this[_0x494873(0x37e)](_0x1eae86);});}return{'valid':_0x13c73d,'involvedGroups':_0x1392d7};}[a0_0x19d63f(0x35f)](_0x25be32){const _0x1cbef1=a0_0x19d63f,_0x430138=_0x25be32[_0x1cbef1(0x111)](new a0_0x412c21[(_0x1cbef1(0x1c6))]()),_0x1dd33b=_0x25be32['getSize'](new a0_0x412c21[(_0x1cbef1(0x1c6))]());this[_0x1cbef1(0x3ce)]['copy'](_0x430138),this[_0x1cbef1(0xe4)]=_0x1dd33b['x']*_0x1dd33b['y'];const _0x39460b=_0x1dd33b['multiplyScalar'](0.5);return _0x25be32[_0x1cbef1(0x11d)][_0x1cbef1(0x357)](_0x39460b)[_0x1cbef1(0x3f9)](),_0x25be32[_0x1cbef1(0x40d)]['copy'](_0x39460b),this[_0x1cbef1(0x17e)][_0x1cbef1(0x2e4)](_0x25be32),this[_0x1cbef1(0x37e)](this[_0x1cbef1(0x17e)]),_0x430138;}[a0_0x19d63f(0x3cf)](){const _0x502ff8=a0_0x19d63f,_0x4063ad=this['vo'],_0x5df060=_0x4063ad[_0x502ff8(0x2fd)]['length'];return _0x4063ad[_0x502ff8(0x3ff)][_0x502ff8(0x180)]+_0x4063ad[_0x502ff8(0x22f)][_0x502ff8(0x180)]+_0x5df060>0x1;}['adjustChildrenPosition'](){const _0x176001=a0_0x19d63f,_0x217fd4=this[_0x176001(0x17e)][_0x176001(0x2aa)];_0x217fd4[_0x176001(0x3fc)]();const _0x460805=findScene(this),_0x3612a6=this[_0x176001(0x1b1)],_0x359e73=!!_0x3612a6;_0x359e73&&(matBak[_0x176001(0x357)](this['matrix']),this['position']['set'](0x0,0x0,0x0),this[_0x176001(0x154)][_0x176001(0x3b0)](0x1,0x1,0x1),this['rotation'][_0x176001(0x3b0)](0x0,0x0,0x0),_0x460805[_0x176001(0x37e)](this),this[_0x176001(0x105)](!![]));computeBoxByEntities(this[_0x176001(0x34e)],_0x217fd4);const _0x560550=this[_0x176001(0x35f)](_0x217fd4);this['children'][_0x176001(0x156)](_0x5c49c2=>{const _0x30172b=_0x176001;if(_0x5c49c2===this['boundingFrame'])return;_0x5c49c2[_0x30172b(0x3ce)]['setFromMatrixPosition'](_0x5c49c2[_0x30172b(0x2d7)])[_0x30172b(0x343)](_0x560550);}),this[_0x176001(0x3ce)][_0x176001(0x357)](_0x560550),_0x359e73&&(this[_0x176001(0x3b7)](matBak),_0x3612a6[_0x176001(0x37e)](this));}[a0_0x19d63f(0x383)](_0x5c6ed9){const _0x899801=a0_0x19d63f,_0x23a7b6=this['matrixWorld'][_0x899801(0x2a8)]()[_0x899801(0x39c)]();_0x5c6ed9[_0x899801(0x3b7)](_0x23a7b6),this[_0x899801(0x37e)](_0x5c6ed9);}[a0_0x19d63f(0x305)](_0x12758b){const _0x3609e0=a0_0x19d63f;this['updateMatrix']();const _0x1b5287=this['matrix'],_0x77e232=this[_0x3609e0(0x1b1)],_0x40f416=[];this[_0x3609e0(0x34e)][_0x3609e0(0x156)](_0x4e0fce=>{const _0x4905f4=_0x3609e0;if(_0x4e0fce===this[_0x4905f4(0x17e)])return;_0x40f416[_0x4905f4(0x32e)](_0x4e0fce),_0x4e0fce['applyMatrix4'](_0x1b5287);}),_0x12758b[_0x3609e0(0x2e3)]['length']=0x0,_0x40f416['forEach'](_0x532690=>{const _0xca1d2d=_0x3609e0;_0x77e232[_0xca1d2d(0x37e)](_0x532690),_0x12758b[_0xca1d2d(0x2e3)][_0xca1d2d(0x32e)](_0x532690);}),removeArrayItem(_0x12758b[_0x3609e0(0x161)],this),this[_0x3609e0(0x11a)]();}['removeFromStore'](_0x3c668d){const _0x414fc9=a0_0x19d63f,_0x581099=[],_0x34f4ac=[],_0x5839f6=[];this[_0x414fc9(0x214)]()[_0x414fc9(0x156)](_0x5de9f2=>{const _0x3bf16e=_0x414fc9;if(_0x5de9f2 instanceof Area2dMesh)_0x581099[_0x3bf16e(0x32e)](_0x5de9f2);else{if(_0x5de9f2 instanceof Lines2dEntity)_0x34f4ac[_0x3bf16e(0x32e)](_0x5de9f2);else _0x5de9f2 instanceof GroupEntity&&_0x5839f6[_0x3bf16e(0x32e)](_0x5de9f2);}}),arrAsubB(_0x3c668d[_0x414fc9(0x394)],_0x581099),arrAsubB(_0x3c668d[_0x414fc9(0xf2)],_0x34f4ac),_0x5839f6[_0x414fc9(0x32e)](this),arrAsubB(_0x3c668d[_0x414fc9(0x161)],_0x5839f6),this[_0x414fc9(0x11a)]();}[a0_0x19d63f(0x1e4)](){const _0x44d008=a0_0x19d63f;this['vo'][_0x44d008(0x3ce)][_0x44d008(0x357)](this[_0x44d008(0x3ce)]);}[a0_0x19d63f(0x38c)](){const _0x3149a4=a0_0x19d63f,_0x51d893=this['vo'];_0x51d893['position'][_0x3149a4(0x357)](this['position']),_0x51d893[_0x3149a4(0x1a7)][_0x3149a4(0x357)](this[_0x3149a4(0x1a7)]),_0x51d893[_0x3149a4(0x154)][_0x3149a4(0x357)](this['scale']),this['children'][_0x3149a4(0x156)](_0x9bf8b8=>{const _0x1db186=_0x3149a4;if(_0x9bf8b8 instanceof Area2dMesh)_0x51d893['areaIds'][_0x1db186(0x32e)](_0x9bf8b8['vo']['id']);else{if(_0x9bf8b8 instanceof Lines2dEntity)_0x51d893['lineIds'][_0x1db186(0x32e)](_0x9bf8b8['vo']['id']);else _0x9bf8b8 instanceof GroupEntity&&_0x51d893['groupIds'][_0x1db186(0x32e)](_0x9bf8b8['vo']['id']);}}),_0x51d893['visible']=this[_0x3149a4(0x410)];}[a0_0x19d63f(0x22e)](_0x1d1c62){const _0x39ab06=a0_0x19d63f,_0x11f523=this['getChildEntities'](),{min:_0x3a0a4f,max:_0x3179f6}=this['boundingFrame']['_box'],_0x3a3e5b=new a0_0x412c21[(_0x39ab06(0x1c6))]()['copy'](_0x3a0a4f);_0x3a3e5b['x']=_0x3179f6['x'];const _0x532a02=new a0_0x412c21[(_0x39ab06(0x1c6))]()[_0x39ab06(0x357)](_0x3179f6);_0x532a02['x']=_0x3a0a4f['x'];const _0x366408=[_0x3a0a4f,_0x3a3e5b,_0x3179f6,_0x532a02],_0x1bfba2=createContourLine([_0x366408],0x0,_0x39ab06(0x215),!![]);return _0x1bfba2[_0x39ab06(0x32c)]=this,this[_0x39ab06(0x2df)]=_0x1bfba2,_0x1d1c62?(_0x1bfba2[_0x39ab06(0x3ce)][_0x39ab06(0x357)](this[_0x39ab06(0x3ce)]),_0x1bfba2[_0x39ab06(0x225)][_0x39ab06(0x357)](this[_0x39ab06(0x225)]),_0x1bfba2[_0x39ab06(0x154)][_0x39ab06(0x357)](this[_0x39ab06(0x154)])):this['matrixWorld'][_0x39ab06(0x2a7)](_0x1bfba2[_0x39ab06(0x3ce)],_0x1bfba2[_0x39ab06(0x225)],_0x1bfba2[_0x39ab06(0x154)]),_0x1bfba2['renderOrder']=WorldConfig[_0x39ab06(0x2ff)],_0x11f523[_0x39ab06(0x156)](_0x16e96a=>{const _0x2fb254=_0x39ab06,_0xbda2b1=_0x16e96a[_0x2fb254(0x22e)](!![]);_0x1bfba2['add'](_0xbda2b1);}),_0x1bfba2;}[a0_0x19d63f(0x360)](_0x1d924d){const _0x5dcf72=a0_0x19d63f;if(!this[_0x5dcf72(0x2df)])return null;const _0x28b179=this[_0x5dcf72(0x2df)],_0xa9dea4=_0x28b179['host']['vo'][_0x5dcf72(0x1fd)]();!_0x1d924d&&_0x28b179[_0x5dcf72(0x3ce)][_0x5dcf72(0x2b8)](_0xa9dea4[_0x5dcf72(0x3ce)]);const _0x2c845d=new GroupEntity(_0xa9dea4);return this[_0x5dcf72(0x34e)][_0x5dcf72(0x156)](_0x399c4f=>{const _0x3164c7=_0x5dcf72;if(_0x399c4f instanceof Area2dMesh){const _0x1d9167=_0x399c4f[_0x3164c7(0x360)](!![]);_0x1d9167&&_0x2c845d[_0x3164c7(0x37e)](_0x1d9167);}else{if(_0x399c4f instanceof Lines2dEntity){const _0x4420ee=_0x399c4f['dropdownPaste'](!![]);_0x4420ee&&_0x2c845d[_0x3164c7(0x37e)](_0x4420ee);}else{if(_0x399c4f instanceof GroupEntity){const _0x4994ba=_0x399c4f['dropdownPaste'](!![]);_0x4994ba&&_0x2c845d[_0x3164c7(0x37e)](_0x4994ba);}}}}),_0x2c845d[_0x5dcf72(0x35f)](this['boundingFrame']['_box']),_0x2c845d['position'][_0x5dcf72(0x357)](_0x28b179[_0x5dcf72(0x3ce)]),_0x2c845d;}}const point$2=new a0_0x412c21['Vector3'](),downPos$4=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();let oldPosArr$2=[];const oldMatArr=[],centerPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();let downingLeft$2=![],posMoved$2=![];const box1$2=new a0_0x412c21[(a0_0x19d63f(0x16a))](),box2$2=new a0_0x412c21[(a0_0x19d63f(0x16a))](),boxCenter$4=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function updateOldMatArr(_0x1c586c){const _0x5362e1=a0_0x19d63f;oldMatArr[_0x5362e1(0x180)]=0x0;let _0x3786b9=![];return _0x1c586c[_0x5362e1(0x156)](_0xf96877=>{const _0x3dcca1=_0x5362e1;if(_0xf96877[_0x3dcca1(0x1b1)]&&_0xf96877[_0x3dcca1(0x1b1)][_0x3dcca1(0x1b1)]){_0xf96877['parent'][_0x3dcca1(0x105)]();const _0x366bd5=new a0_0x412c21[(_0x3dcca1(0x1f6))]()['copy'](_0xf96877[_0x3dcca1(0x1b1)][_0x3dcca1(0x2d7)])[_0x3dcca1(0x39c)]();_0x366bd5['setPosition'](0x0,0x0,0x0),oldMatArr[_0x3dcca1(0x32e)](_0x366bd5),_0x3786b9=!![];}else oldMatArr[_0x3dcca1(0x32e)](null);}),_0x3786b9;}class Area2dMeshPlugin extends PluginBase{[a0_0x19d63f(0x2f6)];[a0_0x19d63f(0x246)];[a0_0x19d63f(0x18f)]=[];constructor(_0x16cac1){super(),this['scene3d']=_0x16cac1;}[a0_0x19d63f(0x1d6)](){const _0x24da83=a0_0x19d63f;if(this[_0x24da83(0x18f)][_0x24da83(0x180)]!==0x1)return null;return this[_0x24da83(0x18f)][0x0];}[a0_0x19d63f(0x2fa)](){const _0x39f871=a0_0x19d63f;this[_0x39f871(0x18f)][_0x39f871(0x156)](_0x407ac1=>_0x407ac1[_0x39f871(0x341)](![])),this['_selectedAreas'][_0x39f871(0x180)]=0x0;}['appendSelectAreas'](_0x242f22){const _0x37721e=a0_0x19d63f;this[_0x37721e(0x18f)]=arrAunionB(this[_0x37721e(0x18f)],_0x242f22),this['_selectedAreas'][_0x37721e(0x156)](_0xb61a20=>_0xb61a20[_0x37721e(0x341)](!![]));if(!this['_selectedAreas'][_0x37721e(0x180)])return;}[a0_0x19d63f(0x19b)](){const _0x44e4e7=a0_0x19d63f;if(!this[_0x44e4e7(0x18f)][_0x44e4e7(0x180)])return;arrAsubB(this[_0x44e4e7(0x2f6)]['store'][_0x44e4e7(0x394)],this[_0x44e4e7(0x18f)]),this[_0x44e4e7(0x18f)][_0x44e4e7(0x156)](_0x12e37b=>_0x12e37b[_0x44e4e7(0x11a)]());const _0x20b574=this['_selectedAreas'][_0x44e4e7(0x24a)](_0x444734=>_0x444734[_0x44e4e7(0x1b1)]),_0x55bd1d=this[_0x44e4e7(0x18f)]['slice'](),_0x4ce9b9=this[_0x44e4e7(0x2f6)]['store'][_0x44e4e7(0x394)],_0x1eb4e1=[];this[_0x44e4e7(0x2f6)][_0x44e4e7(0x33f)][_0x44e4e7(0x346)](UndoType[_0x44e4e7(0x1b9)],{'parents':_0x20b574,'addedItems':_0x1eb4e1,'removedItems':_0x55bd1d,'arrItems':_0x4ce9b9}),this[_0x44e4e7(0x18f)][_0x44e4e7(0x180)]=0x0;}[a0_0x19d63f(0x408)](_0x3efe51){const _0x522747=a0_0x19d63f;if(this[_0x522747(0x18f)][_0x522747(0x180)]<0x2)return;const _0x8dfe44=this[_0x522747(0x2f6)][_0x522747(0x25d)],_0x3aa8e5=this['_selectedAreas'][this[_0x522747(0x18f)][_0x522747(0x180)]-0x1],_0x303b0e=_0x3aa8e5['vo'][_0x522747(0x3b2)],_0x11bf7c=_0x3aa8e5['vo'][_0x522747(0x385)],_0x4a3cbe=this[_0x522747(0x18f)][_0x522747(0x24a)](_0x35a1bf=>{const _0x376338=_0x522747;return _0x35a1bf[_0x376338(0x277)](),_0x35a1bf['vo'][_0x376338(0x275)];});let _0x14d84a;_0x3efe51===a0_0x4c3ad7[_0x522747(0x398)]['ctDifference']&&(_0x14d84a=_0x4a3cbe[_0x522747(0x308)](),_0x4a3cbe[_0x522747(0x28b)](_0x14d84a));const _0x8f2d28=ClipperTool[_0x522747(0x2b0)](_0x4a3cbe,_0x3efe51),_0x3feeb3=[];_0x8f2d28[_0x522747(0x156)](_0x3288b2=>{const _0x3da3b6=_0x522747,_0x2966a2=new Area2d();_0x2966a2[_0x3da3b6(0x3b2)]=_0x303b0e,_0x2966a2[_0x3da3b6(0x385)]=_0x11bf7c,_0x2966a2[_0x3da3b6(0x275)]=_0x3288b2;const _0x517369=new Area2dMesh(_0x2966a2);_0x517369[_0x3da3b6(0x150)](),_0x3feeb3[_0x3da3b6(0x32e)](_0x517369),this['scene3d'][_0x3da3b6(0x1d8)][_0x3da3b6(0x37e)](_0x517369);}),_0x8dfe44[_0x522747(0x394)][_0x522747(0x32e)](..._0x3feeb3);const _0x12df95=_0x3feeb3,_0x4ef9ef=[];if(_0x3efe51===a0_0x4c3ad7['ClipType'][_0x522747(0x35d)]){const _0x52c698=this[_0x522747(0x18f)][_0x522747(0x308)]();removeArrayItem(_0x8dfe44[_0x522747(0x394)],_0x52c698),_0x52c698[_0x522747(0x11a)](),this[_0x522747(0x18f)][_0x522747(0x156)](_0x43bc3a=>{const _0x24314e=_0x522747;_0x43bc3a[_0x24314e(0x150)]();}),_0x4ef9ef[_0x522747(0x32e)](_0x52c698);}else _0x4ef9ef[_0x522747(0x32e)](...this[_0x522747(0x18f)]),arrAsubB(_0x8dfe44[_0x522747(0x394)],this[_0x522747(0x18f)]),this[_0x522747(0x18f)][_0x522747(0x156)](_0x330fa3=>_0x330fa3['removeFromParent']()),this[_0x522747(0x18f)][_0x522747(0x180)]=0x0;if(_0x12df95[_0x522747(0x180)]){const _0x4116ac=this[_0x522747(0x2f6)][_0x522747(0x1d8)],_0xb7301b=_0x8dfe44['area2dMeshes'];this[_0x522747(0x2f6)][_0x522747(0x33f)][_0x522747(0x346)](UndoType[_0x522747(0x379)],{'scene':_0x4116ac,'addedAreas':_0x12df95,'removedAreas':_0x4ef9ef,'arr':_0xb7301b});}}[a0_0x19d63f(0x261)](_0x1be316){const _0x283fdd=a0_0x19d63f,_0x5746b0=this[_0x283fdd(0x2f6)][_0x283fdd(0x1f5)];_0x1be316[_0x283fdd(0x193)]===MouseButton[_0x283fdd(0x201)]&&this[_0x283fdd(0x246)]?(this[_0x283fdd(0x246)]['removeFromParent'](),removeArrayItem(this[_0x283fdd(0x2f6)][_0x283fdd(0x25d)][_0x283fdd(0x394)],this['movingArea'])):_0x5746b0[_0x283fdd(0x34a)]&&this[_0x283fdd(0x246)]&&_0x5746b0[_0x283fdd(0x11f)](this['movingArea']),this[_0x283fdd(0x246)]=null;}[a0_0x19d63f(0x1a0)](_0x3d3538){const _0x5d8ba4=a0_0x19d63f;downingLeft$2=_0x3d3538['button']===MouseButton[_0x5d8ba4(0x2c9)],posMoved$2=![];if(!downingLeft$2)return;const _0x8989c1=this[_0x5d8ba4(0x2f6)],_0x18909f=this[_0x5d8ba4(0x2f6)][_0x5d8ba4(0x25d)],_0x495add=_0x8989c1[_0x5d8ba4(0x1f5)],_0x275bed=_0x8989c1['mouseRaycaster']['ray']['intersectPlane'](planeXY,downPos$4);if(_0x18909f[_0x5d8ba4(0x371)]&&_0x18909f[_0x5d8ba4(0x25a)]&&!this[_0x5d8ba4(0x246)]){const _0x3dd06=new Area2d()[_0x5d8ba4(0xdd)]()['scaleTo'](0.01),_0x4bbac2=new Area2dMesh(_0x3dd06);_0x8989c1[_0x5d8ba4(0x1d8)][_0x5d8ba4(0x37e)](_0x4bbac2),_0x18909f[_0x5d8ba4(0x394)][_0x5d8ba4(0x32e)](_0x4bbac2),this['movingArea']=_0x4bbac2;if(_0x275bed){if(_0x495add[_0x5d8ba4(0x34a)]){const _0x1967e5=_0x495add[_0x5d8ba4(0x3da)]([_0x275bed['x']],[_0x275bed['y']]);_0x1967e5['length']&&(_0x275bed['x']+=_0x1967e5[0x0],_0x275bed['y']+=_0x1967e5[0x1]);}_0x275bed[_0x5d8ba4(0x2b8)](_0x4bbac2['vo'][_0x5d8ba4(0x3ce)]),_0x4bbac2['syncByVO']();}}if(!_0x18909f[_0x5d8ba4(0x40b)])return;oldPosArr$2=this[_0x5d8ba4(0x18f)]['map'](_0x13d28a=>_0x13d28a[_0x5d8ba4(0x3ce)]['clone']()),this[_0x5d8ba4(0x14b)]=updateOldMatArr(this[_0x5d8ba4(0x18f)]),_0x495add[_0x5d8ba4(0x34a)]&&_0x495add[_0x5d8ba4(0x2b7)]&&!this[_0x5d8ba4(0x14b)]&&(box1$2['makeEmpty'](),this['_selectedAreas'][_0x5d8ba4(0x156)](_0x23ecd9=>{const _0x4b162d=_0x5d8ba4;box2$2['setFromBufferAttribute'](_0x23ecd9[_0x4b162d(0x163)][_0x4b162d(0x3aa)][_0x4b162d(0x3ce)])[_0x4b162d(0x3b7)](_0x23ecd9['matrixWorld']),box1$2['union'](box2$2);}),box1$2[_0x5d8ba4(0x111)](boxCenter$4));}[a0_0x19d63f(0x2dd)](_0x9b5152){const _0x85de62=a0_0x19d63f,_0x3c60d6=this[_0x85de62(0x2f6)],_0x582090=_0x3c60d6[_0x85de62(0x1f5)],_0xb4854=this[_0x85de62(0x2f6)]['store'],_0x518d2a=_0x3c60d6[_0x85de62(0x143)];if(_0xb4854[_0x85de62(0x371)]&&!this[_0x85de62(0x246)]&&!_0xb4854['addingAreaExpanding']){const _0x2bc022=new Area2d()['setDefaultVerts'](),_0x52a52c=new Area2dMesh(_0x2bc022);_0x3c60d6['scene']['add'](_0x52a52c),_0xb4854[_0x85de62(0x394)][_0x85de62(0x32e)](_0x52a52c),this[_0x85de62(0x246)]=_0x52a52c;}const _0x9144c0=this[_0x85de62(0x246)];let _0x347e1e=[];if(downingLeft$2&&_0xb4854[_0x85de62(0x40b)])_0x347e1e=this[_0x85de62(0x18f)];else _0xb4854[_0x85de62(0x2ec)]&&(_0x347e1e=this[_0x85de62(0x18f)]);if(!_0x9144c0&&!_0x347e1e[_0x85de62(0x180)]){if(_0xb4854[_0x85de62(0x371)]&&_0xb4854[_0x85de62(0x25a)]&&_0x582090[_0x85de62(0x34a)]){const _0x580ab6=_0x518d2a[_0x85de62(0x106)][_0x85de62(0x288)](planeXY,point$2);_0x580ab6&&_0x582090['processAdhere']([_0x580ab6['x']],[_0x580ab6['y']]);}return;}const _0x764db1=_0x518d2a[_0x85de62(0x106)][_0x85de62(0x288)](planeXY,point$2);if(!_0x764db1)return;if(_0xb4854[_0x85de62(0x371)]){if(_0xb4854['addingAreaExpanding']&&downingLeft$2){if(_0x582090[_0x85de62(0x34a)]){const _0x7223b2=_0x582090[_0x85de62(0x3da)]([_0x764db1['x']],[_0x764db1['y']]);_0x7223b2['length']&&(_0x764db1['x']+=_0x7223b2[0x0],_0x764db1['y']+=_0x7223b2[0x1]);}centerPos[_0x85de62(0x357)](_0x764db1)[_0x85de62(0x24e)](downPos$4,0.5);const _0x2be2c6=Math[_0x85de62(0x3ca)](_0x764db1['x']-downPos$4['x']),_0x232d4b=Math[_0x85de62(0x3ca)](_0x764db1['y']-downPos$4['y']);_0x9144c0['vo'][_0x85de62(0xe3)](_0x2be2c6,_0x232d4b),centerPos[_0x85de62(0x2b8)](_0x9144c0['vo'][_0x85de62(0x3ce)]);}else{if(_0x582090[_0x85de62(0x34a)]){const _0x19f26b=_0x9144c0['vo'][_0x85de62(0x166)],_0x288e61=_0x9144c0['vo'][_0x85de62(0x2e1)],_0x375a8d=_0x582090[_0x85de62(0x3da)]([_0x764db1['x']-_0x288e61,_0x764db1['x'],_0x764db1['x']+_0x288e61],[_0x764db1['y']-_0x19f26b,_0x764db1['y'],_0x764db1['y']+_0x19f26b]);_0x375a8d[_0x85de62(0x180)]&&(_0x764db1['x']+=_0x375a8d[0x0],_0x764db1['y']+=_0x375a8d[0x1]);}_0x764db1['toArray'](_0x9144c0['vo'][_0x85de62(0x3ce)]);}_0x9144c0['syncByVO']();}else{if(_0xb4854[_0x85de62(0x2ec)]){if(_0x347e1e[_0x85de62(0x180)]!==0x1)return;const _0x172488=_0x347e1e[0x0]['getDistanceToPoint'](_0x764db1);Math['abs'](_0x172488)>0.01&&(_0x347e1e[0x0][_0x85de62(0x3dc)](!![]),_0x347e1e[0x0][_0x85de62(0x286)](_0x172488));}else{_0x764db1['sub'](downPos$4),_0x347e1e[_0x85de62(0x156)]((_0x289c09,_0x1f7e95)=>{const _0x1dfbfd=_0x85de62,_0x53a622=oldMatArr[_0x1f7e95];if(_0x53a622){const _0x2df16d=_0x764db1['clone']()[_0x1dfbfd(0x3b7)](_0x53a622);_0x289c09['position'][_0x1dfbfd(0x357)](oldPosArr$2[_0x1f7e95])[_0x1dfbfd(0x37e)](_0x2df16d);}else _0x289c09[_0x1dfbfd(0x3ce)][_0x1dfbfd(0x357)](oldPosArr$2[_0x1f7e95])['add'](_0x764db1);_0x289c09[_0x1dfbfd(0x38c)]();}),posMoved$2=!![];if(_0x3c60d6[_0x85de62(0x1f5)][_0x85de62(0x34a)]&&_0x3c60d6[_0x85de62(0x1f5)][_0x85de62(0x2b7)]&&!this[_0x85de62(0x14b)]){const _0x207dfe=[box1$2[_0x85de62(0x11d)]['x']+_0x764db1['x'],boxCenter$4['x']+_0x764db1['x'],box1$2[_0x85de62(0x40d)]['x']+_0x764db1['x']],_0x9c1c54=[box1$2[_0x85de62(0x11d)]['y']+_0x764db1['y'],boxCenter$4['y']+_0x764db1['y'],box1$2[_0x85de62(0x40d)]['y']+_0x764db1['y']],_0x142e41=_0x3c60d6[_0x85de62(0x1f5)]['processAdhere'](_0x207dfe,_0x9c1c54);if(_0x142e41['length']){const [_0x4fe6a6,_0x1b6c85]=_0x142e41;_0x347e1e[_0x85de62(0x156)](_0x2be240=>{const _0x4ca92b=_0x85de62;_0x2be240[_0x4ca92b(0x3ce)]['x']+=_0x4fe6a6,_0x2be240[_0x4ca92b(0x3ce)]['y']+=_0x1b6c85,_0x2be240[_0x4ca92b(0x38c)]();});}}}}}['pointerUpMoved'](_0x45c709){const _0x49fefa=a0_0x19d63f;if(posMoved$2){updateParentGroups(this['_selectedAreas']);if(this[_0x49fefa(0x18f)]['length']){const _0x544fab=this[_0x49fefa(0x18f)][_0x49fefa(0x3b6)](),_0x55efaa=oldPosArr$2[_0x49fefa(0x3b6)](),_0x345e1d=_0x544fab['map'](_0x69ee53=>_0x69ee53['position']['clone']());this[_0x49fefa(0x2f6)][_0x49fefa(0x33f)]['addAction'](UndoType[_0x49fefa(0x1ca)],{'items':_0x544fab,'posOld':_0x55efaa,'posNew':_0x345e1d});}}downingLeft$2=![],this[_0x49fefa(0x261)](_0x45c709);}[a0_0x19d63f(0x2f4)](_0x5aa5a9){const _0x15893d=a0_0x19d63f;downingLeft$2=![],this[_0x15893d(0x261)](_0x5aa5a9);const _0x2ff806=this['scene3d'],_0x42b8e5=this[_0x15893d(0x2f6)]['store'];if(_0x5aa5a9[_0x15893d(0x193)]===MouseButton[_0x15893d(0x201)]){if(_0x42b8e5[_0x15893d(0x371)])_0x42b8e5[_0x15893d(0x1aa)]();else _0x42b8e5[_0x15893d(0x2ec)]&&this[_0x15893d(0x18f)][_0x15893d(0x180)]===0x1&&(this[_0x15893d(0x18f)][0x0]['clearDaft'](),this['_selectedAreas'][0x0][_0x15893d(0x3dc)](![]),_0x2ff806[_0x15893d(0x415)][_0x15893d(0x21f)]['length']!==0x1&&_0x42b8e5[_0x15893d(0x1aa)]());this[_0x15893d(0x2fa)]();return;}if(_0x42b8e5['stateShapeOffsetting']&&this[_0x15893d(0x18f)][_0x15893d(0x180)]===0x1){let _0x229906=this[_0x15893d(0x18f)][0x0];_0x229906[_0x15893d(0x380)](_0x2ff806[_0x15893d(0x1d8)],_0x42b8e5);return;}if(!_0x42b8e5['stateFree'])return;const _0x185580=_0x2ff806[_0x15893d(0x143)],_0x371f21=_0x185580['intersectObjects'](_0x42b8e5[_0x15893d(0x394)],![]);if(!_0x371f21[_0x15893d(0x180)]){!KeyboardState['keyDownCtrl']&&(this[_0x15893d(0x18f)][_0x15893d(0x180)]&&this['scene3d'][_0x15893d(0x1d8)][_0x15893d(0x213)](Scene3dEvent[_0x15893d(0x419)]),this[_0x15893d(0x2fa)]());return;}_0x42b8e5[_0x15893d(0x16c)]=!![];const _0x3e3bfe=_0x371f21[0x0][_0x15893d(0x3ec)];let _0x355ae4;KeyboardState[_0x15893d(0x15f)]?!this['_selectedAreas'][_0x15893d(0x119)](_0x3e3bfe)?(_0x355ae4=_0x3e3bfe,this['_selectedAreas'][_0x15893d(0x32e)](_0x3e3bfe)):(_0x3e3bfe[_0x15893d(0x341)](![]),removeArrayItem(this[_0x15893d(0x18f)],_0x3e3bfe)):(!this[_0x15893d(0x18f)][_0x15893d(0x119)](_0x3e3bfe)&&this[_0x15893d(0x2fa)](),_0x355ae4=_0x3e3bfe,this[_0x15893d(0x18f)]=[_0x3e3bfe]);if(!_0x355ae4)return;_0x355ae4[_0x15893d(0x341)](!![]);const _0x3bc70b=Scene3dEvent['area2dSelected'];_0x3bc70b[_0x15893d(0x24f)][_0x15893d(0x15e)]=_0x355ae4['vo'][_0x15893d(0x3b2)],_0x3bc70b[_0x15893d(0x24f)]['opacity']=_0x355ae4['vo'][_0x15893d(0x385)],_0x2ff806[_0x15893d(0x1d8)]['dispatchEvent'](_0x3bc70b);}}const stateAddingArea=a0_0x19d63f(0x371),stateEditingVert2d='stateEditingVert2d',stateEditingLines2d=a0_0x19d63f(0x331),stateShapeOffsetting=a0_0x19d63f(0x2ec),stateAddingLines2d=a0_0x19d63f(0x31d),statePastingItems='statePastingItems',stateFree=a0_0x19d63f(0x40b);let state=stateFree;class MainStore{[a0_0x19d63f(0x2f6)];[a0_0x19d63f(0x394)]=[];[a0_0x19d63f(0xf2)]=[];[a0_0x19d63f(0x161)]=[];['selectedGroupContents']=[];[a0_0x19d63f(0x25a)]=![];[a0_0x19d63f(0x16c)]=![];constructor(_0x2660cd){const _0x28e413=a0_0x19d63f;this[_0x28e413(0x2f6)]=_0x2660cd;}[a0_0x19d63f(0x3e5)](){const _0x323873=a0_0x19d63f,_0x1f2780=this[_0x323873(0x2f6)]['_area2dMeshPlugin']['_selectedAreas'],_0x475388=this[_0x323873(0x2f6)][_0x323873(0x415)][_0x323873(0x21f)],_0x3a78a0=[],_0x4d989b=this['scene3d'][_0x323873(0x20c)][_0x323873(0x11e)];_0x4d989b[_0x323873(0x156)](_0x2e26f3=>{const _0x5f13ab=_0x323873;_0x3a78a0[_0x5f13ab(0x32e)](..._0x2e26f3[_0x5f13ab(0x214)]());});const _0x17e9a6=_0x1f2780[_0x323873(0x2c7)](_0x475388)[_0x323873(0x2c7)](_0x4d989b);return arrAsubB(_0x17e9a6,_0x3a78a0),_0x17e9a6;}[a0_0x19d63f(0x1a5)](){const _0x292fce=a0_0x19d63f;this[_0x292fce(0x2f6)][_0x292fce(0xe6)][_0x292fce(0x2fa)](),this['scene3d'][_0x292fce(0x415)][_0x292fce(0x2fa)](),this[_0x292fce(0x2f6)][_0x292fce(0x20c)][_0x292fce(0x2fa)]();}['addCopiedItem'](_0x1f7877){const _0x4b8254=a0_0x19d63f;if(_0x1f7877 instanceof Area2dMesh)this[_0x4b8254(0x394)][_0x4b8254(0x32e)](_0x1f7877);else{if(_0x1f7877 instanceof Lines2dEntity)this[_0x4b8254(0xf2)][_0x4b8254(0x32e)](_0x1f7877);else _0x1f7877 instanceof GroupEntity&&(this[_0x4b8254(0x161)][_0x4b8254(0x32e)](_0x1f7877),_0x1f7877['getChildEntities']()[_0x4b8254(0x156)](_0x31493c=>{const _0xea4aff=_0x4b8254;if(_0x31493c instanceof Area2dMesh)this['area2dMeshes'][_0xea4aff(0x32e)](_0x31493c);else{if(_0x31493c instanceof Lines2dEntity)this['lines2dEntities']['push'](_0x31493c);else _0x31493c instanceof GroupEntity&&this[_0xea4aff(0x161)][_0xea4aff(0x32e)](_0x31493c);}}));}}['areasToLines2d'](_0x4bebfe){const _0x18fe79=a0_0x19d63f;if(!_0x4bebfe[_0x18fe79(0x180)])return;const _0x171e98=area2dsToClosedLines2ds(_0x4bebfe);_0x171e98['forEach'](_0x28300b=>{const _0x17be79=_0x18fe79;this[_0x17be79(0x2f6)]['scene'][_0x17be79(0x37e)](_0x28300b),this['lines2dEntities'][_0x17be79(0x32e)](_0x28300b);}),_0x4bebfe[_0x18fe79(0x156)](_0x41aead=>_0x41aead[_0x18fe79(0x11a)]()),arrAsubB(this[_0x18fe79(0x394)],_0x4bebfe);}[a0_0x19d63f(0xfa)](_0x115ada){const _0x21a6bc=a0_0x19d63f;if(!_0x115ada[_0x21a6bc(0x180)])return;_0x115ada[_0x21a6bc(0x156)](_0x525d27=>_0x525d27[_0x21a6bc(0x277)]());const _0x3f5335=closedLines2dEntitiesToArea2ds(_0x115ada);_0x3f5335['forEach'](_0x3d949b=>{const _0x5c569c=_0x21a6bc;_0x3d949b['reCenter'](),this[_0x5c569c(0x2f6)][_0x5c569c(0x1d8)][_0x5c569c(0x37e)](_0x3d949b),this[_0x5c569c(0x394)][_0x5c569c(0x32e)](_0x3d949b);}),_0x115ada[_0x21a6bc(0x156)](_0xb98c3=>_0xb98c3[_0x21a6bc(0x11a)]()),arrAsubB(this[_0x21a6bc(0xf2)],_0x115ada);}[a0_0x19d63f(0x281)](_0x127f97,_0x13606f){const _0x3d270d=a0_0x19d63f;let _0x26c607=_0x127f97['renderOrder'];_0x13606f?_0x26c607++:_0x26c607--,_0x127f97[_0x3d270d(0x23a)](_0x26c607);}[a0_0x19d63f(0x15b)](){const _0x20ba6d=a0_0x19d63f;this[_0x20ba6d(0x394)][_0x20ba6d(0x156)](_0x85dd56=>_0x85dd56[_0x20ba6d(0x11a)]()),this[_0x20ba6d(0x394)][_0x20ba6d(0x180)]=0x0;}[a0_0x19d63f(0xf1)](){const _0x1489a8=a0_0x19d63f,_0x246e42=this[_0x1489a8(0x394)]['map'](_0x2cfa92=>{const _0x3e1eb6=_0x1489a8;return _0x2cfa92[_0x3e1eb6(0x38c)](),_0x2cfa92['vo']['toJsonObj']();}),_0x476dae=this[_0x1489a8(0xf2)]['map'](_0x568021=>{const _0x5e2946=_0x1489a8;return _0x568021[_0x5e2946(0x38c)](),_0x568021['vo'][_0x5e2946(0x19a)]();}),_0x2fa316=[];this[_0x1489a8(0x161)][_0x1489a8(0x156)](_0x42fa47=>{const _0x1ec69f=_0x1489a8;_0x42fa47['updateVO']();if(_0x42fa47['vo']['isEmptyGroup']())return;_0x2fa316[_0x1ec69f(0x32e)](_0x42fa47['vo'][_0x1ec69f(0x19a)]());});const _0x32b7cf={'area2ds':_0x246e42,'lines2d':_0x476dae,'groups':_0x2fa316,'version':WorldConfig[_0x1489a8(0x2d1)]};return _0x32b7cf;}[a0_0x19d63f(0x3b5)](_0xba6f0d){const _0x2b9e8c=a0_0x19d63f;if(!_0xba6f0d)return;this[_0x2b9e8c(0x15b)]();const _0x1091a6=this[_0x2b9e8c(0x2f6)]['scene'];_0xba6f0d[_0x2b9e8c(0x325)][_0x2b9e8c(0x156)](_0xc88d6c=>{const _0x882296=_0x2b9e8c,_0x5ab0cc=new Area2d()[_0x882296(0x366)](_0xc88d6c),_0x41e53f=new Area2dMesh(_0x5ab0cc);_0x1091a6['add'](_0x41e53f),this[_0x882296(0x394)][_0x882296(0x32e)](_0x41e53f);});_0xba6f0d[_0x2b9e8c(0x202)]&&_0xba6f0d[_0x2b9e8c(0x202)][_0x2b9e8c(0x156)](_0x41ebc2=>{const _0x21ef01=_0x2b9e8c,_0x48317d=new Lines2d()[_0x21ef01(0x366)](_0x41ebc2),_0x5a209b=new Lines2dEntity(_0x48317d);_0x1091a6[_0x21ef01(0x37e)](_0x5a209b),this[_0x21ef01(0xf2)][_0x21ef01(0x32e)](_0x5a209b);});if(_0xba6f0d[_0x2b9e8c(0x161)]){const _0x1ad60e=_0xba6f0d[_0x2b9e8c(0x161)][_0x2b9e8c(0x24a)](_0x10d316=>new GroupVO()[_0x2b9e8c(0x366)](_0x10d316)),_0x2706b9=_0x1ad60e[_0x2b9e8c(0x24a)](_0x4f14c4=>new GroupEntity(_0x4f14c4));this[_0x2b9e8c(0x161)]=_0x2706b9[_0x2b9e8c(0x3b6)]();let _0x3d21e9=[];const _0xce35ad=[];_0x2706b9[_0x2b9e8c(0x156)](_0x50fd13=>{const _0x377987=_0x2b9e8c;_0x50fd13['vo'][_0x377987(0x2fd)][_0x377987(0x180)]===0x0&&(_0x50fd13[_0x377987(0x1d0)](this),_0x3d21e9[_0x377987(0x32e)](_0x50fd13),_0xce35ad[_0x377987(0x32e)](_0x50fd13['vo']['id']));});const _0x2f913c=[_0x3d21e9[_0x2b9e8c(0x3b6)]()];while(_0x3d21e9[_0x2b9e8c(0x180)]<_0x2706b9[_0x2b9e8c(0x180)]){const _0x40afa2=[];_0x2706b9[_0x2b9e8c(0x156)](_0x5b701b=>{const _0x29f534=_0x2b9e8c;if(_0x3d21e9['includes'](_0x5b701b))return;const _0x8d60e9=!_0x5b701b['vo'][_0x29f534(0x2fd)][_0x29f534(0x138)](_0x261448=>!_0xce35ad[_0x29f534(0x119)](_0x261448));_0x8d60e9&&(_0x40afa2[_0x29f534(0x32e)](_0x5b701b),_0x5b701b[_0x29f534(0x1d0)](this));}),_0x2f913c['push'](_0x40afa2),_0x40afa2['forEach'](_0x477ea0=>{const _0x29cb41=_0x2b9e8c;_0x3d21e9['push'](_0x477ea0),_0xce35ad[_0x29cb41(0x32e)](_0x477ea0['vo']['id']);});}_0x3d21e9[_0x2b9e8c(0x156)](_0x249d7f=>{const _0x1bf0f1=_0x2b9e8c;!_0x249d7f[_0x1bf0f1(0x1b1)]&&this[_0x1bf0f1(0x2f6)][_0x1bf0f1(0x1d8)][_0x1bf0f1(0x37e)](_0x249d7f);}),_0x2f913c[_0x2b9e8c(0x156)](_0x315191=>_0x315191['forEach'](_0x207b41=>{const _0x3596b4=_0x2b9e8c;_0x207b41[_0x3596b4(0x1a2)]();}));}}get[a0_0x19d63f(0x40b)](){return state===stateFree;}['freeState'](){state=stateFree;}get[a0_0x19d63f(0x371)](){return state===stateAddingArea;}[a0_0x19d63f(0x239)](){state=stateAddingArea;}get[a0_0x19d63f(0x231)](){return state===stateEditingVert2d;}[a0_0x19d63f(0xe5)](){state=stateEditingVert2d;}get['stateShapeOffsetting'](){return state===stateShapeOffsetting;}[a0_0x19d63f(0x219)](){state=stateShapeOffsetting;}get[a0_0x19d63f(0x31d)](){return state===stateAddingLines2d;}[a0_0x19d63f(0x3c4)](){state=stateAddingLines2d;}get[a0_0x19d63f(0x331)](){return state===stateEditingLines2d;}[a0_0x19d63f(0x2a3)](){state=stateEditingLines2d;}get['statePastingItems'](){return state===statePastingItems;}[a0_0x19d63f(0x1f9)](){state=statePastingItems;}}class SelectionHelper{constructor(_0x31bd8c,_0x10fb04){const _0x1e91d7=a0_0x19d63f;this[_0x1e91d7(0x18a)]=document['createElement'](_0x1e91d7(0x221)),this[_0x1e91d7(0x18a)][_0x1e91d7(0x3d2)]['add'](_0x10fb04),this[_0x1e91d7(0x18a)][_0x1e91d7(0x1b3)]['pointerEvents']=_0x1e91d7(0x1cc),this[_0x1e91d7(0x2db)]=_0x31bd8c,this[_0x1e91d7(0x20d)]=new Vector2(),this['pointTopLeft']=new Vector2(),this[_0x1e91d7(0x38f)]=new Vector2(),this[_0x1e91d7(0x2d4)]=![],this['enabled']=!![],this[_0x1e91d7(0x12c)]=function(_0x492c31){const _0x39e8f1=_0x1e91d7;if(this[_0x39e8f1(0x2d8)]===![]||!_0x492c31[_0x39e8f1(0x3c3)])return;this[_0x39e8f1(0x2d4)]=!![],this[_0x39e8f1(0x3f6)](_0x492c31);}[_0x1e91d7(0x3d4)](this),this[_0x1e91d7(0x370)]=function(_0x2a11e3){const _0x717fb1=_0x1e91d7;if(this[_0x717fb1(0x2d8)]===![]||!_0x2a11e3['ctrlKey'])return;this['isDown']&&this[_0x717fb1(0x238)](_0x2a11e3);}[_0x1e91d7(0x3d4)](this),this[_0x1e91d7(0x23e)]=function(){const _0x5131bc=_0x1e91d7;if(this[_0x5131bc(0x2d8)]===![])return;this[_0x5131bc(0x2d4)]=![],this['onSelectOver']();}['bind'](this),this[_0x1e91d7(0x2db)][_0x1e91d7(0xf9)]['addEventListener']('pointerdown',this[_0x1e91d7(0x12c)]),this[_0x1e91d7(0x2db)][_0x1e91d7(0xf9)][_0x1e91d7(0x31b)](_0x1e91d7(0x355),this[_0x1e91d7(0x370)]),this[_0x1e91d7(0x2db)][_0x1e91d7(0xf9)][_0x1e91d7(0x31b)](_0x1e91d7(0x340),this[_0x1e91d7(0x23e)]);}[a0_0x19d63f(0x3a5)](){const _0x3add62=a0_0x19d63f;this[_0x3add62(0x2db)]['domElement'][_0x3add62(0x27b)](_0x3add62(0x126),this['onPointerDown']),this[_0x3add62(0x2db)][_0x3add62(0xf9)][_0x3add62(0x27b)](_0x3add62(0x355),this[_0x3add62(0x370)]),this[_0x3add62(0x2db)][_0x3add62(0xf9)][_0x3add62(0x27b)]('pointerup',this['onPointerUp']);}[a0_0x19d63f(0x3f6)](_0x6ba077){const _0x27e993=a0_0x19d63f;this[_0x27e993(0x2db)][_0x27e993(0xf9)][_0x27e993(0x2e9)][_0x27e993(0x2f1)](this[_0x27e993(0x18a)]),this[_0x27e993(0x18a)][_0x27e993(0x1b3)][_0x27e993(0x2c9)]=_0x6ba077[_0x27e993(0x142)]+'px',this[_0x27e993(0x18a)][_0x27e993(0x1b3)]['top']=_0x6ba077[_0x27e993(0x386)]+'px',this[_0x27e993(0x18a)]['style'][_0x27e993(0x3e7)]=_0x27e993(0x3d6),this[_0x27e993(0x18a)][_0x27e993(0x1b3)]['height']=_0x27e993(0x3d6),this[_0x27e993(0x20d)]['x']=_0x6ba077[_0x27e993(0x142)],this[_0x27e993(0x20d)]['y']=_0x6ba077['clientY'];}['onSelectMove'](_0x1e3d8e){const _0x17c492=a0_0x19d63f;if(!this[_0x17c492(0x2d8)])return;this[_0x17c492(0x38f)]['x']=Math[_0x17c492(0x40d)](this['startPoint']['x'],_0x1e3d8e[_0x17c492(0x142)]),this[_0x17c492(0x38f)]['y']=Math['max'](this[_0x17c492(0x20d)]['y'],_0x1e3d8e[_0x17c492(0x386)]),this['pointTopLeft']['x']=Math['min'](this['startPoint']['x'],_0x1e3d8e[_0x17c492(0x142)]),this[_0x17c492(0x271)]['y']=Math[_0x17c492(0x11d)](this['startPoint']['y'],_0x1e3d8e[_0x17c492(0x386)]),this[_0x17c492(0x18a)][_0x17c492(0x1b3)][_0x17c492(0x2c9)]=this[_0x17c492(0x271)]['x']+'px',this['element'][_0x17c492(0x1b3)]['top']=this['pointTopLeft']['y']+'px',this['element'][_0x17c492(0x1b3)][_0x17c492(0x3e7)]=this['pointBottomRight']['x']-this['pointTopLeft']['x']+'px',this[_0x17c492(0x18a)]['style'][_0x17c492(0x1be)]=this['pointBottomRight']['y']-this[_0x17c492(0x271)]['y']+'px';}[a0_0x19d63f(0x309)](){const _0x104cb1=a0_0x19d63f;this['element'][_0x104cb1(0x2e9)]&&this['element'][_0x104cb1(0x2e9)][_0x104cb1(0x1c3)](this[_0x104cb1(0x18a)]);}}const _frustum=new Frustum(),_center=new Vector3(),_tmpPoint=new Vector3(),_vecNear=new Vector3(),_vecTopLeft=new Vector3(),_vecTopRight=new Vector3(),_vecDownRight=new Vector3(),_vecDownLeft=new Vector3(),_vecFarTopLeft=new Vector3(),_vecFarTopRight=new Vector3(),_vecFarDownRight=new Vector3(),_vecFarDownLeft=new Vector3(),_vectemp1=new Vector3(),_vectemp2=new Vector3(),_vectemp3=new Vector3(),_matrix=new Matrix4(),_quaternion=new Quaternion(),_scale$1=new Vector3();class SelectionBox{constructor(_0x177d8c,_0x579aa3,_0x22d2a0=Number[a0_0x19d63f(0x406)]){const _0x305949=a0_0x19d63f;this[_0x305949(0x253)]=_0x177d8c,this[_0x305949(0x1d8)]=_0x579aa3,this[_0x305949(0x20d)]=new Vector3(),this[_0x305949(0x362)]=new Vector3(),this[_0x305949(0x3e1)]=[],this['instances']={},this[_0x305949(0x2e2)]=_0x22d2a0;}[a0_0x19d63f(0x317)](_0x40d75b,_0x39666c){const _0x1bfaea=a0_0x19d63f;return this[_0x1bfaea(0x20d)]=_0x40d75b||this['startPoint'],this[_0x1bfaea(0x362)]=_0x39666c||this[_0x1bfaea(0x362)],this['collection']=[],this[_0x1bfaea(0x31f)](this[_0x1bfaea(0x20d)],this[_0x1bfaea(0x362)]),this[_0x1bfaea(0x304)](_frustum,this[_0x1bfaea(0x1d8)]),this['collection'];}['selectMeshes'](_0x4df70e){const _0x9cfd69=a0_0x19d63f,_0x3106ba=[];return this[_0x9cfd69(0x31f)](this[_0x9cfd69(0x20d)],this[_0x9cfd69(0x362)]),_0x4df70e[_0x9cfd69(0x156)](_0x14437b=>{const _0x274a89=_0x9cfd69;_0x14437b['updateMatrixWorld'](),_center[_0x274a89(0x13d)](_0x14437b[_0x274a89(0x2d7)]),_frustum[_0x274a89(0x1da)](_center)&&(this[_0x274a89(0x3e1)]['push'](_0x14437b),_0x3106ba['push'](_0x14437b));}),_0x3106ba;}['selectLines2ds'](_0x56eaa5){const _0x293d04=a0_0x19d63f,_0x27e874=[];return this[_0x293d04(0x31f)](this['startPoint'],this[_0x293d04(0x362)]),_0x56eaa5[_0x293d04(0x156)](_0x1f891d=>{const _0x133cba=_0x293d04,_0x38176d=_0x1f891d[_0x133cba(0xd5)](),_0x1f3af6=_0x38176d[_0x133cba(0x138)](_0x4cd6a2=>_frustum[_0x133cba(0x1da)](_0x4cd6a2));_0x1f3af6&&_0x27e874['push'](_0x1f891d);}),_0x27e874;}[a0_0x19d63f(0x31f)](_0xac9bc,_0x8ff861){const _0x406d7f=a0_0x19d63f;_0xac9bc=_0xac9bc||this[_0x406d7f(0x20d)],_0x8ff861=_0x8ff861||this[_0x406d7f(0x362)];_0xac9bc['x']===_0x8ff861['x']&&(_0x8ff861['x']+=Number['EPSILON']);_0xac9bc['y']===_0x8ff861['y']&&(_0x8ff861['y']+=Number[_0x406d7f(0x294)]);this[_0x406d7f(0x253)][_0x406d7f(0x2ee)](),this[_0x406d7f(0x253)][_0x406d7f(0x105)]();if(this[_0x406d7f(0x253)][_0x406d7f(0x3fb)]){_tmpPoint['copy'](_0xac9bc),_tmpPoint['x']=Math[_0x406d7f(0x11d)](_0xac9bc['x'],_0x8ff861['x']),_tmpPoint['y']=Math[_0x406d7f(0x40d)](_0xac9bc['y'],_0x8ff861['y']),_0x8ff861['x']=Math['max'](_0xac9bc['x'],_0x8ff861['x']),_0x8ff861['y']=Math[_0x406d7f(0x11d)](_0xac9bc['y'],_0x8ff861['y']),_vecNear[_0x406d7f(0x13d)](this[_0x406d7f(0x253)][_0x406d7f(0x2d7)]),_vecTopLeft[_0x406d7f(0x357)](_tmpPoint),_vecTopRight[_0x406d7f(0x3b0)](_0x8ff861['x'],_tmpPoint['y'],0x0),_vecDownRight['copy'](_0x8ff861),_vecDownLeft[_0x406d7f(0x3b0)](_tmpPoint['x'],_0x8ff861['y'],0x0),_vecTopLeft['unproject'](this['camera']),_vecTopRight[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecDownRight['unproject'](this[_0x406d7f(0x253)]),_vecDownLeft[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vectemp1[_0x406d7f(0x357)](_vecTopLeft)[_0x406d7f(0x343)](_vecNear),_vectemp2[_0x406d7f(0x357)](_vecTopRight)[_0x406d7f(0x343)](_vecNear),_vectemp3['copy'](_vecDownRight)[_0x406d7f(0x343)](_vecNear),_vectemp1[_0x406d7f(0x404)](),_vectemp2['normalize'](),_vectemp3['normalize'](),_vectemp1[_0x406d7f(0x365)](this[_0x406d7f(0x2e2)]),_vectemp2[_0x406d7f(0x365)](this[_0x406d7f(0x2e2)]),_vectemp3[_0x406d7f(0x365)](this[_0x406d7f(0x2e2)]),_vectemp1[_0x406d7f(0x37e)](_vecNear),_vectemp2[_0x406d7f(0x37e)](_vecNear),_vectemp3['add'](_vecNear);const _0x5240c6=_frustum[_0x406d7f(0x224)];_0x5240c6[0x0][_0x406d7f(0x1e1)](_vecNear,_vecTopLeft,_vecTopRight),_0x5240c6[0x1][_0x406d7f(0x1e1)](_vecNear,_vecTopRight,_vecDownRight),_0x5240c6[0x2][_0x406d7f(0x1e1)](_vecDownRight,_vecDownLeft,_vecNear),_0x5240c6[0x3]['setFromCoplanarPoints'](_vecDownLeft,_vecTopLeft,_vecNear),_0x5240c6[0x4]['setFromCoplanarPoints'](_vecTopRight,_vecDownRight,_vecDownLeft),_0x5240c6[0x5]['setFromCoplanarPoints'](_vectemp3,_vectemp2,_vectemp1),_0x5240c6[0x5]['normal'][_0x406d7f(0x365)](-0x1);}else{if(this['camera']['isOrthographicCamera']){const _0x54750e=Math[_0x406d7f(0x11d)](_0xac9bc['x'],_0x8ff861['x']),_0x5869be=Math['max'](_0xac9bc['y'],_0x8ff861['y']),_0x3719ea=Math[_0x406d7f(0x40d)](_0xac9bc['x'],_0x8ff861['x']),_0x37f16d=Math[_0x406d7f(0x11d)](_0xac9bc['y'],_0x8ff861['y']);_vecTopLeft[_0x406d7f(0x3b0)](_0x54750e,_0x5869be,-0x1),_vecTopRight['set'](_0x3719ea,_0x5869be,-0x1),_vecDownRight[_0x406d7f(0x3b0)](_0x3719ea,_0x37f16d,-0x1),_vecDownLeft[_0x406d7f(0x3b0)](_0x54750e,_0x37f16d,-0x1),_vecFarTopLeft[_0x406d7f(0x3b0)](_0x54750e,_0x5869be,0x1),_vecFarTopRight['set'](_0x3719ea,_0x5869be,0x1),_vecFarDownRight['set'](_0x3719ea,_0x37f16d,0x1),_vecFarDownLeft[_0x406d7f(0x3b0)](_0x54750e,_0x37f16d,0x1),_vecTopLeft[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecTopRight[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecDownRight[_0x406d7f(0x1f2)](this['camera']),_vecDownLeft[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecFarTopLeft[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecFarTopRight[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecFarDownRight[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]),_vecFarDownLeft[_0x406d7f(0x1f2)](this[_0x406d7f(0x253)]);const _0x2b3f0f=_frustum[_0x406d7f(0x224)];_0x2b3f0f[0x0][_0x406d7f(0x1e1)](_vecTopLeft,_vecFarTopLeft,_vecFarTopRight),_0x2b3f0f[0x1][_0x406d7f(0x1e1)](_vecTopRight,_vecFarTopRight,_vecFarDownRight),_0x2b3f0f[0x2]['setFromCoplanarPoints'](_vecFarDownRight,_vecFarDownLeft,_vecDownLeft),_0x2b3f0f[0x3][_0x406d7f(0x1e1)](_vecFarDownLeft,_vecFarTopLeft,_vecTopLeft),_0x2b3f0f[0x4][_0x406d7f(0x1e1)](_vecTopRight,_vecDownRight,_vecDownLeft),_0x2b3f0f[0x5][_0x406d7f(0x1e1)](_vecFarDownRight,_vecFarTopRight,_vecFarTopLeft),_0x2b3f0f[0x5][_0x406d7f(0x171)][_0x406d7f(0x365)](-0x1);}else;}}['searchChildInFrustum'](_0x48d214,_0x1d34a7){const _0x191c48=a0_0x19d63f;if(_0x1d34a7[_0x191c48(0x393)]||_0x1d34a7[_0x191c48(0x34b)]||_0x1d34a7[_0x191c48(0x344)]){if(_0x1d34a7[_0x191c48(0x1e0)]){this[_0x191c48(0x242)][_0x1d34a7[_0x191c48(0x172)]]=[];for(let _0x3676d9=0x0;_0x3676d9<_0x1d34a7[_0x191c48(0x37a)];_0x3676d9++){_0x1d34a7[_0x191c48(0xdf)](_0x3676d9,_matrix),_matrix['decompose'](_center,_quaternion,_scale$1),_center[_0x191c48(0x3b7)](_0x1d34a7[_0x191c48(0x2d7)]),_0x48d214[_0x191c48(0x1da)](_center)&&this['instances'][_0x1d34a7[_0x191c48(0x172)]]['push'](_0x3676d9);}}else{if(_0x1d34a7[_0x191c48(0x163)][_0x191c48(0x1c4)]===null)_0x1d34a7['geometry'][_0x191c48(0x135)]();_center['copy'](_0x1d34a7[_0x191c48(0x163)]['boundingSphere'][_0x191c48(0x169)]),_center[_0x191c48(0x3b7)](_0x1d34a7[_0x191c48(0x2d7)]),_0x48d214[_0x191c48(0x1da)](_center)&&this[_0x191c48(0x3e1)][_0x191c48(0x32e)](_0x1d34a7);}}if(_0x1d34a7[_0x191c48(0x34e)][_0x191c48(0x180)]>0x0)for(let _0x2c30b3=0x0;_0x2c30b3<_0x1d34a7[_0x191c48(0x34e)][_0x191c48(0x180)];_0x2c30b3++){this[_0x191c48(0x304)](_0x48d214,_0x1d34a7[_0x191c48(0x34e)][_0x2c30b3]);}}}const dv=WorldConfig[a0_0x19d63f(0x39f)]*WorldConfig[a0_0x19d63f(0x39f)],de=WorldConfig[a0_0x19d63f(0x2e7)]*WorldConfig[a0_0x19d63f(0x2e7)],dj=WorldConfig[a0_0x19d63f(0x23d)]*WorldConfig['adhereRadiusForJoin'],editVertStart=new a0_0x412c21['Vector3'](),pointOnPlane=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),downPos$3=new a0_0x412c21['Vector3'](),lineStart=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),lineEnd=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),tmpPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),spCircle=new a0_0x412c21[(a0_0x19d63f(0x3d8))]()[a0_0x19d63f(0x310)](assets3dBaseUrl+'texture/circle.png'),pSelectMat=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0x10,'sizeAttenuation':![],'map':spCircle,'alphaTest':0.5,'color':'#000','depthTest':![],'depthWrite':![],'transparent':!![]}),pHoverMat=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0xc,'sizeAttenuation':![],'map':spCircle,'color':'#0f0','alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]}),spCross=new a0_0x412c21[(a0_0x19d63f(0x3d8))]()[a0_0x19d63f(0x310)](assets3dBaseUrl+a0_0x19d63f(0x375)),pCrossMat=new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0x18,'sizeAttenuation':![],'map':spCross,'color':a0_0x19d63f(0x195),'alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]}),spDisc=new a0_0x412c21[(a0_0x19d63f(0x3d8))]()[a0_0x19d63f(0x310)](assets3dBaseUrl+a0_0x19d63f(0x314));new a0_0x412c21[(a0_0x19d63f(0x24d))]({'size':0xc,'sizeAttenuation':![],'color':a0_0x19d63f(0x14f),'map':spDisc,'alphaTest':0.5,'depthTest':![],'depthWrite':![],'transparent':!![]});const pointGeo=new a0_0x412c21[(a0_0x19d63f(0x27a))]();pointGeo['setAttribute']('position',new a0_0x412c21[(a0_0x19d63f(0x3b1))](new Float32Array([0x0,0x0,0x0]),0x3));const hoverEdgePointer=new a0_0x412c21[(a0_0x19d63f(0x1dc))](pointGeo,pHoverMat),hoverVertexPointer=new a0_0x412c21['Points'](pointGeo,pSelectMat);hoverEdgePointer['renderOrder']=WorldConfig['order_vert_edit'],hoverVertexPointer['renderOrder']=WorldConfig[a0_0x19d63f(0x1c1)];const crossSetGeo=new a0_0x412c21[(a0_0x19d63f(0x27a))]();crossSetGeo[a0_0x19d63f(0x248)](a0_0x19d63f(0x3ce),new a0_0x412c21[(a0_0x19d63f(0x3b1))](new Float32Array(new Array(0x1b)[a0_0x19d63f(0x128)](0x0)),0x3));const crossSetPointer=new a0_0x412c21[(a0_0x19d63f(0x1dc))](crossSetGeo,pCrossMat);crossSetPointer[a0_0x19d63f(0x336)]=WorldConfig[a0_0x19d63f(0x174)];const ringGeo=new a0_0x412c21[(a0_0x19d63f(0x3c0))](0.4,0.45,0x10),joinedMark=new a0_0x412c21[(a0_0x19d63f(0x19f))](ringGeo,new a0_0x412c21[(a0_0x19d63f(0x1fc))]({'color':a0_0x19d63f(0x378),'depthTest':![],'depthWrite':![]}));joinedMark[a0_0x19d63f(0x336)]=WorldConfig[a0_0x19d63f(0x1f0)];class AdhereItem{[a0_0x19d63f(0x1d3)]=new a0_0x412c21['Vector3']();[a0_0x19d63f(0x296)]=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();['index']=-0x1;[a0_0x19d63f(0x37d)]=![];[a0_0x19d63f(0x2b3)]=![];}const adhereItem=new AdhereItem();let leftMousePressing=![];class JoinHelper{[a0_0x19d63f(0x279)]=[];[a0_0x19d63f(0x3f5)]=[];[a0_0x19d63f(0x3a4)]=new Map();[a0_0x19d63f(0x2ac)]=new Map();['map']=new Map();[a0_0x19d63f(0x13c)];[a0_0x19d63f(0x36f)];['adhereToEnd']=![];[a0_0x19d63f(0x33a)]=![];constructor(_0x10928c){this['onLineAdd'](_0x10928c);}[a0_0x19d63f(0x1ed)](_0x5e8d5b){const _0x71503=a0_0x19d63f;this[_0x71503(0x3f5)]['length']=0x0,this[_0x71503(0x279)][_0x71503(0x156)](_0x5743c9=>{const _0x14de5a=_0x71503,_0x5a6985=this[_0x14de5a(0x24a)]['get'](_0x5743c9);_0x5e8d5b!==_0x5a6985&&this[_0x14de5a(0x3f5)]['push'](_0x5743c9);});}[a0_0x19d63f(0x411)](_0x1971ce){const _0x5ec8ba=a0_0x19d63f,_0xfc9245=[];this[_0x5ec8ba(0x279)][_0x5ec8ba(0x156)](_0x5252e5=>{const _0x4f4613=_0x5ec8ba,_0x217cac=this['map'][_0x4f4613(0x117)](_0x5252e5);!_0x1971ce[_0x4f4613(0x119)](_0x217cac)&&_0xfc9245['push'](_0x5252e5);}),this[_0x5ec8ba(0x279)]=_0xfc9245;const _0x22bc17=new Map();this[_0x5ec8ba(0x24a)]['forEach']((_0x5164d9,_0x379ffa)=>{const _0x1eb812=_0x5ec8ba;!_0x1971ce[_0x1eb812(0x119)](_0x5164d9)&&_0x22bc17[_0x1eb812(0x3b0)](_0x379ffa,_0x5164d9);}),this[_0x5ec8ba(0x24a)]=_0x22bc17;}[a0_0x19d63f(0x1f1)](_0xc0ed88){_0xc0ed88['forEach'](_0x2b1a82=>{const _0x218941=a0_0xfa1d,_0x467b79=_0x2b1a82['vo'][_0x218941(0xe8)]();_0x467b79['forEach'](_0x1e39b4=>{const _0x12681d=_0x218941;this[_0x12681d(0x279)][_0x12681d(0x32e)](_0x1e39b4),this['map'][_0x12681d(0x3b0)](_0x1e39b4,_0x2b1a82);}),_0x2b1a82['vo']['isOpen']()&&(this['mapStart']['set'](_0x467b79[0x0],_0x2b1a82),this[_0x218941(0x2ac)]['set'](_0x467b79[_0x467b79[_0x218941(0x180)]-0x1],_0x2b1a82));});}[a0_0x19d63f(0x269)](_0x276f4f){const _0x20a44e=a0_0x19d63f;this[_0x20a44e(0x411)]([_0x276f4f]),this['onLineAdd']([_0x276f4f]);}[a0_0x19d63f(0x118)](){const _0x41e522=a0_0x19d63f;this[_0x41e522(0x13c)]=null,this[_0x41e522(0x36f)]=null,this['adhereToEnd']=![],this[_0x41e522(0x33a)]=![];}[a0_0x19d63f(0x3a2)](_0x4057ec){const _0x58c3a1=a0_0x19d63f;let _0x3b11e6=Infinity,_0x5e3c2c;this[_0x58c3a1(0x13c)]=null,this[_0x58c3a1(0x279)]['forEach'](_0x2f9580=>{const _0x436e2c=_0x2f9580['distanceToSquared'](_0x4057ec);_0x436e2c<=dj&&_0x436e2c<_0x3b11e6&&(_0x3b11e6=_0x436e2c,_0x5e3c2c=_0x2f9580);}),this[_0x58c3a1(0x13c)]=_0x5e3c2c;}['processJoin'](_0x2142d6,_0x3cd212,_0x5a6281,_0x383d48){const _0x21809d=a0_0x19d63f;let _0x14f5d8=Infinity,_0x3055c7;this['pts'][_0x21809d(0x156)](_0x2c3c2b=>{const _0x33c603=_0x21809d,_0x20648b=_0x2c3c2b[_0x33c603(0x186)](_0x2142d6);_0x20648b<=dj&&_0x20648b<_0x14f5d8&&(_0x14f5d8=_0x20648b,_0x3055c7=_0x2c3c2b);}),this[_0x21809d(0x13c)]=_0x3055c7;if(!_0x3055c7||_0x3cd212)return;const _0x1edd94=_0x5a6281===0x0;this[_0x21809d(0x33a)]=_0x5a6281===_0x383d48-0x1;if(!_0x1edd94&&!this['draggingEnd'])return;const _0x2a2f28=this[_0x21809d(0x3a4)][_0x21809d(0x117)](_0x3055c7),_0x148252=this[_0x21809d(0x2ac)][_0x21809d(0x117)](_0x3055c7);if(_0x2a2f28)this[_0x21809d(0x36f)]=_0x2a2f28;else _0x148252&&(this[_0x21809d(0x36f)]=_0x148252,this[_0x21809d(0x40a)]=!![]);}}class EditLines2dPlugin extends PluginBase{[a0_0x19d63f(0x3be)]=[];['_lines']=[];['_lineEntity'];[a0_0x19d63f(0x22d)];[a0_0x19d63f(0x2f6)];['joinHelper'];constructor(_0x274a38){const _0x5ed8bc=a0_0x19d63f;super(),this[_0x5ed8bc(0x2f6)]=_0x274a38;}[a0_0x19d63f(0x33e)](){const _0xc7da36=a0_0x19d63f;this['_lines']['length']=0x0;const _0x257b75=this[_0xc7da36(0x3be)];for(let _0x2940a3=0x0;_0x2940a3<_0x257b75['length']-0x1;_0x2940a3++){const _0x1f5aae=_0x257b75[_0x2940a3],_0x4c3de1=_0x257b75[_0x2940a3+0x1],_0x127a25=new a0_0x412c21['Line3'](_0x1f5aae,_0x4c3de1);this[_0xc7da36(0x21a)][_0xc7da36(0x32e)](_0x127a25);}if(this[_0xc7da36(0x3f1)]['vo']['closing'][0x0]){const _0x3e076b=new a0_0x412c21[(_0xc7da36(0x123))](_0x257b75[_0x257b75[_0xc7da36(0x180)]-0x1],_0x257b75[0x0]);this[_0xc7da36(0x21a)][_0xc7da36(0x32e)](_0x3e076b);}}['initJoinHelper'](){const _0x1de69f=a0_0x19d63f,_0x123c8d=this[_0x1de69f(0x2f6)][_0x1de69f(0x25d)];_0x123c8d['lines2dEntities'][_0x1de69f(0x156)](_0x5c11ba=>_0x5c11ba[_0x1de69f(0x277)]()),this[_0x1de69f(0x190)]=new JoinHelper(_0x123c8d[_0x1de69f(0xf2)]);}[a0_0x19d63f(0x1e6)](){const _0x165011=a0_0x19d63f;this['_lineEntity']=null,hoverVertexPointer[_0x165011(0x11a)](),hoverEdgePointer[_0x165011(0x11a)](),adhereItem['onPoint']=![],adhereItem['onEdge']=![],this[_0x165011(0x3be)]['length']=0x0,this['_lines'][_0x165011(0x180)]=0x0,this[_0x165011(0x22d)]=null;}[a0_0x19d63f(0x381)](){const _0x2080b7=a0_0x19d63f;if(!this[_0x2080b7(0x3f1)])return;this[_0x2080b7(0x3f1)][_0x2080b7(0x150)](),this['_lineEntity'][_0x2080b7(0x341)](![]),this[_0x2080b7(0x1e6)]();}[a0_0x19d63f(0x197)](_0x46bd6d){const _0xcca704=a0_0x19d63f;if(this[_0xcca704(0x3f1)]===_0x46bd6d)return;_0x46bd6d['toggleSelect'](!![]),_0x46bd6d[_0xcca704(0x277)](),this[_0xcca704(0x3f1)]=_0x46bd6d,this[_0xcca704(0x3be)]=_0x46bd6d[_0xcca704(0xd5)](),this['_updateLines'](),this[_0xcca704(0x190)][_0xcca704(0x1ed)](_0x46bd6d);}[a0_0x19d63f(0x3c6)](_0x21e975,_0xa12623){const _0x260a34=a0_0x19d63f,_0x1f429d=this['_lineEntity'],_0x4aca95={'x':_0xa12623['x'],'y':_0xa12623['y']},_0x3d1b77=new Lines2d()[_0x260a34(0x401)](_0x1f429d['vo'])['copyPoints'](_0x1f429d['vo']);_0x3d1b77[_0x260a34(0x3ed)][0x0]['splice'](_0x21e975+0x1,0x0,_0x4aca95);const _0x221354=new Lines2dEntity(_0x3d1b77);return _0x221354[_0x260a34(0x29c)](),_0x221354;}['_newLineByVertRemove'](_0x1cb8d4){const _0x436b4d=a0_0x19d63f;if(this[_0x436b4d(0x3be)][_0x436b4d(0x180)]<0x3)return null;const _0x3a3667=this[_0x436b4d(0x3f1)],_0x3e57ab=new Lines2d()[_0x436b4d(0x401)](_0x3a3667['vo'])[_0x436b4d(0x17d)](_0x3a3667['vo']);_0x3e57ab[_0x436b4d(0x3ed)][0x0][_0x436b4d(0x2e8)](_0x1cb8d4,0x1);const _0x123d36=new Lines2dEntity(_0x3e57ab);return _0x123d36['markAsWorld'](),_0x123d36;}['replaceSelectLines2d'](){const _0x20d630=a0_0x19d63f,_0x3e9460=this['scene3d'][_0x20d630(0x25d)],_0x52d241=this['_lineEntity'];if(!_0x52d241)return;let _0xf380d0;if(this['_currentAdhere'][_0x20d630(0x2b3)])_0xf380d0=this['_newLineByVertAdd'](adhereItem[_0x20d630(0x287)],adhereItem[_0x20d630(0x296)]);else this[_0x20d630(0x22d)][_0x20d630(0x37d)]&&KeyboardState[_0x20d630(0xe0)]&&(_0xf380d0=this[_0x20d630(0x37f)](adhereItem[_0x20d630(0x287)]));this[_0x20d630(0x190)][_0x20d630(0x411)]([_0x52d241]);if(!_0xf380d0){_0x52d241[_0x20d630(0x11a)](),removeArrayItem(_0x3e9460['lines2dEntities'],_0x52d241),this[_0x20d630(0x381)]();return;}replaceArrayItem(_0x3e9460[_0x20d630(0xf2)],_0xf380d0,_0x52d241),this[_0x20d630(0x2f6)][_0x20d630(0x1d8)]['add'](_0xf380d0),_0x52d241[_0x20d630(0x11a)](),this[_0x20d630(0x381)](),this[_0x20d630(0x197)](_0xf380d0),this[_0x20d630(0x190)]['onLineAdd']([_0xf380d0]);const _0x1b5aa8=_0xf380d0,_0x19ecbe=_0x52d241,_0x240d84=_0x3e9460['lines2dEntities'];this[_0x20d630(0x2f6)][_0x20d630(0x33f)]['addAction'](UndoType[_0x20d630(0x397)],{'addedItem':_0x1b5aa8,'removedItem':_0x19ecbe,'arr':_0x240d84});}[a0_0x19d63f(0x1a0)](_0x419f66){const _0x156e5e=a0_0x19d63f;if(_0x419f66[_0x156e5e(0x193)]===MouseButton[_0x156e5e(0x201)])return;leftMousePressing=!![];const _0xd77460=this[_0x156e5e(0x2f6)]['store'],_0x39e74b=this[_0x156e5e(0x2f6)]['mouseRaycaster'];if(!_0xd77460[_0x156e5e(0x331)])return;_0x39e74b[_0x156e5e(0x106)][_0x156e5e(0x288)](planeXY,downPos$3);}['pointerMove'](_0xa17921){const _0x156a11=a0_0x19d63f;if(_0xa17921[_0x156a11(0x193)]===MouseButton[_0x156a11(0x201)])return;const _0x232db4=this[_0x156a11(0x2f6)][_0x156a11(0x25d)],_0x27c682=this[_0x156a11(0x2f6)]['scene'],_0x500ac4=this[_0x156a11(0x3f1)];if(!_0x232db4[_0x156a11(0x331)]||!_0x500ac4)return;const _0x3f48b9=this['scene3d'][_0x156a11(0x143)]['ray'][_0x156a11(0x288)](planeXY,pointOnPlane);if(!_0x3f48b9)return;const _0x1b241e=this[_0x156a11(0x22d)];this[_0x156a11(0x190)][_0x156a11(0x118)](),joinedMark['removeFromParent']();const _0x432735=_0x500ac4['vo']['points'][0x0][_0x156a11(0x180)];if(_0x1b241e&&_0x1b241e[_0x156a11(0x1d3)]&&leftMousePressing&&!_0x1b241e['onEdge']){const _0x23478d=pointOnPlane[_0x156a11(0x2a8)]()[_0x156a11(0x343)](editVertStart);_0x23478d[_0x156a11(0x37e)](_0x1b241e[_0x156a11(0x1d3)]),this[_0x156a11(0x190)]['processJoin'](_0x23478d,_0x500ac4['vo'][_0x156a11(0x237)][0x0],_0x1b241e[_0x156a11(0x287)],_0x432735),this[_0x156a11(0x190)][_0x156a11(0x13c)]&&(_0x23478d[_0x156a11(0x357)](this['joinHelper']['adheredPos']),_0x27c682[_0x156a11(0x37e)](joinedMark),joinedMark[_0x156a11(0x3ce)][_0x156a11(0x357)](_0x23478d)),_0x500ac4['updateShape'](_0x1b241e[_0x156a11(0x287)],_0x23478d),hoverVertexPointer[_0x156a11(0x3ce)][_0x156a11(0x357)](_0x23478d),this[_0x156a11(0x3be)][_0x1b241e[_0x156a11(0x287)]][_0x156a11(0x357)](_0x23478d),_0x500ac4[_0x156a11(0x249)](_0x1b241e[_0x156a11(0x287)],_0x23478d);}else{hoverVertexPointer['removeFromParent'](),hoverEdgePointer[_0x156a11(0x11a)](),crossSetPointer['removeFromParent'](),adhereItem['onPoint']=![],adhereItem[_0x156a11(0x2b3)]=![];for(let _0x20975c=0x0;_0x20975c<this[_0x156a11(0x3be)][_0x156a11(0x180)];_0x20975c++){const _0x1a8bdf=this['_vectors'][_0x20975c],_0x213302=_0x1a8bdf[_0x156a11(0x186)](pointOnPlane);if(_0x213302<=dv){adhereItem[_0x156a11(0x1d3)][_0x156a11(0x357)](_0x1a8bdf),adhereItem['index']=_0x20975c,this[_0x156a11(0x22d)]=adhereItem,_0x27c682[_0x156a11(0x37e)](hoverVertexPointer),hoverVertexPointer[_0x156a11(0x3ce)][_0x156a11(0x357)](adhereItem[_0x156a11(0x1d3)]),adhereItem[_0x156a11(0x37d)]=!![],editVertStart['copy'](pointOnPlane);KeyboardState[_0x156a11(0xe0)]&&(_0x27c682['add'](crossSetPointer),crossSetPointer[_0x156a11(0x133)]['color']['setStyle']('#f00'),crossSetPointer[_0x156a11(0x3ce)][_0x156a11(0x357)](adhereItem['ctrlPoint']));return;}}for(let _0x509108=0x0;_0x509108<this['_lines'][_0x156a11(0x180)];_0x509108++){const _0x4c0021=this[_0x156a11(0x21a)][_0x509108],_0x161051=_0x4c0021['closestPointToPointParameter'](pointOnPlane,![]);if(_0x161051>0x1||_0x161051<0x0)continue;const _0x102cca=_0x4c0021[_0x156a11(0x136)](pointOnPlane,![],adhereItem[_0x156a11(0x296)]),_0x539d0f=_0x102cca['distanceToSquared'](pointOnPlane);if(_0x539d0f<=de){adhereItem['posOnEdge']=_0x102cca,adhereItem[_0x156a11(0x287)]=_0x509108,adhereItem[_0x156a11(0x2b3)]=!![],this['_currentAdhere']=adhereItem;KeyboardState[_0x156a11(0xe0)]?(_0x27c682[_0x156a11(0x37e)](crossSetPointer),crossSetPointer[_0x156a11(0x133)][_0x156a11(0x15e)][_0x156a11(0x102)](_0x156a11(0x164)),crossSetPointer[_0x156a11(0x3ce)][_0x156a11(0x357)](adhereItem[_0x156a11(0x296)])):(this['scene3d'][_0x156a11(0x1d8)][_0x156a11(0x37e)](hoverEdgePointer),hoverEdgePointer[_0x156a11(0x3ce)]['copy'](adhereItem['posOnEdge']));return;}}this[_0x156a11(0x22d)]=null;if(leftMousePressing){tmpPos[_0x156a11(0x357)](_0x3f48b9)['sub'](downPos$3);if(!_0x500ac4['vo']['closing'][0x0]){lineStart[_0x156a11(0x357)](_0x500ac4[_0x156a11(0x18e)]())['add'](tmpPos),this[_0x156a11(0x190)]['processJoin'](lineStart,![],0x0,_0x432735);let _0x3bfad6=this[_0x156a11(0x190)][_0x156a11(0x13c)];!this[_0x156a11(0x190)][_0x156a11(0x36f)]&&(lineEnd[_0x156a11(0x357)](_0x500ac4['getEndLocalPos']())[_0x156a11(0x37e)](tmpPos),this[_0x156a11(0x190)][_0x156a11(0x359)](lineEnd,![],_0x432735-0x1,_0x432735),this[_0x156a11(0x190)][_0x156a11(0x13c)]&&(_0x3bfad6=this[_0x156a11(0x190)][_0x156a11(0x13c)])),_0x3bfad6&&(tmpPos[_0x156a11(0x357)](_0x3bfad6),this['joinHelper'][_0x156a11(0x33a)]?tmpPos[_0x156a11(0x343)](_0x500ac4['getEndLocalPos']()):tmpPos[_0x156a11(0x343)](_0x500ac4[_0x156a11(0x18e)]()),_0x27c682[_0x156a11(0x37e)](joinedMark),joinedMark[_0x156a11(0x3ce)]['copy'](_0x3bfad6));}_0x500ac4['position'][_0x156a11(0x357)](tmpPos),_0x500ac4['markAsLocal']();}}}[a0_0x19d63f(0x1ef)](_0x859c8e){const _0x57d87b=a0_0x19d63f,_0x207359=leftMousePressing;leftMousePressing=![];const _0x5b2fe1=this[_0x57d87b(0x2f6)]['store'];if(_0x859c8e[_0x57d87b(0x193)]===MouseButton[_0x57d87b(0x201)]||!_0x5b2fe1[_0x57d87b(0x331)])return;if(!this['_lineEntity'])return;this[_0x57d87b(0x3f1)][_0x57d87b(0x262)]()&&(this['_lineEntity']['resetTransform'](),this['_lineEntity'][_0x57d87b(0xd5)]()[_0x57d87b(0x156)]((_0x50bb6c,_0x508793)=>this['_vectors'][_0x508793]['copy'](_0x50bb6c)));if(this['_currentAdhere']&&this[_0x57d87b(0x22d)]['onPoint']){const _0x245580=this[_0x57d87b(0x22d)][_0x57d87b(0x1d3)][_0x57d87b(0x2a8)](),_0x3b03d2=this[_0x57d87b(0x22d)][_0x57d87b(0x287)],_0x54c8ae=this[_0x57d87b(0x3be)][_0x3b03d2][_0x57d87b(0x2a8)](),_0x4fe9bf=this[_0x57d87b(0x3f1)];this[_0x57d87b(0x2f6)][_0x57d87b(0x33f)]['addAction'](UndoType[_0x57d87b(0x335)],{'oldPos':_0x245580,'newPos':_0x54c8ae,'entity':_0x4fe9bf,'index':_0x3b03d2});}if(this[_0x57d87b(0x190)][_0x57d87b(0x36f)]){joinedMark[_0x57d87b(0x11a)]();const _0x1ae4dd=[this[_0x57d87b(0x3f1)],this['joinHelper'][_0x57d87b(0x36f)]],_0x482926=[],_0x5aad58=[];mergeLineEntities(_0x1ae4dd,_0x482926,_0x5aad58),_0x482926['forEach'](_0x370763=>_0x370763[_0x57d87b(0x11a)]()),arrAsubB(_0x5b2fe1[_0x57d87b(0xf2)],_0x482926),_0x5aad58[_0x57d87b(0x156)](_0x4101d8=>this['scene3d'][_0x57d87b(0x1d8)][_0x57d87b(0x37e)](_0x4101d8)),_0x5b2fe1[_0x57d87b(0xf2)][_0x57d87b(0x32e)](..._0x5aad58),this[_0x57d87b(0x190)][_0x57d87b(0x411)](_0x482926),this[_0x57d87b(0x190)][_0x57d87b(0x1f1)](_0x5aad58),this[_0x57d87b(0x1e6)]();return;}_0x207359&&this[_0x57d87b(0x190)][_0x57d87b(0x269)](this['_lineEntity']);}['pointerUpUnmoved'](_0x5b9de9){const _0x223457=a0_0x19d63f;leftMousePressing=![];const _0x514469=this[_0x223457(0x2f6)],_0x43476e=this[_0x223457(0x2f6)][_0x223457(0x25d)];if(_0x5b9de9[_0x223457(0x193)]===MouseButton[_0x223457(0x201)]){_0x43476e[_0x223457(0x331)]&&(this['unSelectLine'](),_0x43476e[_0x223457(0x1aa)](),_0x43476e[_0x223457(0xf2)][_0x223457(0x156)](_0x18fa29=>_0x18fa29[_0x223457(0x150)]()));return;}if(!_0x43476e[_0x223457(0x331)])return;const _0x1937ba=this[_0x223457(0x3f1)];if(_0x1937ba&&this[_0x223457(0x22d)]){crossSetPointer[_0x223457(0x11a)]();if(this[_0x223457(0x22d)][_0x223457(0x2b3)]&&KeyboardState[_0x223457(0xe0)]){const _0x55189c=_0x1937ba[_0x223457(0x3f7)](adhereItem[_0x223457(0x287)]);_0x55189c['length']?(_0x1937ba[_0x223457(0x11a)](),removeArrayItem(_0x43476e[_0x223457(0xf2)],_0x1937ba),_0x514469[_0x223457(0x1d8)][_0x223457(0x37e)](..._0x55189c),_0x43476e[_0x223457(0xf2)][_0x223457(0x32e)](..._0x55189c),this[_0x223457(0x190)][_0x223457(0x411)]([_0x1937ba]),this[_0x223457(0x190)]['onLineAdd'](_0x55189c),this[_0x223457(0x1e6)]()):(this[_0x223457(0x381)](),this['selectLine'](_0x1937ba),this[_0x223457(0x190)][_0x223457(0x269)](_0x1937ba));}else this['replaceSelectLines2d']();}else{const _0x2451a1=_0x514469[_0x223457(0x143)],_0xd9b2d8=_0x43476e[_0x223457(0xf2)]['map'](_0xf1b995=>_0xf1b995['lineSegments']),_0x2068d1=_0x2451a1[_0x223457(0x1d1)](_0xd9b2d8,![]);if(_0x2068d1['length']){const _0x4c3794=_0x43476e[_0x223457(0xf2)][_0xd9b2d8[_0x223457(0x3d5)](_0x2068d1[0x0][_0x223457(0x3ec)])];if(_0x4c3794===this[_0x223457(0x3f1)])return;else this[_0x223457(0x381)](),this[_0x223457(0x197)](_0x4c3794);}else!this[_0x223457(0x22d)]&&this[_0x223457(0x381)]();}}}let freeStateTimer=null;const point$1=new a0_0x412c21['Vector3'](),v0=new a0_0x412c21[(a0_0x19d63f(0x1c6))](-0.5,0x0,0x0),v1=new a0_0x412c21[(a0_0x19d63f(0x1c6))](0.5,0x0,0x0),unitX=new a0_0x412c21[(a0_0x19d63f(0x1c6))](0x1,0x0,0x0),segmentGeo=new a0_0x412c21[(a0_0x19d63f(0x27a))]()[a0_0x19d63f(0x2ef)]([v0,v1]);segmentGeo[a0_0x19d63f(0x19d)]([0x0,0x1]);const segment0=new a0_0x412c21[(a0_0x19d63f(0x316))](segmentGeo,new a0_0x412c21[(a0_0x19d63f(0x2c8))]({'color':a0_0x19d63f(0x1c7),'depthTest':![],'depthWrite':![]}));segment0[a0_0x19d63f(0x336)]=WorldConfig[a0_0x19d63f(0x374)];function updateSegment(_0x57a89b,_0x504d09,_0x2d5eea){const _0x54f0b4=a0_0x19d63f,_0x148ba7=_0x504d09[_0x54f0b4(0x3df)](_0x2d5eea);_0x57a89b[_0x54f0b4(0x3ce)][_0x54f0b4(0x357)](_0x504d09)[_0x54f0b4(0x24e)](_0x2d5eea,0.5),_0x57a89b['scale']['x']=_0x148ba7,_0x57a89b['quaternion'][_0x54f0b4(0x2d9)](unitX,_0x504d09[_0x54f0b4(0x2a8)]()[_0x54f0b4(0x343)](_0x2d5eea)[_0x54f0b4(0x404)]());}const downPos$2=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();let oldPosArr$1=[],downingLeft$1=![],posMoved$1=![];const box1$1=new a0_0x412c21[(a0_0x19d63f(0x16a))](),box2$1=new a0_0x412c21[(a0_0x19d63f(0x16a))](),boxCenter$3=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();class Lines2dEntityPlugin extends PluginBase{[a0_0x19d63f(0x2f6)];['addingSegments']=[];[a0_0x19d63f(0x227)];[a0_0x19d63f(0x3e8)]=[];[a0_0x19d63f(0x21f)]=[];[a0_0x19d63f(0x190)];constructor(_0x350221){const _0x3757fb=a0_0x19d63f;super(),this[_0x3757fb(0x2f6)]=_0x350221;}['getSelectSingle'](){const _0x43935e=a0_0x19d63f;if(this[_0x43935e(0x21f)]['length']!==0x1)return null;return this[_0x43935e(0x21f)][0x0];}['initJoinHelperAdd'](){const _0x57f6aa=a0_0x19d63f,_0x444be7=this[_0x57f6aa(0x2f6)][_0x57f6aa(0x25d)];_0x444be7[_0x57f6aa(0xf2)][_0x57f6aa(0x156)](_0x510402=>_0x510402[_0x57f6aa(0x277)]()),this['joinHelper']=new JoinHelper(_0x444be7[_0x57f6aa(0xf2)]);}['prepareColor'](){const _0x27f01f=a0_0x19d63f;segment0[_0x27f01f(0x133)][_0x27f01f(0x15e)][_0x27f01f(0x102)](Lines2d[_0x27f01f(0x265)][_0x27f01f(0x15e)]),segment0['material'][_0x27f01f(0x385)]=Lines2d[_0x27f01f(0x265)]['opacity'];}[a0_0x19d63f(0x2fa)](){const _0x5e2787=a0_0x19d63f;this[_0x5e2787(0x21f)]['forEach'](_0x57bb5c=>_0x57bb5c[_0x5e2787(0x341)](![])),this[_0x5e2787(0x21f)]['length']=0x0;}[a0_0x19d63f(0x208)](_0x1de3b0){const _0xfebb1e=a0_0x19d63f;this[_0xfebb1e(0x21f)]=arrAunionB(this[_0xfebb1e(0x21f)],_0x1de3b0),this[_0xfebb1e(0x21f)][_0xfebb1e(0x156)](_0xfe1b4=>_0xfe1b4[_0xfebb1e(0x341)](!![])),oldPosArr$1=this['_selectedEntities'][_0xfebb1e(0x24a)](_0x5cc647=>_0x5cc647[_0xfebb1e(0x3ce)][_0xfebb1e(0x2a8)]());}['removeEntities'](){const _0x31bff4=a0_0x19d63f;if(!this[_0x31bff4(0x21f)][_0x31bff4(0x180)])return;arrAsubB(this[_0x31bff4(0x2f6)][_0x31bff4(0x25d)][_0x31bff4(0xf2)],this[_0x31bff4(0x21f)]);this['joinHelper']&&this[_0x31bff4(0x190)][_0x31bff4(0x411)](this['_selectedEntities']);this[_0x31bff4(0x21f)][_0x31bff4(0x156)](_0x5e3ae7=>_0x5e3ae7['removeFromParent']());const _0x12bd03=this['_selectedEntities']['map'](_0x414929=>_0x414929['parent']),_0x33fe12=this[_0x31bff4(0x21f)][_0x31bff4(0x3b6)](),_0x318447=this[_0x31bff4(0x2f6)][_0x31bff4(0x25d)]['lines2dEntities'],_0x457e6c=[];this[_0x31bff4(0x2f6)][_0x31bff4(0x33f)][_0x31bff4(0x346)](UndoType[_0x31bff4(0x1b9)],{'parents':_0x12bd03,'addedItems':_0x457e6c,'removedItems':_0x33fe12,'arrItems':_0x318447}),this['_selectedEntities'][_0x31bff4(0x180)]=0x0;}[a0_0x19d63f(0x302)](_0x47a0a5){const _0x37177e=a0_0x19d63f;if(this[_0x37177e(0x3e8)][_0x37177e(0x180)]<0x2){this[_0x37177e(0x34f)]();return;}const _0x44c9a3=this[_0x37177e(0x2f6)][_0x37177e(0x25d)],_0x3fe420=this[_0x37177e(0x2f6)][_0x37177e(0x1d8)],_0x1dd4a5=new Lines2d();_0x1dd4a5['points'][0x0]=this[_0x37177e(0x3e8)][_0x37177e(0x24a)](_0x46381c=>{return{'x':_0x46381c['x'],'y':_0x46381c['y']};}),_0x1dd4a5[_0x37177e(0x237)]=[0x0];const _0x38ff1e=new Lines2dEntity(_0x1dd4a5);_0x3fe420['add'](_0x38ff1e),_0x44c9a3[_0x37177e(0xf2)]['push'](_0x38ff1e),this[_0x37177e(0x190)][_0x37177e(0x1f1)]([_0x38ff1e]),this[_0x37177e(0x34f)]();}['_clearAdding'](){const _0x1a1e13=a0_0x19d63f;this[_0x1a1e13(0x369)][_0x1a1e13(0x156)](_0x42483a=>_0x42483a[_0x1a1e13(0x11a)]()),this[_0x1a1e13(0x227)]=null,this[_0x1a1e13(0x3e8)][_0x1a1e13(0x180)]=0x0;}[a0_0x19d63f(0x291)](){const _0x1f1ef5=a0_0x19d63f;if(this[_0x1f1ef5(0x21f)]['length']<0x2)return;const _0x1a6da4=this['scene3d'][_0x1f1ef5(0x25d)],_0x5829a5=[],_0x109512=[];this[_0x1f1ef5(0x21f)][_0x1f1ef5(0x156)](_0x17e64d=>_0x17e64d[_0x1f1ef5(0x277)]()),mergeLineEntities(this[_0x1f1ef5(0x21f)],_0x5829a5,_0x109512),_0x5829a5[_0x1f1ef5(0x156)](_0x1e7bca=>_0x1e7bca[_0x1f1ef5(0x11a)]()),arrAsubB(_0x1a6da4[_0x1f1ef5(0xf2)],_0x5829a5),_0x109512['forEach'](_0xc558cb=>this[_0x1f1ef5(0x2f6)][_0x1f1ef5(0x1d8)]['add'](_0xc558cb)),_0x1a6da4[_0x1f1ef5(0xf2)][_0x1f1ef5(0x32e)](..._0x109512);}['pointerDown'](_0x32b820){const _0x39d695=a0_0x19d63f;downingLeft$1=_0x32b820[_0x39d695(0x193)]===MouseButton[_0x39d695(0x2c9)],posMoved$1=![];if(!downingLeft$1)return;const _0x51dcac=this[_0x39d695(0x2f6)],_0x4fbde0=_0x51dcac[_0x39d695(0x1f5)];_0x51dcac['mouseRaycaster'][_0x39d695(0x106)]['intersectPlane'](planeXY,downPos$2),oldPosArr$1=this['_selectedEntities'][_0x39d695(0x24a)](_0x19fdf9=>_0x19fdf9[_0x39d695(0x3ce)][_0x39d695(0x2a8)]()),_0x4fbde0[_0x39d695(0x34a)]&&_0x4fbde0[_0x39d695(0x1e2)]&&(box1$1['makeEmpty'](),this[_0x39d695(0x21f)][_0x39d695(0x156)](_0x2e6ca8=>{const _0x1eda4d=_0x39d695;box2$1[_0x1eda4d(0xfc)](_0x2e6ca8[_0x1eda4d(0xef)]['geometry'][_0x1eda4d(0x3aa)][_0x1eda4d(0x3ce)])[_0x1eda4d(0x3b7)](_0x2e6ca8[_0x1eda4d(0x2d7)]),box1$1[_0x1eda4d(0x330)](box2$1);}),box1$1[_0x39d695(0x111)](boxCenter$3));}[a0_0x19d63f(0x2dd)](_0x3c7834){const _0x288270=a0_0x19d63f,_0x71379e=this[_0x288270(0x2f6)],_0x5c0058=this[_0x288270(0x2f6)][_0x288270(0x25d)],_0x4bb3fa=_0x71379e['mouseRaycaster'],_0xc4f25=_0x4bb3fa[_0x288270(0x106)][_0x288270(0x288)](planeXY,point$1);if(this[_0x288270(0x3e8)][_0x288270(0x180)]){const _0x1d45ae=this['addingPoints'][this[_0x288270(0x3e8)]['length']-0x1];!this['curSegment']&&(this['curSegment']=segment0[_0x288270(0x2a8)](),_0x71379e[_0x288270(0x1d8)]['add'](this['curSegment']),this['addingSegments'][_0x288270(0x32e)](this[_0x288270(0x227)])),updateSegment(this[_0x288270(0x227)],_0x1d45ae,this[_0x288270(0x190)][_0x288270(0x13c)]||_0xc4f25);}if(_0x5c0058[_0x288270(0x2ec)]){if(this[_0x288270(0x21f)][_0x288270(0x180)]!==0x1)return;const _0x311779=this[_0x288270(0x21f)][0x0],_0xfb0766=_0x311779[_0x288270(0x272)](_0xc4f25);Math[_0x288270(0x3ca)](_0xfb0766)>0.01&&_0x311779[_0x288270(0x286)](_0xfb0766);}else _0x5c0058[_0x288270(0x31d)]&&(joinedMark[_0x288270(0x11a)](),this['joinHelper'][_0x288270(0x3a2)](_0xc4f25),this[_0x288270(0x190)][_0x288270(0x13c)]&&(_0x71379e[_0x288270(0x1d8)][_0x288270(0x37e)](joinedMark),joinedMark[_0x288270(0x3ce)][_0x288270(0x357)](this[_0x288270(0x190)][_0x288270(0x13c)])));if(!_0x5c0058[_0x288270(0x40b)]||!downingLeft$1)return;_0xc4f25[_0x288270(0x343)](downPos$2),this[_0x288270(0x21f)][_0x288270(0x156)]((_0x4694cc,_0x14444d)=>{const _0x2faa51=_0x288270;_0x4694cc[_0x2faa51(0x3ce)]['copy'](oldPosArr$1[_0x14444d])['add'](_0xc4f25),_0x4694cc[_0x2faa51(0x38c)]();}),posMoved$1=!![];if(_0x71379e[_0x288270(0x1f5)]['adhering']&&_0x71379e['adhereUtil'][_0x288270(0x1e2)]){const _0x44bbd0=[box1$1[_0x288270(0x11d)]['x']+_0xc4f25['x'],boxCenter$3['x']+_0xc4f25['x'],box1$1[_0x288270(0x40d)]['x']+_0xc4f25['x']],_0x22582c=[box1$1[_0x288270(0x11d)]['y']+_0xc4f25['y'],boxCenter$3['y']+_0xc4f25['y'],box1$1[_0x288270(0x40d)]['y']+_0xc4f25['y']],_0x202d5c=_0x71379e['adhereUtil'][_0x288270(0x3da)](_0x44bbd0,_0x22582c);if(_0x202d5c[_0x288270(0x180)]){const [_0x1a9ca6,_0x119a9e]=_0x202d5c;this['_selectedEntities'][_0x288270(0x156)](_0x268aaf=>{const _0x2f5e25=_0x288270;_0x268aaf['position']['x']+=_0x1a9ca6,_0x268aaf[_0x2f5e25(0x3ce)]['y']+=_0x119a9e,_0x268aaf['updateVO']();});}}}[a0_0x19d63f(0x1ef)](_0x8cc54f){const _0x2a255f=a0_0x19d63f;if(posMoved$1){updateParentGroups(this['_selectedEntities']);if(this[_0x2a255f(0x21f)][_0x2a255f(0x180)]){const _0x4df779=this[_0x2a255f(0x21f)]['slice'](),_0x49a56e=oldPosArr$1['slice'](),_0x3d36a8=_0x4df779[_0x2a255f(0x24a)](_0x1a4336=>_0x1a4336['position'][_0x2a255f(0x2a8)]());this[_0x2a255f(0x2f6)]['editRecord'][_0x2a255f(0x346)](UndoType[_0x2a255f(0x1ca)],{'items':_0x4df779,'posOld':_0x49a56e,'posNew':_0x3d36a8});}}downingLeft$1=![];}[a0_0x19d63f(0x2f4)](_0x16ca16){const _0x40968d=a0_0x19d63f;downingLeft$1=![];const _0x47db32=this[_0x40968d(0x2f6)],_0x91b454=this[_0x40968d(0x2f6)][_0x40968d(0x25d)];if(_0x16ca16[_0x40968d(0x193)]===MouseButton[_0x40968d(0x201)]){if(_0x91b454['stateAddingLines2d'])this[_0x40968d(0x302)](_0x16ca16),freeStateTimer?(_0x91b454[_0x40968d(0xf2)][_0x40968d(0x156)](_0x38a846=>_0x38a846[_0x40968d(0x150)]()),_0x91b454[_0x40968d(0x1aa)]()):freeStateTimer=setTimeout(()=>freeStateTimer=null,0xc8);else _0x91b454[_0x40968d(0x2ec)]&&this['_selectedEntities'][_0x40968d(0x180)]===0x1&&(this[_0x40968d(0x21f)][0x0]&&this['_selectedEntities'][0x0][_0x40968d(0x29b)](),_0x91b454['freeState']());return;}const _0x1ff273=_0x47db32[_0x40968d(0x143)],_0x1ff9f3=_0x1ff273[_0x40968d(0x106)][_0x40968d(0x288)](planeXY,point$1);if(!_0x1ff9f3)return;if(_0x91b454['stateAddingLines2d'])this[_0x40968d(0x190)]['adheredPos']?this[_0x40968d(0x3e8)][_0x40968d(0x32e)](this[_0x40968d(0x190)][_0x40968d(0x13c)][_0x40968d(0x2a8)]()):this['addingPoints'][_0x40968d(0x32e)](_0x1ff9f3[_0x40968d(0x2a8)]()),this['curSegment']=null;else{if(_0x91b454[_0x40968d(0x2ec)]&&this[_0x40968d(0x21f)]['length']===0x1){const _0x8d2895=this[_0x40968d(0x21f)][0x0];_0x8d2895[_0x40968d(0x380)](_0x47db32[_0x40968d(0x1d8)],_0x91b454);return;}}if(!_0x91b454[_0x40968d(0x40b)])return;const _0x142640=_0x91b454[_0x40968d(0xf2)]['map'](_0x33709f=>_0x33709f['lineSegments']),_0x25dc72=_0x1ff273['intersectObjects'](_0x142640,![]);if(!_0x25dc72['length']){!KeyboardState[_0x40968d(0x15f)]&&(this[_0x40968d(0x21f)]['length']&&this['scene3d'][_0x40968d(0x1d8)][_0x40968d(0x213)](Scene3dEvent['clearPaneSelection']),this[_0x40968d(0x2fa)]());return;}const _0x5b8c6a=_0x91b454[_0x40968d(0xf2)][_0x142640[_0x40968d(0x3d5)](_0x25dc72[0x0]['object'])];_0x5b8c6a[_0x40968d(0x341)](!![]),_0x91b454[_0x40968d(0x16c)]=!![];let _0x460b9b;KeyboardState[_0x40968d(0x15f)]?!this[_0x40968d(0x21f)][_0x40968d(0x119)](_0x5b8c6a)?(this['_selectedEntities']['push'](_0x5b8c6a),_0x460b9b=_0x5b8c6a):(_0x5b8c6a[_0x40968d(0x341)](![]),removeArrayItem(this[_0x40968d(0x21f)],_0x5b8c6a)):(!this[_0x40968d(0x21f)][_0x40968d(0x119)](_0x5b8c6a)&&this['_unSelect'](),_0x460b9b=_0x5b8c6a,this[_0x40968d(0x21f)]=[_0x5b8c6a]);if(!_0x460b9b)return;const _0x5c3ce6=Scene3dEvent[_0x40968d(0x3f0)];_0x5c3ce6[_0x40968d(0x24f)][_0x40968d(0x15e)]=_0x460b9b['vo'][_0x40968d(0x3b2)],_0x5c3ce6[_0x40968d(0x24f)][_0x40968d(0x385)]=_0x460b9b['vo'][_0x40968d(0x385)],_0x47db32['scene']['dispatchEvent'](_0x5c3ce6);}}const box3$1=new a0_0x412c21[(a0_0x19d63f(0x16a))](),point=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),downPos$1=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();let oldPosArr=[],downingLeft=![],posMoved=![];const box1=new a0_0x412c21[(a0_0x19d63f(0x16a))](),box2=new a0_0x412c21['Box3'](),boxCenter$2=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();class GroupEntityPlugin extends PluginBase{[a0_0x19d63f(0x2f6)];[a0_0x19d63f(0x11e)]=[];constructor(_0x3a627b){const _0xe4bb29=a0_0x19d63f;super(),this[_0xe4bb29(0x2f6)]=_0x3a627b;}[a0_0x19d63f(0x1d6)](){const _0x5b49ab=a0_0x19d63f;if(this[_0x5b49ab(0x11e)]['length']!==0x1)return null;return this[_0x5b49ab(0x11e)][0x0];}[a0_0x19d63f(0x2fa)](){const _0x423fd2=a0_0x19d63f;this[_0x423fd2(0x11e)][_0x423fd2(0x156)](_0x24d462=>_0x24d462[_0x423fd2(0x2bf)](![])),this[_0x423fd2(0x11e)][_0x423fd2(0x180)]=0x0;}[a0_0x19d63f(0x120)](){const _0x2bbfbe=a0_0x19d63f;if(!this[_0x2bbfbe(0x11e)]['length'])return;this[_0x2bbfbe(0x11e)][_0x2bbfbe(0x156)](_0x22d3d4=>_0x22d3d4[_0x2bbfbe(0x21e)](this[_0x2bbfbe(0x2f6)][_0x2bbfbe(0x25d)]));const _0x4935c7=this[_0x2bbfbe(0x11e)][_0x2bbfbe(0x24a)](_0x516cf6=>_0x516cf6[_0x2bbfbe(0x1b1)]),_0x549370=this[_0x2bbfbe(0x11e)][_0x2bbfbe(0x3b6)](),_0x7d0e35=this[_0x2bbfbe(0x2f6)][_0x2bbfbe(0x25d)][_0x2bbfbe(0x161)],_0x515e32=[],_0x4c609c={'parents':_0x4935c7,'addedItems':_0x515e32,'removedItems':_0x549370,'arrItems':_0x7d0e35};_0x4c609c[_0x2bbfbe(0x30c)]=_0x52a829=>{const _0x4296cf=_0x2bbfbe,{groups:_0x11962f,lines2dEntities:_0x25cbd6,area2dMeshes:_0x472eeb}=this[_0x4296cf(0x2f6)][_0x4296cf(0x25d)];_0x52a829[_0x4296cf(0x156)](_0x2e01f0=>{const _0x13d4d5=_0x4296cf;addArrayItems(_0x11962f,_0x2e01f0),_0x2e01f0['getChildEntities']()[_0x13d4d5(0x156)](_0x42acc6=>{if(_0x42acc6 instanceof Area2dMesh)addArrayItems(_0x472eeb,_0x42acc6);else{if(_0x42acc6 instanceof Lines2dEntity)addArrayItems(_0x25cbd6,_0x42acc6);else _0x42acc6 instanceof GroupEntity&&addArrayItems(_0x11962f,_0x42acc6);}});});},_0x4c609c[_0x2bbfbe(0x412)]=_0x53448f=>{const _0x271df4=_0x2bbfbe;_0x53448f[_0x271df4(0x156)](_0x12d539=>_0x12d539[_0x271df4(0x21e)](this['scene3d'][_0x271df4(0x25d)]));},this[_0x2bbfbe(0x2f6)][_0x2bbfbe(0x33f)][_0x2bbfbe(0x346)](UndoType['removeItems'],_0x4c609c),this[_0x2bbfbe(0x11e)][_0x2bbfbe(0x180)]=0x0;}[a0_0x19d63f(0x1a0)](_0x1be653){const _0x483430=a0_0x19d63f;downingLeft=_0x1be653[_0x483430(0x193)]===MouseButton[_0x483430(0x2c9)],posMoved=![];if(!downingLeft)return;const _0xe7eade=this[_0x483430(0x2f6)],_0x343a09=this[_0x483430(0x2f6)][_0x483430(0x25d)];if(!_0x343a09[_0x483430(0x40b)])return;_0xe7eade[_0x483430(0x143)][_0x483430(0x106)]['intersectPlane'](planeXY,downPos$1),oldPosArr=this['selectGroups'][_0x483430(0x24a)](_0x3de4ee=>_0x3de4ee[_0x483430(0x3ce)]['clone']()),_0xe7eade[_0x483430(0x1f5)][_0x483430(0x34a)]&&_0xe7eade[_0x483430(0x1f5)][_0x483430(0x1bc)]&&(box1['makeEmpty'](),this[_0x483430(0x11e)][_0x483430(0x156)](_0x388109=>{const _0x5bca9b=_0x483430;box2[_0x5bca9b(0xde)](_0x388109,!![]),box1[_0x5bca9b(0x330)](box2);}),box1[_0x483430(0x111)](boxCenter$2));}[a0_0x19d63f(0x2dd)](_0x3ebcba){const _0x297aaf=a0_0x19d63f,_0x4f11cd=this[_0x297aaf(0x2f6)],_0x7ec332=this[_0x297aaf(0x2f6)][_0x297aaf(0x25d)],_0x472edf=_0x4f11cd['mouseRaycaster'];if(!_0x7ec332[_0x297aaf(0x40b)]||!downingLeft)return;const _0x21de89=_0x472edf['ray'][_0x297aaf(0x288)](planeXY,point);if(!_0x21de89)return;_0x21de89['sub'](downPos$1),this[_0x297aaf(0x11e)][_0x297aaf(0x156)]((_0x77d76b,_0x4481ab)=>{const _0x19437c=_0x297aaf;_0x77d76b[_0x19437c(0x3ce)][_0x19437c(0x357)](oldPosArr[_0x4481ab])[_0x19437c(0x37e)](_0x21de89),_0x77d76b[_0x19437c(0x1e4)]();}),posMoved=!![];if(_0x4f11cd[_0x297aaf(0x1f5)][_0x297aaf(0x34a)]&&_0x4f11cd[_0x297aaf(0x1f5)][_0x297aaf(0x1bc)]){const _0x5a4570=[box1[_0x297aaf(0x11d)]['x']+_0x21de89['x'],boxCenter$2['x']+_0x21de89['x'],box1[_0x297aaf(0x40d)]['x']+_0x21de89['x']],_0x3861a8=[box1[_0x297aaf(0x11d)]['y']+_0x21de89['y'],boxCenter$2['y']+_0x21de89['y'],box1['max']['y']+_0x21de89['y']],_0x11c8c5=_0x4f11cd[_0x297aaf(0x1f5)][_0x297aaf(0x3da)](_0x5a4570,_0x3861a8);if(_0x11c8c5[_0x297aaf(0x180)]){const [_0x4f20cd,_0x5c9f72]=_0x11c8c5;this[_0x297aaf(0x11e)][_0x297aaf(0x156)](_0x2e6b25=>{const _0x537400=_0x297aaf;_0x2e6b25[_0x537400(0x3ce)]['x']+=_0x4f20cd,_0x2e6b25[_0x537400(0x3ce)]['y']+=_0x5c9f72,_0x2e6b25[_0x537400(0x1e4)]();});}}}[a0_0x19d63f(0x1ef)](_0x486cb0){const _0x30e976=a0_0x19d63f;downingLeft=![];if(posMoved){updateParentGroups(this[_0x30e976(0x11e)]);if(this[_0x30e976(0x11e)][_0x30e976(0x180)]){const _0x245d71=this[_0x30e976(0x11e)][_0x30e976(0x3b6)](),_0x3b9386=oldPosArr['slice'](),_0x4c18b2=_0x245d71[_0x30e976(0x24a)](_0x466a59=>_0x466a59[_0x30e976(0x3ce)][_0x30e976(0x2a8)]());this[_0x30e976(0x2f6)][_0x30e976(0x33f)][_0x30e976(0x346)](UndoType[_0x30e976(0x1ca)],{'items':_0x245d71,'posOld':_0x3b9386,'posNew':_0x4c18b2});}}}[a0_0x19d63f(0x2f4)](_0x26e92b){const _0x425a27=a0_0x19d63f;downingLeft=![];if(_0x26e92b[_0x425a27(0x193)]!==MouseButton[_0x425a27(0x2c9)])return;const _0x4c30e8=this[_0x425a27(0x2f6)],_0x1c7259=_0x4c30e8[_0x425a27(0x25d)];if(!_0x1c7259[_0x425a27(0x40b)])return;if(_0x1c7259['eventConsumed'])return;const _0x121e47=_0x4c30e8[_0x425a27(0x143)]['ray'];let _0x496898;const _0x288d51=_0x1c7259['groups'][_0x425a27(0x209)](_0x4d6ddb=>_0x4d6ddb['vo']['isSelectable']());_0x288d51[_0x425a27(0x1b6)]((_0x2424db,_0x3401fc)=>_0x2424db['volume']-_0x3401fc[_0x425a27(0xe4)]);const _0x2941ca=new Set();KeyboardState['keyDownCtrl']&&this[_0x425a27(0x11e)][_0x425a27(0x156)](_0x341283=>{const _0x637f39=_0x425a27;_0x341283['vo'][_0x637f39(0x2fd)]['forEach'](_0x4085cf=>_0x2941ca[_0x637f39(0x37e)](_0x4085cf));});for(let _0x2f6d5a=0x0;_0x2f6d5a<_0x288d51[_0x425a27(0x180)];_0x2f6d5a++){const _0x332079=_0x288d51[_0x2f6d5a];if(!_0x332079['vo'][_0x425a27(0xda)]())continue;if(_0x2941ca[_0x425a27(0x283)](_0x332079['vo']['id']))continue;box3$1['copy'](_0x332079[_0x425a27(0x17e)]['_box'])[_0x425a27(0x3b7)](_0x332079[_0x425a27(0x2d7)]);if(_0x121e47['intersectsBox'](box3$1)){_0x496898=_0x332079;break;}}if(!_0x496898){!KeyboardState['keyDownCtrl']&&this[_0x425a27(0x2fa)]();return;}KeyboardState['keyDownCtrl']?!this[_0x425a27(0x11e)]['includes'](_0x496898)?(this['selectGroups']['push'](_0x496898),_0x496898[_0x425a27(0x2bf)](!![])):(_0x496898[_0x425a27(0x2bf)](![]),removeArrayItem(this[_0x425a27(0x11e)],_0x496898)):(this[_0x425a27(0x2fa)](),this[_0x425a27(0x11e)][_0x425a27(0x32e)](_0x496898),_0x496898[_0x425a27(0x2bf)](!![])),_0x1c7259[_0x425a27(0x16c)]=!![];}}const _modelViewMatrix=new a0_0x412c21[(a0_0x19d63f(0x1f6))](),_mvPosition=new a0_0x412c21['Vector3'](),offset=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),oldPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),downPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),downPosWorld=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),curPos=new a0_0x412c21['Vector3'](),worldPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),matInv=new a0_0x412c21[(a0_0x19d63f(0x1f6))](),mat=new a0_0x412c21['Matrix4'](),_pos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),_scale=new a0_0x412c21['Vector3'](),_scale0=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),_size=new a0_0x412c21['Vector3'](),_size0=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),_box=new a0_0x412c21[(a0_0x19d63f(0x16a))](),_quat=new a0_0x412c21[(a0_0x19d63f(0x364))]();let _raycaster=new a0_0x412c21[(a0_0x19d63f(0x413))]();const _quatBak=new a0_0x412c21[(a0_0x19d63f(0x364))](),_startDir=new a0_0x412c21['Vector3'](),_endDir=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),_startV2=new a0_0x412c21[(a0_0x19d63f(0x334))](),_endV2=new a0_0x412c21[(a0_0x19d63f(0x334))](),cursors1=[a0_0x19d63f(0x22a),a0_0x19d63f(0x184),'e-resize',a0_0x19d63f(0x33b),a0_0x19d63f(0x13b),a0_0x19d63f(0x25e),a0_0x19d63f(0x38e),a0_0x19d63f(0x332),a0_0x19d63f(0xf8)],dir0=new a0_0x412c21['Vector3'](),dir1=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),oldScale=new a0_0x412c21['Vector3'](0x1,0x1,0x1),eventDragEnd={'type':a0_0x19d63f(0x18b),'oldRotation':new a0_0x412c21[(a0_0x19d63f(0x109))](),'oldScale':new a0_0x412c21[(a0_0x19d63f(0x1c6))]()};function createContour(_0xc34c81){const _0xd5a475=a0_0x19d63f,_0x492eea=new a0_0x412c21['LineBasicMaterial']({'color':'#094','toneMapped':![],'transparent':!![],'depthTest':![],'depthWrite':![]}),_0x4ba8ad=new a0_0x412c21['BufferGeometry']()[_0xd5a475(0x2ef)](_0xc34c81),_0x318471=new a0_0x412c21['LineLoop'](_0x4ba8ad,_0x492eea);return _0x318471[_0xd5a475(0x336)]=WorldConfig[_0xd5a475(0x1a8)],_0x318471;}class SquareItem extends a0_0x412c21['Mesh']{constructor(){const _0x2d4a3f=a0_0x19d63f;super();const _0x2b0735=0.14,_0x57f8f7=new a0_0x412c21[(_0x2d4a3f(0x27e))](_0x2b0735*0x2,_0x2b0735*0x2),_0x2ae088=new a0_0x412c21['MeshBasicMaterial']({'transparent':!![],'color':_0x2d4a3f(0x1d4),'opacity':0.5});this[_0x2d4a3f(0x163)]=_0x57f8f7,this[_0x2d4a3f(0x133)]=_0x2ae088;const _0x1afd21=new a0_0x412c21[(_0x2d4a3f(0x1c6))](_0x2b0735,_0x2b0735,0x0),_0x473018=new a0_0x412c21['Vector3'](_0x2b0735,-0.14,0x0),_0x39a878=new a0_0x412c21[(_0x2d4a3f(0x1c6))](-0.14,-0.14,0x0),_0x58d62c=new a0_0x412c21[(_0x2d4a3f(0x1c6))](-0.14,_0x2b0735,0x0),_0xd854d6=createContour([_0x1afd21,_0x473018,_0x39a878,_0x58d62c]);this[_0x2d4a3f(0x37e)](_0xd854d6),this[_0x2d4a3f(0x336)]=WorldConfig['order_2d_transform'];}}class RoundItem extends a0_0x412c21[a0_0x19d63f(0x19f)]{constructor(){const _0x5a5153=a0_0x19d63f;super();const _0xdaabe6=0.2,_0x18bfc2=0x10,_0x26a2cf=new a0_0x412c21[(_0x5a5153(0xd8))](_0xdaabe6,_0x18bfc2),_0xf2b90b=new a0_0x412c21[(_0x5a5153(0x1fc))]({'transparent':!![],'color':_0x5a5153(0x1d4),'opacity':0.5});this[_0x5a5153(0x163)]=_0x26a2cf,this[_0x5a5153(0x133)]=_0xf2b90b;const _0x3e066e=[];for(let _0xc4fbca=0x0;_0xc4fbca<_0x18bfc2;_0xc4fbca++){const _0x7e43a8=Math['PI']*0x2/_0x18bfc2*_0xc4fbca,_0xe27652=new a0_0x412c21[(_0x5a5153(0x1c6))](_0xdaabe6*Math[_0x5a5153(0x280)](_0x7e43a8),_0xdaabe6*Math['sin'](_0x7e43a8),0x0);_0x3e066e[_0x5a5153(0x32e)](_0xe27652);}const _0x43bfdd=createContour(_0x3e066e);this[_0x5a5153(0x37e)](_0x43bfdd),this[_0x5a5153(0x336)]=WorldConfig[_0x5a5153(0x1a8)];}}function onDragStart(_0x429525){const _0x2b2150=a0_0x19d63f;if(!this[_0x2b2150(0x3ec)])return;if(_0x429525[_0x2b2150(0x193)]!==MouseButton[_0x2b2150(0x2c9)])return;getMouseRaycaster(_raycaster,this['camera'],_0x429525[_0x2b2150(0x142)],_0x429525[_0x2b2150(0x386)],_0x429525[_0x2b2150(0x28e)][_0x2b2150(0x3e4)]());const _0x1fb779=_raycaster[_0x2b2150(0x1d1)](this[_0x2b2150(0x351)],![]);this[_0x2b2150(0x30a)]=-0x1;if(_0x1fb779[_0x2b2150(0x180)]){this[_0x2b2150(0x30a)]=this[_0x2b2150(0x351)][_0x2b2150(0x3d5)](_0x1fb779[0x0][_0x2b2150(0x3ec)]),this[_0x2b2150(0xf9)][_0x2b2150(0x1b3)]['cursor']=cursors1[this[_0x2b2150(0x30a)]],this[_0x2b2150(0x3ec)][_0x2b2150(0x105)](),_pos['setFromMatrixPosition'](this[_0x2b2150(0x3ec)]['matrixWorld']),mat[_0x2b2150(0x417)](this['object']['matrixWorld'])[_0x2b2150(0x263)](_pos),_quat[_0x2b2150(0x2cc)](mat),matInv[_0x2b2150(0x357)](mat)[_0x2b2150(0x39c)]();const [_0x305d7f,_0x177460,_0x1d4bcb]=this[_0x2b2150(0x351)];this[_0x2b2150(0x134)]=_0x305d7f[_0x2b2150(0x3ce)][_0x2b2150(0x3df)](_0x177460['position']),this['halfHeight']=_0x177460[_0x2b2150(0x3ce)]['distanceTo'](_0x1d4bcb[_0x2b2150(0x3ce)]),oldPos[_0x2b2150(0x357)](this['position']),downPosWorld[_0x2b2150(0x357)](_0x1fb779[0x0]['point']),downPos['copy'](_0x1fb779[0x0][_0x2b2150(0x17a)])[_0x2b2150(0x3b7)](matInv),_startDir['copy'](_0x1fb779[0x0][_0x2b2150(0x17a)])[_0x2b2150(0x343)](this[_0x2b2150(0x3ce)])[_0x2b2150(0x284)](matInv),_quatBak[_0x2b2150(0x357)](this[_0x2b2150(0x225)]),dir0['copy'](_0x1fb779[0x0][_0x2b2150(0x17a)])[_0x2b2150(0x343)](this[_0x2b2150(0x3ce)]),this[_0x2b2150(0x3de)]=!![];}else this[_0x2b2150(0xf9)]['style'][_0x2b2150(0x2c5)]=_0x2b2150(0x264);}function onDragging(_0x3ba561){const _0x176d99=a0_0x19d63f;if(!this[_0x176d99(0x3ec)]||!this[_0x176d99(0x3de)])return;getMouseRaycaster(_raycaster,this[_0x176d99(0x253)],_0x3ba561[_0x176d99(0x142)],_0x3ba561[_0x176d99(0x386)],_0x3ba561[_0x176d99(0x28e)][_0x176d99(0x3e4)]());const _0x37d897=_raycaster[_0x176d99(0x106)][_0x176d99(0x288)](planeXY,curPos);if(!_0x37d897)return;worldPos[_0x176d99(0x357)](_0x37d897),dir1[_0x176d99(0x357)](worldPos)['sub'](downPosWorld),downPosWorld[_0x176d99(0x357)](worldPos),_0x37d897[_0x176d99(0x3b7)](matInv);let _0x1f332c=_0x37d897['x']-downPos['x'],_0x184ae3=_0x37d897['y']-downPos['y'];const _0x58ffb0=this[_0x176d99(0x134)]*0x2*this[_0x176d99(0x154)]['x'],_0x4154b4=this[_0x176d99(0x35b)]*0x2*this[_0x176d99(0x154)]['y'];let _0x3579e1=_0x4154b4,_0x137513=_0x58ffb0;_0x3ba561[_0x176d99(0x276)]&&(_0x1f332c*=0x2,_0x184ae3*=0x2);switch(this[_0x176d99(0x30a)]){case 0x0:_0x3579e1=_0x4154b4+_0x184ae3;break;case 0x4:_0x3579e1=_0x4154b4-_0x184ae3;break;case 0x6:_0x137513=_0x58ffb0-_0x1f332c;break;case 0x2:_0x137513=_0x58ffb0+_0x1f332c;break;case 0x3:_0x137513=_0x58ffb0+_0x1f332c,_0x3579e1=_0x4154b4-_0x184ae3;break;case 0x1:_0x137513=_0x58ffb0+_0x1f332c,_0x3579e1=_0x4154b4+_0x184ae3;break;case 0x7:_0x137513=_0x58ffb0-_0x1f332c,_0x3579e1=_0x4154b4+_0x184ae3;break;case 0x5:_0x137513=_0x58ffb0-_0x1f332c,_0x3579e1=_0x4154b4-_0x184ae3;break;case 0x8:this[_0x176d99(0x225)][_0x176d99(0x357)](_quatBak),_endDir[_0x176d99(0x357)](worldPos)[_0x176d99(0x343)](this[_0x176d99(0x3ce)])[_0x176d99(0x284)](matInv),_startV2[_0x176d99(0x357)](_startDir),_endV2['copy'](_endDir);const _0x18a9cc=getOldToNewAngle(_startV2,_endV2);this[_0x176d99(0x28f)](_0x18a9cc),this[_0x176d99(0x3ec)][_0x176d99(0x225)][_0x176d99(0x357)](this[_0x176d99(0x225)]);this[_0x176d99(0x10e)]&&this[_0x176d99(0x3ec)][_0x176d99(0x225)][_0x176d99(0xfe)](this[_0x176d99(0x189)]);return;default:return;}if(_0x3ba561[_0x176d99(0x3c3)]&&[0x1,0x3,0x5,0x7]['includes'](this[_0x176d99(0x30a)])){const _0x176ad1=Math[_0x176d99(0x3ca)](_0x137513/_0x58ffb0),_0x597318=Math[_0x176d99(0x3ca)](_0x3579e1/_0x4154b4),_0x1d9673=Math[_0x176d99(0x40d)](_0x176ad1,_0x597318);_0x137513=_0x58ffb0*_0x1d9673,_0x3579e1=_0x4154b4*_0x1d9673;switch(this[_0x176d99(0x30a)]){case 0x3:_0x1f332c=_0x137513-_0x58ffb0,_0x184ae3=_0x4154b4-_0x3579e1;break;case 0x1:_0x1f332c=_0x137513-_0x58ffb0,_0x184ae3=_0x3579e1-_0x4154b4;break;case 0x7:_0x1f332c=_0x58ffb0-_0x137513,_0x184ae3=_0x3579e1-_0x4154b4;break;case 0x5:_0x1f332c=_0x58ffb0-_0x137513,_0x184ae3=_0x4154b4-_0x3579e1;break;}}if(this[_0x176d99(0x30a)]>-0x1&&this[_0x176d99(0x30a)]<0x8){if(!_0x3ba561[_0x176d99(0x276)]){let _0x19e9e3=0x0,_0x220e06=0x0;switch(this[_0x176d99(0x30a)]){case 0x0:case 0x4:_0x220e06=_0x184ae3*0.5;break;case 0x6:case 0x2:_0x19e9e3=_0x1f332c*0.5;break;case 0x3:case 0x1:case 0x7:case 0x5:_0x19e9e3=_0x1f332c*0.5,_0x220e06=_0x184ae3*0.5;break;default:_0x19e9e3=_0x1f332c,_0x220e06=_0x184ae3;break;}offset[_0x176d99(0x3b0)](_0x19e9e3,_0x220e06,0x0)[_0x176d99(0xd7)](_quat),this[_0x176d99(0x3ce)]['copy'](offset)[_0x176d99(0x37e)](oldPos),this[_0x176d99(0x3ec)]['position'][_0x176d99(0x357)](this['position']),this[_0x176d99(0x10e)]&&this['object'][_0x176d99(0x3ce)][_0x176d99(0x3b7)](this['parentMatInv']);}_size[_0x176d99(0x3b0)](_0x137513,_0x3579e1,0x1),this[_0x176d99(0x147)][_0x176d99(0x357)](_size),this[_0x176d99(0x328)](_size),_scale[_0x176d99(0x357)](_size)['divide'](_size0)[_0x176d99(0x2b5)](this[_0x176d99(0x14a)]),this['object'][_0x176d99(0x154)]['copy'](_scale);}}function onDragEnd(_0x4bebf2){const _0x119c77=a0_0x19d63f;this[_0x119c77(0x3de)]=![],this[_0x119c77(0xf9)]['style'][_0x119c77(0x2c5)]=_0x119c77(0x264),this[_0x119c77(0x3ec)]&&(this[_0x119c77(0x213)](eventDragEnd),eventDragEnd[_0x119c77(0x382)]['copy'](this[_0x119c77(0x3ec)][_0x119c77(0x154)]),eventDragEnd[_0x119c77(0x273)][_0x119c77(0x357)](this[_0x119c77(0x3ec)][_0x119c77(0x1a7)]));}class Transform2dControl extends a0_0x412c21[a0_0x19d63f(0x2ae)]{[a0_0x19d63f(0x253)];['object']=null;[a0_0x19d63f(0x10e)]=null;['_quatInv']=new a0_0x412c21[(a0_0x19d63f(0x364))]();[a0_0x19d63f(0x14a)]=new a0_0x412c21['Vector3'](0x1,0x1,0x1);[a0_0x19d63f(0x147)]=new a0_0x412c21['Vector3'](0x1,0x1,0x1);[a0_0x19d63f(0x351)]=[];[a0_0x19d63f(0x30a)]=-0x1;[a0_0x19d63f(0x134)]=0x1;[a0_0x19d63f(0x35b)]=0x1;[a0_0x19d63f(0x3de)]=![];constructor(_0x97d0b8,_0x4cfc60){const _0x1a19a8=a0_0x19d63f;super(),this[_0x1a19a8(0x253)]=_0x97d0b8,_0x4cfc60===undefined&&(_0x4cfc60=document),this[_0x1a19a8(0xf9)]=_0x4cfc60,this[_0x1a19a8(0x410)]=![],this[_0x1a19a8(0x1b5)](),this[_0x1a19a8(0x400)]=onDragStart[_0x1a19a8(0x3d4)](this),this[_0x1a19a8(0x337)]=onDragging[_0x1a19a8(0x3d4)](this),this[_0x1a19a8(0x2cb)]=onDragEnd[_0x1a19a8(0x3d4)](this),this[_0x1a19a8(0x336)]=WorldConfig[_0x1a19a8(0x1a8)],_0x4cfc60[_0x1a19a8(0x31b)](_0x1a19a8(0x126),this[_0x1a19a8(0x400)]),_0x4cfc60[_0x1a19a8(0x31b)](_0x1a19a8(0x355),this[_0x1a19a8(0x337)]),_0x4cfc60[_0x1a19a8(0x31b)](_0x1a19a8(0x340),this['_onDragEnd']);}['dispose'](){const _0x2370f5=a0_0x19d63f;this[_0x2370f5(0xf9)][_0x2370f5(0x27b)](_0x2370f5(0x126),this[_0x2370f5(0x400)]),this[_0x2370f5(0xf9)][_0x2370f5(0x27b)](_0x2370f5(0x355),this[_0x2370f5(0x337)]),this['domElement'][_0x2370f5(0x27b)](_0x2370f5(0x340),this['_onDragEnd']),this[_0x2370f5(0x2f5)](_0x573306=>{const _0x565509=_0x2370f5;if(_0x573306[_0x565509(0x163)])_0x573306['geometry']['dispose']();if(_0x573306['material'])_0x573306[_0x565509(0x133)][_0x565509(0x3a5)]();}),this[_0x2370f5(0x11a)]();}[a0_0x19d63f(0x1b5)](){const _0x3a333d=a0_0x19d63f,_0x1fd6b3=new a0_0x412c21['Vector3'](0x0,0.5,0x0),_0x4c1939=new a0_0x412c21['Vector3'](0.5,0.5,0x0),_0x5b46bf=new a0_0x412c21['Vector3'](0.5,0x0,0x0),_0x2f97c2=new a0_0x412c21[(_0x3a333d(0x1c6))](0.5,-0.5,0x0),_0x5948d5=new a0_0x412c21[(_0x3a333d(0x1c6))](0x0,-0.5,0x0),_0x20146d=new a0_0x412c21['Vector3'](-0.5,-0.5,0x0),_0x2b8fbd=new a0_0x412c21[(_0x3a333d(0x1c6))](-0.5,0x0,0x0),_0x2f0dd5=new a0_0x412c21[(_0x3a333d(0x1c6))](-0.5,0.5,0x0),_0x4af3c6=new a0_0x412c21[(_0x3a333d(0x1c6))](0x0,0x1,0x0),_0x38e4c3=[_0x1fd6b3,_0x4c1939,_0x5b46bf,_0x2f97c2,_0x5948d5,_0x20146d,_0x2b8fbd,_0x2f0dd5];_0x38e4c3[_0x3a333d(0x24a)](_0x5de384=>{const _0x5cf343=_0x3a333d,_0x2ad8e1=new SquareItem();_0x2ad8e1['position'][_0x5cf343(0x357)](_0x5de384),this[_0x5cf343(0x37e)](_0x2ad8e1),this[_0x5cf343(0x351)][_0x5cf343(0x32e)](_0x2ad8e1);});const _0x4eb264=new RoundItem();_0x4eb264['position']['copy'](_0x4af3c6),this[_0x3a333d(0x37e)](_0x4eb264),this[_0x3a333d(0x351)]['push'](_0x4eb264);}[a0_0x19d63f(0x328)](_0x22ab29){const _0x32c555=a0_0x19d63f,_0x48612d=_0x22ab29['x']*0.5/this[_0x32c555(0x154)]['x'],_0x509691=_0x22ab29['y']*0.5/this[_0x32c555(0x154)]['y'],[_0x1b124a,_0x53c3db,_0x125f3c,_0x2fd2c0,_0x45cf47,_0x5bfa1c,_0x329ce3,_0x8f6eae,_0x3ea3a7]=this[_0x32c555(0x351)];_0x1b124a['position'][_0x32c555(0x3b0)](0x0,_0x509691,0x0),_0x53c3db[_0x32c555(0x3ce)][_0x32c555(0x3b0)](_0x48612d,_0x509691,0x0),_0x125f3c[_0x32c555(0x3ce)]['set'](_0x48612d,0x0,0x0),_0x2fd2c0['position'][_0x32c555(0x3b0)](_0x48612d,-_0x509691,0x0),_0x45cf47[_0x32c555(0x3ce)][_0x32c555(0x3b0)](0x0,-_0x509691,0x0),_0x5bfa1c[_0x32c555(0x3ce)]['set'](-_0x48612d,-_0x509691,0x0),_0x329ce3['position']['set'](-_0x48612d,0x0,0x0),_0x8f6eae[_0x32c555(0x3ce)][_0x32c555(0x3b0)](-_0x48612d,_0x509691,0x0),_0x3ea3a7[_0x32c555(0x3ce)][_0x32c555(0x3b0)](0x0,_0x509691+0x1,0x0);}[a0_0x19d63f(0x20b)](_0x4393dd){const _0x14b5b9=a0_0x19d63f;eventDragEnd[_0x14b5b9(0x382)][_0x14b5b9(0x357)](_0x4393dd[_0x14b5b9(0x154)]),eventDragEnd[_0x14b5b9(0x273)][_0x14b5b9(0x357)](_0x4393dd['rotation']),_0x4393dd[_0x14b5b9(0x105)](),_0x4393dd[_0x14b5b9(0x2d7)]['decompose'](_pos,_quat,_scale0),this[_0x14b5b9(0x3ce)]['copy'](_pos),this['quaternion'][_0x14b5b9(0x357)](_quat);if(_0x4393dd['geometry'])_box[_0x14b5b9(0xfc)](_0x4393dd[_0x14b5b9(0x163)][_0x14b5b9(0x3aa)][_0x14b5b9(0x3ce)]);else{const _0x5a56ca=new a0_0x412c21['Vector3']()[_0x14b5b9(0x357)](_0x4393dd[_0x14b5b9(0x154)]);_0x4393dd[_0x14b5b9(0x154)]['set'](0x1,0x1,0x1),_0x4393dd[_0x14b5b9(0x350)](![],!![]),_box[_0x14b5b9(0xde)](_0x4393dd,!![]),_0x4393dd[_0x14b5b9(0x154)][_0x14b5b9(0x357)](_0x5a56ca);}_box[_0x14b5b9(0x1eb)](_size0),_size0['z']=0x1,this[_0x14b5b9(0x147)]['copy'](_size0)[_0x14b5b9(0x2b5)](_scale0),this['_updateBtnPositions'](this[_0x14b5b9(0x147)]),this[_0x14b5b9(0x410)]=!![],this[_0x14b5b9(0x3ec)]=_0x4393dd,this[_0x14b5b9(0x14a)][_0x14b5b9(0x3b0)](0x1,0x1,0x1),_0x4393dd['parent']&&_0x4393dd['parent']['parent']&&(_0x4393dd[_0x14b5b9(0x1b1)][_0x14b5b9(0x105)](),this[_0x14b5b9(0x10e)]=new a0_0x412c21[(_0x14b5b9(0x1f6))]()[_0x14b5b9(0x357)](_0x4393dd[_0x14b5b9(0x1b1)][_0x14b5b9(0x2d7)])[_0x14b5b9(0x39c)](),this[_0x14b5b9(0x10e)][_0x14b5b9(0x2a7)](new a0_0x412c21[(_0x14b5b9(0x1c6))](),this[_0x14b5b9(0x189)],this['_parentScaleInv']));}[a0_0x19d63f(0x3a9)](){const _0xa3bf25=a0_0x19d63f;return this[_0xa3bf25(0x3ec)]=null,this['parentMatInv']=null,this[_0xa3bf25(0x410)]=![],this;}[a0_0x19d63f(0x105)](_0x3cb659){const _0xf4117=a0_0x19d63f;let _0x35aad7;this[_0xf4117(0x253)][_0xf4117(0x306)]?_0x35aad7=(this[_0xf4117(0x253)][_0xf4117(0x1d7)]-this[_0xf4117(0x253)]['bottom'])/this[_0xf4117(0x253)][_0xf4117(0x1a1)]:(_modelViewMatrix[_0xf4117(0x315)](this['camera'][_0xf4117(0x187)],this[_0xf4117(0x2d7)]),_mvPosition[_0xf4117(0x13d)](_modelViewMatrix),_0x35aad7=-_mvPosition['z']*this[_0xf4117(0x253)][_0xf4117(0x3fd)]/0x78),this[_0xf4117(0x154)][_0xf4117(0x3b0)](0x1,0x1,0x1)[_0xf4117(0x365)](_0x35aad7*0.12),!oldScale[_0xf4117(0x396)](this[_0xf4117(0x154)])&&(oldScale[_0xf4117(0x357)](this[_0xf4117(0x154)]),this[_0xf4117(0x328)](this[_0xf4117(0x147)])),super['updateMatrixWorld'](_0x3cb659);}}const box3=new a0_0x412c21[(a0_0x19d63f(0x16a))](),boxCenter$1=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function createAdhereLines(_0x2ed955){const _0x3c1dae=a0_0x19d63f,_0x150bf1=0x2710,_0x57551f=new a0_0x412c21['Vector3'](0x0,-0x2710,0x0),_0xea73f1=new a0_0x412c21[(_0x3c1dae(0x1c6))](0x0,_0x150bf1,0x0),_0x322243=new a0_0x412c21[(_0x3c1dae(0x1c6))](-0x2710,0x0,0x0),_0x3cbfe7=new a0_0x412c21[(_0x3c1dae(0x1c6))](_0x150bf1,0x0,0x0),_0x2e0b1d=createContourLine([[_0x57551f,_0xea73f1]],0x0,_0x3c1dae(0x216),!![],[0x0]),_0x736fb4=createContourLine([[_0x322243,_0x3cbfe7]],0x0,_0x3c1dae(0x216),!![],[0x0]),_0x19a35f=[_0x2e0b1d,_0x2e0b1d['clone'](),_0x2e0b1d[_0x3c1dae(0x2a8)](),_0x736fb4,_0x736fb4[_0x3c1dae(0x2a8)](),_0x736fb4[_0x3c1dae(0x2a8)]()];return _0x19a35f['forEach'](_0x1e9104=>{const _0x36f95a=_0x3c1dae;_0x2ed955['add'](_0x1e9104),_0x1e9104[_0x36f95a(0x410)]=![],_0x1e9104[_0x36f95a(0x336)]=WorldConfig[_0x36f95a(0x1ae)];}),_0x19a35f;}function addArrayItem(_0x54d238,_0x1cd8e4){const _0x596e6e=a0_0x19d63f;!_0x54d238[_0x596e6e(0x119)](_0x1cd8e4)&&_0x54d238[_0x596e6e(0x32e)](_0x1cd8e4);}class AdhereUtil{[a0_0x19d63f(0x25d)];[a0_0x19d63f(0x2f6)];['adhering']=![];[a0_0x19d63f(0x2b7)]=![];[a0_0x19d63f(0x1e2)]=![];['pureGroups']=![];[a0_0x19d63f(0x2b9)]=[];[a0_0x19d63f(0x37c)]=[];['lines']=[];[a0_0x19d63f(0x13f)]=[];[a0_0x19d63f(0x1a9)]=[];constructor(_0x235ee1){const _0x33af94=a0_0x19d63f;this[_0x33af94(0x25d)]=_0x235ee1,this['scene3d']=_0x235ee1[_0x33af94(0x2f6)];const _0x44504c=createAdhereLines(this[_0x33af94(0x2f6)]['scene']);this['vLines']=_0x44504c[_0x33af94(0x3b6)](0x0,0x3),this[_0x33af94(0x37c)]=_0x44504c[_0x33af94(0x3b6)](0x3,0x6),this[_0x33af94(0x178)]=_0x44504c;}[a0_0x19d63f(0x2b6)](){const _0x53ac6a=a0_0x19d63f,_0x47d508=this[_0x53ac6a(0x25d)],_0x2b234b=this[_0x53ac6a(0x2f6)]['scene'];if((_0x47d508[_0x53ac6a(0x40b)]||_0x47d508[_0x53ac6a(0x140)])&&this[_0x53ac6a(0x34a)]){const _0x5d285c=_0x47d508[_0x53ac6a(0x3e5)]();let _0x4d35ea=0x0,_0x2bc2a4=0x0,_0x45194d=0x0;const _0xd9b2c9=[];_0x5d285c[_0x53ac6a(0x156)](_0x108e80=>{const _0xf4fc22=_0x53ac6a;if(_0x108e80 instanceof Area2dMesh)_0x4d35ea++;else{if(_0x108e80 instanceof Lines2dEntity)_0x2bc2a4++;else _0x108e80 instanceof GroupEntity&&(_0x45194d++,_0x47d508[_0xf4fc22(0x40b)]&&_0xd9b2c9[_0xf4fc22(0x32e)](..._0x108e80[_0xf4fc22(0x214)]()));}_0xd9b2c9[_0xf4fc22(0x32e)](_0x108e80);}),this[_0x53ac6a(0x2b7)]=_0x4d35ea&&!_0x2bc2a4&&!_0x45194d,this[_0x53ac6a(0x1e2)]=!_0x4d35ea&&_0x2bc2a4&&!_0x45194d,this['pureGroups']=!_0x4d35ea&&!_0x2bc2a4&&_0x45194d;if(this[_0x53ac6a(0x2b7)]||this[_0x53ac6a(0x1e2)]||this[_0x53ac6a(0x1bc)]){if(this[_0x53ac6a(0x25d)][_0x53ac6a(0x140)]){const _0x41ab31=[];this[_0x53ac6a(0x25d)][_0x53ac6a(0x161)][_0x53ac6a(0x156)](_0x222be6=>{const _0x3e5a55=_0x53ac6a;if(_0x222be6['parent']===_0x2b234b){const _0x42dbfe=_0x222be6['getChildEntities']();_0x41ab31[_0x3e5a55(0x32e)](..._0x42dbfe);}}),_0xd9b2c9['length']=0x0;if(this[_0x53ac6a(0x2b7)])_0xd9b2c9[_0x53ac6a(0x32e)](..._0x47d508[_0x53ac6a(0xf2)]),_0xd9b2c9[_0x53ac6a(0x32e)](..._0x41ab31);else{if(this[_0x53ac6a(0x1e2)])_0xd9b2c9[_0x53ac6a(0x32e)](..._0x47d508['area2dMeshes']),_0xd9b2c9['push'](..._0x41ab31);else this[_0x53ac6a(0x1bc)]&&(_0xd9b2c9[_0x53ac6a(0x32e)](..._0x47d508['area2dMeshes']),_0xd9b2c9['push'](..._0x47d508['lines2dEntities']));}}this['initAdhereValues'](_0xd9b2c9);}}}[a0_0x19d63f(0x31a)](_0x9995e6){const _0x16a408=a0_0x19d63f;if(!this[_0x16a408(0x34a)])return;const _0x12620a=this['store'],_0x4ba105=_0x12620a[_0x16a408(0xf2)][_0x16a408(0x209)](_0x4ee86f=>!_0x9995e6['includes'](_0x4ee86f)),_0xee22a4=_0x12620a['area2dMeshes'][_0x16a408(0x209)](_0x266d7a=>!_0x9995e6[_0x16a408(0x119)](_0x266d7a)),_0x5a4f46=_0x12620a[_0x16a408(0x161)]['filter'](_0x25f7f7=>!_0x9995e6[_0x16a408(0x119)](_0x25f7f7)),_0x347cae=_0x4ba105[_0x16a408(0x2c7)](_0xee22a4)['concat'](_0x5a4f46),_0x5ac962=new Set(),_0x4a5aba=new Set();_0x347cae[_0x16a408(0x156)](_0x4d4e4d=>{const _0x5b3a8c=_0x16a408;if(_0x4ba105[_0x5b3a8c(0x119)](_0x4d4e4d))box3[_0x5b3a8c(0xfc)](_0x4d4e4d[_0x5b3a8c(0xef)]['geometry'][_0x5b3a8c(0x3aa)][_0x5b3a8c(0x3ce)]),box3[_0x5b3a8c(0x3b7)](_0x4d4e4d[_0x5b3a8c(0x2d7)]);else _0xee22a4['includes'](_0x4d4e4d)?(box3[_0x5b3a8c(0xfc)](_0x4d4e4d['geometry'][_0x5b3a8c(0x3aa)][_0x5b3a8c(0x3ce)]),box3[_0x5b3a8c(0x3b7)](_0x4d4e4d[_0x5b3a8c(0x2d7)])):box3[_0x5b3a8c(0xde)](_0x4d4e4d,!![]);box3[_0x5b3a8c(0x111)](boxCenter$1),_0x5ac962[_0x5b3a8c(0x37e)](box3[_0x5b3a8c(0x11d)]['x']),_0x5ac962[_0x5b3a8c(0x37e)](boxCenter$1['x']),_0x5ac962['add'](box3[_0x5b3a8c(0x40d)]['x']),_0x4a5aba[_0x5b3a8c(0x37e)](box3[_0x5b3a8c(0x11d)]['y']),_0x4a5aba['add'](boxCenter$1['y']),_0x4a5aba['add'](box3[_0x5b3a8c(0x40d)]['y']);}),this[_0x16a408(0x13f)]=[..._0x5ac962],this[_0x16a408(0x1a9)]=[..._0x4a5aba];}['appendAdhereValues'](_0x2b39dc){const _0x173a15=a0_0x19d63f;box3['setFromBufferAttribute'](_0x2b39dc[_0x173a15(0x163)][_0x173a15(0x3aa)][_0x173a15(0x3ce)]),_0x2b39dc[_0x173a15(0x105)](),box3[_0x173a15(0x3b7)](_0x2b39dc['matrixWorld']),box3[_0x173a15(0x111)](boxCenter$1);const {xValues:_0x1caffe,yValues:_0x108f2f}=this;addArrayItem(_0x1caffe,box3[_0x173a15(0x11d)]['x']),addArrayItem(_0x1caffe,boxCenter$1['x']),addArrayItem(_0x1caffe,box3[_0x173a15(0x40d)]['x']),addArrayItem(_0x108f2f,box3['min']['y']),addArrayItem(_0x108f2f,boxCenter$1['y']),addArrayItem(_0x108f2f,box3['max']['y']);}[a0_0x19d63f(0x2fc)](){const _0x7bd448=a0_0x19d63f;this[_0x7bd448(0x178)]['forEach'](_0x40a08b=>_0x40a08b[_0x7bd448(0x410)]=![]),this[_0x7bd448(0x13f)]['length']=0x0;}[a0_0x19d63f(0x3da)](_0x48455f,_0x350739){const _0x581ab1=a0_0x19d63f;this[_0x581ab1(0x178)][_0x581ab1(0x156)](_0x1e3942=>_0x1e3942[_0x581ab1(0x410)]=![]);if(!this[_0x581ab1(0x34a)]||!_0x48455f['length']||!this['xValues'][_0x581ab1(0x180)])return[];const _0x16bf55=getClosestSpan(_0x48455f,this[_0x581ab1(0x13f)]),_0x57699c=getClosestSpan(_0x350739,this[_0x581ab1(0x1a9)]);for(let _0x2e2f00=0x1;_0x2e2f00<_0x16bf55[_0x581ab1(0x180)];_0x2e2f00++){const _0x3144eb=this[_0x581ab1(0x2b9)][_0x2e2f00-0x1];_0x3144eb['position']['x']=_0x16bf55[_0x2e2f00],_0x3144eb[_0x581ab1(0x410)]=!![];}for(let _0x1f2506=0x1;_0x1f2506<_0x57699c[_0x581ab1(0x180)];_0x1f2506++){const _0x33b025=this[_0x581ab1(0x37c)][_0x1f2506-0x1];_0x33b025[_0x581ab1(0x3ce)]['y']=_0x57699c[_0x1f2506],_0x33b025['visible']=!![];}const _0x592567=_0x16bf55[_0x581ab1(0x180)]?_0x16bf55[0x0]:0x0,_0x34d9ba=_0x57699c[_0x581ab1(0x180)]?_0x57699c[0x0]:0x0;return[_0x592567,_0x34d9ba];}}let pasteStartPos=null;const pastingPos=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),pasteOffset=new a0_0x412c21[(a0_0x19d63f(0x1c6))](),pastingItems=[],pasteBakPos=[],box=new a0_0x412c21[(a0_0x19d63f(0x16a))](),boxCenter=new a0_0x412c21[(a0_0x19d63f(0x1c6))]();function clearPastingItems(){const _0xe43ebe=a0_0x19d63f;pastingItems[_0xe43ebe(0x156)](_0x2051a2=>{const _0x536f18=_0xe43ebe;_0x2051a2[_0x536f18(0x32c)]['pasting']=undefined,_0x2051a2['removeFromParent'](),_0x2051a2[_0x536f18(0x32c)]=undefined;}),pastingItems[_0xe43ebe(0x180)]=0x0,pasteBakPos[_0xe43ebe(0x180)]=0x0,pasteStartPos=null;}function dropdownPastingItems(_0x775c1b,_0x2e67b9){const _0x4500f9=a0_0x19d63f,_0x8b63bf=[];return pastingItems[_0x4500f9(0x156)](_0x122822=>{const _0x44a371=_0x4500f9,_0x1105f5=_0x122822[_0x44a371(0x32c)]['dropdownPaste']();_0x775c1b[_0x44a371(0x37e)](_0x1105f5),_0x2e67b9[_0x44a371(0x326)](_0x1105f5),_0x8b63bf[_0x44a371(0x32e)](_0x1105f5);}),_0x8b63bf;}class PastingPlugin extends PluginBase{[a0_0x19d63f(0x2f6)];constructor(_0x584039){super(),this['scene3d']=_0x584039;}[a0_0x19d63f(0x2b4)](){const _0x66d3a=a0_0x19d63f,{scene:_0x1150af,store:_0x2a7a83}=this[_0x66d3a(0x2f6)],_0x51e79e=_0x2a7a83[_0x66d3a(0x3e5)]();if(!_0x51e79e[_0x66d3a(0x180)])return;clearPastingItems(),_0x51e79e[_0x66d3a(0x156)](_0x42ee40=>{const _0x5dab9a=_0x66d3a,_0x4d7a07=_0x42ee40[_0x5dab9a(0x22e)]();pastingItems[_0x5dab9a(0x32e)](_0x4d7a07),_0x1150af['add'](_0x4d7a07),pasteBakPos[_0x5dab9a(0x32e)](_0x4d7a07['position'][_0x5dab9a(0x2a8)]());}),_0x2a7a83[_0x66d3a(0x1f9)]();}[a0_0x19d63f(0x2dd)](_0x119426){const _0x2a15d3=a0_0x19d63f,{scene:_0x4c136f,store:_0x5303ac,adhereUtil:_0x3ca243}=this['scene3d'];if(!_0x5303ac[_0x2a15d3(0x140)])return;const _0x3ba258=this[_0x2a15d3(0x2f6)][_0x2a15d3(0x143)];if(!pasteStartPos){pasteStartPos=_0x3ba258[_0x2a15d3(0x106)][_0x2a15d3(0x288)](planeXY,new a0_0x412c21[(_0x2a15d3(0x1c6))]());_0x3ca243[_0x2a15d3(0x34a)]&&(box[_0x2a15d3(0x3fc)](),_0x5303ac[_0x2a15d3(0x3e5)]()[_0x2a15d3(0x156)](_0x3083cc=>{const _0x2b762d=_0x2a15d3;box[_0x2b762d(0x27f)](_0x3083cc,!![]);}),box[_0x2a15d3(0x111)](boxCenter));return;}else _0x3ba258[_0x2a15d3(0x106)]['intersectPlane'](planeXY,pastingPos);pasteOffset[_0x2a15d3(0x357)](pastingPos)[_0x2a15d3(0x343)](pasteStartPos);if(_0x3ca243[_0x2a15d3(0x34a)]){const _0x21ae74=[box[_0x2a15d3(0x11d)]['x']+pasteOffset['x'],boxCenter['x']+pasteOffset['x'],box[_0x2a15d3(0x40d)]['x']+pasteOffset['x']],_0x22936c=[box['min']['y']+pasteOffset['y'],boxCenter['y']+pasteOffset['y'],box['max']['y']+pasteOffset['y']],_0x2d259e=_0x3ca243[_0x2a15d3(0x3da)](_0x21ae74,_0x22936c);if(_0x2d259e[_0x2a15d3(0x180)]){const [_0x225624,_0x3ccc2d]=_0x2d259e;pasteOffset['x']+=_0x225624,pasteOffset['y']+=_0x3ccc2d;}}pastingItems['forEach']((_0x2ad565,_0x18f06d)=>{const _0x338145=_0x2a15d3;_0x2ad565[_0x338145(0x3ce)][_0x338145(0x357)](pasteBakPos[_0x18f06d])['add'](pasteOffset);});}[a0_0x19d63f(0x2f4)](_0x9c6ffd){const _0x3ba227=a0_0x19d63f,{scene:_0x43140e,store:_0x1c46e4}=this['scene3d'];if(_0x1c46e4[_0x3ba227(0x140)]){if(_0x9c6ffd[_0x3ba227(0x193)]===MouseButton['right'])clearPastingItems(),_0x1c46e4['freeState']();else{if(_0x9c6ffd['button']===MouseButton['left']){const _0x16c5a7=dropdownPastingItems(_0x43140e,_0x1c46e4),_0x32aea7=_0x1c46e4[_0x3ba227(0x394)],_0x5c77d7=_0x1c46e4['lines2dEntities'],_0x1f6292=_0x1c46e4[_0x3ba227(0x161)];this[_0x3ba227(0x2f6)]['editRecord'][_0x3ba227(0x346)](UndoType[_0x3ba227(0x230)],{'scene':_0x43140e,'pasteItems':_0x16c5a7,'arrArea':_0x32aea7,'arrLine':_0x5c77d7,'arrGroup':_0x1f6292});}}}}}class EditAction{constructor(_0x1bb66a,_0x210a84){const _0x3fb1bb=a0_0x19d63f;this[_0x3fb1bb(0x108)]=_0x1bb66a,this[_0x3fb1bb(0x1fa)]=_0x210a84;const _0x3294af=UndoType[_0x3fb1bb(0x1fe)][_0x3fb1bb(0x3d5)](this[_0x3fb1bb(0x108)]);if(_0x3294af>=0x0){let _0x5ee3da=_0x3294af+0x1;_0x3294af%0x2===0x1&&(_0x5ee3da=_0x3294af-0x1),this[_0x3fb1bb(0x153)]=UndoType[_0x3fb1bb(0x1fe)][_0x5ee3da];}}['undo'](){const _0x294f0b=a0_0x19d63f;cmdExecutor[_0x294f0b(0x320)](this[_0x294f0b(0x108)],this[_0x294f0b(0x1fa)]);}[a0_0x19d63f(0x416)](){const _0x3193a9=a0_0x19d63f;cmdExecutor[_0x3193a9(0x320)](this[_0x3193a9(0x153)],this[_0x3193a9(0x1fa)]);}}class CommandExecutor{[a0_0x19d63f(0x320)](_0x31bf3c,_0xfa2311){const _0x1f1222=a0_0x19d63f;switch(_0x31bf3c){case UndoType[_0x1f1222(0x1b9)]:case UndoType['addItems']:{const {parents:_0x354564,addedItems:_0x36edd0,removedItems:_0x47afd3,arrItems:_0x186c68}=_0xfa2311;_0x31bf3c===UndoType['removeItems']?(_0x47afd3[_0x1f1222(0x156)]((_0x18e972,_0x1cd188)=>{const _0x3296a6=_0x1f1222;_0x354564[_0x1cd188][_0x3296a6(0x37e)](_0x18e972),_0x186c68[_0x3296a6(0x32e)](_0x18e972);}),_0xfa2311['undoRemove']&&_0xfa2311['undoRemove'](_0x47afd3)):(arrAsubB(_0x186c68,_0x36edd0),_0x36edd0[_0x1f1222(0x156)](_0x900d90=>_0x900d90[_0x1f1222(0x11a)]()),_0xfa2311[_0x1f1222(0x412)]&&_0xfa2311[_0x1f1222(0x412)](_0x36edd0));_0xfa2311[_0x1f1222(0x19c)]=_0x36edd0,_0xfa2311[_0x1f1222(0x26b)]=_0x47afd3;break;}case UndoType[_0x1f1222(0x230)]:case UndoType[_0x1f1222(0x1ff)]:{const {scene:_0x52b3c2,pasteItems:_0x1d4118,arrArea:_0x2298bf,arrLine:_0x56f653,arrGroup:_0x19c8fa}=_0xfa2311,_0x2c3c0a=[],_0x4b4f43=[],_0x24617f=[];_0x1d4118['forEach'](_0x177b71=>{const _0x5c6000=_0x1f1222;if(_0x177b71 instanceof Area2dMesh)_0x2c3c0a[_0x5c6000(0x32e)](_0x177b71);else{if(_0x177b71 instanceof Lines2dEntity)_0x4b4f43[_0x5c6000(0x32e)](_0x177b71);else _0x177b71 instanceof GroupEntity&&(_0x24617f['push'](_0x177b71),_0x177b71[_0x5c6000(0x214)]()['forEach'](_0x233b56=>{const _0x2e4e55=_0x5c6000;if(_0x233b56 instanceof Area2dMesh)_0x2c3c0a[_0x2e4e55(0x32e)](_0x233b56);else{if(_0x233b56 instanceof Lines2dEntity)_0x4b4f43[_0x2e4e55(0x32e)](_0x233b56);else _0x233b56 instanceof GroupEntity&&_0x24617f[_0x2e4e55(0x32e)](_0x233b56);}}));}});_0x31bf3c===UndoType[_0x1f1222(0x230)]?(arrAsubB(_0x2298bf,_0x2c3c0a),arrAsubB(_0x56f653,_0x4b4f43),arrAsubB(_0x19c8fa,_0x24617f),_0x1d4118[_0x1f1222(0x156)](_0x2c1d67=>_0x2c1d67[_0x1f1222(0x11a)]())):(_0x2298bf[_0x1f1222(0x32e)](..._0x2c3c0a),_0x56f653[_0x1f1222(0x32e)](..._0x4b4f43),_0x19c8fa[_0x1f1222(0x32e)](..._0x24617f),_0x1d4118[_0x1f1222(0x156)](_0x2581da=>_0x52b3c2[_0x1f1222(0x37e)](_0x2581da)));break;}case UndoType[_0x1f1222(0x1ca)]:case UndoType[_0x1f1222(0x3d9)]:{const {posOld:_0x3eb737,posNew:_0x326c66,scaleOld:_0x34e79e,scaleNew:_0x419644,rotOld:_0x21d30b,rotNew:_0xa3e5de,items:_0x112d86}=_0xfa2311;_0x112d86[_0x1f1222(0x156)]((_0x584685,_0x5e99d6)=>{const _0x36d6be=_0x1f1222;let _0x5b9d35,_0x1673a0,_0x458c5e;_0x31bf3c===UndoType[_0x36d6be(0x1ca)]?(_0x5b9d35=_0x3eb737?_0x3eb737[_0x5e99d6]:null,_0x1673a0=_0x34e79e?_0x34e79e[_0x5e99d6]:null,_0x458c5e=_0x21d30b?_0x21d30b[_0x5e99d6]:null):(_0x5b9d35=_0x326c66?_0x326c66[_0x5e99d6]:null,_0x1673a0=_0x419644?_0x419644[_0x5e99d6]:null,_0x458c5e=_0xa3e5de?_0xa3e5de[_0x5e99d6]:null),_0x5b9d35&&_0x584685[_0x36d6be(0x3ce)]['copy'](_0x5b9d35),_0x1673a0&&_0x584685[_0x36d6be(0x154)][_0x36d6be(0x357)](_0x1673a0),_0x458c5e&&_0x584685[_0x36d6be(0x1a7)][_0x36d6be(0x357)](_0x458c5e);});break;}case UndoType[_0x1f1222(0x397)]:case UndoType['replaceItemUndo']:{const {addedItem:_0x15b8f3,removedItem:_0x541338,arr:_0x19f6b9}=_0xfa2311;let _0x534f11,_0x5dc390;_0x31bf3c===UndoType[_0x1f1222(0x397)]?(_0x5dc390=_0x541338,_0x534f11=_0x15b8f3):(_0x5dc390=_0x15b8f3,_0x534f11=_0x541338);replaceArrayItem(_0x19f6b9,_0x5dc390,_0x534f11),_0x534f11[_0x1f1222(0x1b1)][_0x1f1222(0x37e)](_0x5dc390),_0x534f11[_0x1f1222(0x11a)]();break;}case UndoType['replaceAreas']:case UndoType['replaceAreasUndo']:{const {scene:_0x339cca,addedAreas:_0x221d74,removedAreas:_0x569cb5,arr:_0x35a4fd}=_0xfa2311;_0x31bf3c===UndoType[_0x1f1222(0x379)]?(arrAsubB(_0x35a4fd,_0x221d74),_0x221d74['forEach'](_0x2bc7d7=>_0x2bc7d7[_0x1f1222(0x11a)]()),_0x35a4fd[_0x1f1222(0x32e)](..._0x569cb5),_0x569cb5[_0x1f1222(0x156)](_0x2076d2=>_0x339cca['add'](_0x2076d2))):(arrAsubB(_0x35a4fd,_0x569cb5),_0x569cb5['forEach'](_0x3469e3=>_0x3469e3['removeFromParent']()),_0x35a4fd[_0x1f1222(0x32e)](..._0x221d74),_0x221d74[_0x1f1222(0x156)](_0x4116d6=>_0x339cca[_0x1f1222(0x37e)](_0x4116d6)));break;}case UndoType[_0x1f1222(0x24b)]:case UndoType[_0x1f1222(0x36c)]:{const {oldPos:_0x57ecf6,newPos:_0x2045e9,geometry1:_0x5893b9,geometry2:_0x4c6830,index:_0x225025}=_0xfa2311;_0x31bf3c===UndoType[_0x1f1222(0x24b)]?(updatePosAttr(_0x5893b9,_0x225025,_0x57ecf6),updatePosAttr(_0x4c6830,_0x225025,_0x57ecf6)):(updatePosAttr(_0x5893b9,_0x225025,_0x2045e9),updatePosAttr(_0x4c6830,_0x225025,_0x2045e9));break;}case UndoType[_0x1f1222(0x335)]:case UndoType[_0x1f1222(0x223)]:{const {oldPos:_0x5f4504,newPos:_0x2d28eb,entity:_0x279692,index:_0x19fa90}=_0xfa2311;_0x31bf3c===UndoType[_0x1f1222(0x335)]?_0x279692[_0x1f1222(0x196)](_0x19fa90,_0x5f4504):_0x279692['updateShape'](_0x19fa90,_0x2d28eb);break;}case UndoType[_0x1f1222(0x26f)]:case UndoType[_0x1f1222(0x2e5)]:{const {entities:_0x41f452,newColor:_0x1d368f,newOpacity:_0x64ab16,oldColor:_0x5de789,oldOpacity:_0x4658a7}=_0xfa2311;_0x41f452['forEach']((_0x3be769,_0x12beff)=>{const _0x13d116=_0x1f1222;_0x31bf3c===UndoType[_0x13d116(0x26f)]?_0x3be769['changeColorOpacity'](_0x5de789[_0x12beff],_0x4658a7[_0x12beff]):_0x3be769['changeColorOpacity'](_0x1d368f,_0x64ab16);});break;}}}}const cmdExecutor=new CommandExecutor();class EditRecord extends a0_0x412c21[a0_0x19d63f(0x2b2)]{['maximumStackLen']=0x64;[a0_0x19d63f(0x41b)]=[];[a0_0x19d63f(0x3bd)]=[];['clearAll'](){const _0x564aab=a0_0x19d63f;this[_0x564aab(0x41b)][_0x564aab(0x180)]=0x0,this[_0x564aab(0x3bd)][_0x564aab(0x180)]=0x0,this['_modified']=![];}[a0_0x19d63f(0x346)](_0x89a888,_0x2c2e80){const _0x406a2a=a0_0x19d63f;this[_0x406a2a(0x3bd)][_0x406a2a(0x180)]=0x0;const _0x3369ef=new EditAction(_0x89a888,_0x2c2e80);this['stackUndo'][_0x406a2a(0x32e)](_0x3369ef),this[_0x406a2a(0x41b)][_0x406a2a(0x180)]>this[_0x406a2a(0xe7)]&&this[_0x406a2a(0x41b)][_0x406a2a(0x1e8)](),this[_0x406a2a(0x402)]=!![];}[a0_0x19d63f(0x244)](){const _0x3a49b0=a0_0x19d63f;if(this[_0x3a49b0(0x41b)]['length']===0x0)return;const _0x218836=this['stackUndo'][_0x3a49b0(0x308)]();this['stackRedo']['push'](_0x218836),_0x218836['undo']();}['redoAction'](){const _0x527c97=a0_0x19d63f;if(this[_0x527c97(0x3bd)][_0x527c97(0x180)]===0x0)return;const _0x3dff48=this[_0x527c97(0x3bd)]['pop']();this[_0x527c97(0x41b)]['push'](_0x3dff48),_0x3dff48['redo']();}}const startPos=new a0_0x412c21[(a0_0x19d63f(0x334))](),endPos=new a0_0x412c21['Vector2']();let pointerEverMoved=![];function addGrid(_0x22b947,_0x57fdad=0x3c){const _0x27b3ba=a0_0x19d63f;let _0x4ebc81=new a0_0x412c21['GridHelper'](_0x57fdad,0x3c,0x444444,0x888888);_0x4ebc81[_0x27b3ba(0x1a7)]['x']=Math['PI']/0x2,_0x4ebc81['material']['transparent']=!![];let _0x220dc5=_0x4ebc81[_0x27b3ba(0x163)][_0x27b3ba(0x3aa)]['color'][_0x27b3ba(0x395)];for(let _0x1fdc4c=0x0;_0x1fdc4c<_0x220dc5['length'];_0x1fdc4c+=0x3c){for(let _0xb4f815=0x0;_0xb4f815<0xc;_0xb4f815++){_0x220dc5[_0x1fdc4c+_0xb4f815]=0.26;}}_0x22b947[_0x27b3ba(0x37e)](_0x4ebc81);const _0xe83f5a=getGridOrigin(0xf);_0x22b947[_0x27b3ba(0x37e)](_0xe83f5a);}function addChangeColorAction(){const _0x29089a=a0_0x19d63f,_0x29c04a=this[_0x29089a(0x185)][_0x29089a(0x3b6)](),{newColor:_0x248c49,newOpacity:_0x14056b}=this,_0x2e2358=_0x29c04a[_0x29089a(0x24a)](_0x1d16c8=>_0x1d16c8[_0x29089a(0x3a6)][_0x29089a(0x391)]),_0x5ace1f=_0x29c04a[_0x29089a(0x24a)](_0x413a2e=>_0x413a2e[_0x29089a(0x3a6)][_0x29089a(0x14d)]);_0x29c04a['forEach'](_0x4c0dee=>{const _0x30e673=_0x29089a;_0x4c0dee[_0x30e673(0x3a6)][_0x30e673(0x391)]=_0x4c0dee['vo'][_0x30e673(0x3b2)],_0x4c0dee['userData'][_0x30e673(0x14d)]=_0x4c0dee['vo'][_0x30e673(0x385)];}),this[_0x29089a(0x33f)][_0x29089a(0x346)](UndoType[_0x29089a(0x26f)],{'entities':_0x29c04a,'newColor':_0x248c49,'newOpacity':_0x14056b,'oldColor':_0x2e2358,'oldOpacity':_0x5ace1f});}function a0_0x11ee(){const _0x411be0=['type','isOpen','pageY','toggleBoundingFrame','fastKey','_jtType','Clear','ElColorPicker','rightKey','cursor','fastSpeed','concat','LineBasicMaterial','left','order','_onDragEnd','setFromRotationMatrix','setFromMatrixColumn','#00f5f5','fromArray','AddPath','version','blurCallback','Paths','isDown','选中的2d区域','KeyF','matrixWorld','enabled','setFromUnitVectors','_dimension','renderer','change','pointerMove','DEL','pasting','innerWidth','_hw0','deep','selectedGroupContents','update','changeItemsColorUndo','Group','adhereEdgeDistance','splice','parentElement','toFixed','_pastingPlugin','stateShapeOffsetting','fromBufferAttribute','updateProjectionMatrix','setFromPoints','selectionBox','appendChild','panSpeed','getAttribute','pointerUpUnmoved','traverse','scene3d','BOTTOM','toggleLines2dClosing','pageX','_unSelect','maxPolarAngle','clearLines','groupIds','parse','order_paste_item','setSize','tan','dropdownLines2d','graphic\x202d\x20edit','searchChildInFrustum','dismissGroup','isOrthographicCamera','newColor','pop','onSelectOver','interactType','_inWorldSpace','undoRemove','axesHelper','_areaMesh','KeyI','load','keys','maxAzimuthAngle','pointercancel','texture/disc.png','multiplyMatrices','LineSegments','select','AxesHelper','TWO','initAdhereValues','addEventListener','pointerUp','stateAddingLines2d','createElementNS','updateFrustum','execute','localSaveName','ArrowRight','preventDefault','Execute','area2ds','addCopiedItem','keyPanSpeed','_updateBtnPositions','className','polygonsMerge','order_vert_edit','host','#ff4500','push','ArrowUp','union','stateEditingLines2d','nw-resize','contourAcontainsB','Vector2','shapeLine','renderOrder','_onDragging','debouncedAddChangeColorAction','Line','draggingEnd','se-resize','KeyD','error','_updateLines','editRecord','pointerup','toggleSelect','#1e90ff','sub','isPoints','45qKnHDV','addAction','placement','KeyR','fly-change','adhering','isLine','body','97287cTCKRI','children','_clearAdding','updateWorldMatrix','handlers','Digit1','arrow-left','jtRound','pointermove','areasIntersect','copy','./assets/','processJoin','JoinType','halfHeight','Backspace','ctDifference','replaceAreasUndo','_updateBoundingFrame','dropdownPaste','KeyC','endPoint','redoAction','Quaternion','multiplyScalar','fromJsonObj','clientHeight','substring','addingSegments','924952jPRnCF','_perspCamera','shapeAreaUndo','renewContour','mount','adhereEntity','onPointerMove','stateAddingArea','canvas','touch','order_lines','texture/cross.png','string','selectMeshes','#0b4','replaceAreas','count','prototype','hLines','onPoint','add','_newLineByVertRemove','applyDraft','unSelectLine','oldScale','addChildGroup','getStartEnd','opacity','clientY','backupTransform','lookAt','disableShiftKeyCallback','isClockWise','Digit5','updateVO','Texture','w-resize','pointBottomRight','rgba(255,\x2069,\x200,\x200.68)','oldColor','setFromCamera','isMesh','area2dMeshes','array','equals','replaceItem','ClipType','ShaderMaterial','_vertexParticles','Plane','invert','Minus','changeLines2dColorOpacity','adhereRadiusForEditing','http://www.w3.org/1999/xhtml','start','processJoin4Adding','rafId','mapStart','dispose','userData','crossVectors','call','detach','attributes','PerspectiveCamera','_updateForDimensionChange','computeBoundingBox','getContour','PolyType','set','BufferAttribute','cssColor','computeLineDistances','setVisible','storageLoad','slice','applyMatrix4','resize','pftNonZero','KeyY','_boxMesh','PolyFillType','stackRedo','_vectors','cameraControls','RingGeometry','KeyN','removeItem','ctrlKey','addingLines2d','defineProperty','_newLineByVertAdd','initJoinHelperAdd','#ffffff','NONE','abs','forwardKey','_domElementKeyEvents','removeAreas','position','hasContents','ShapeUtils','KeyE','classList','ptSubject','bind','indexOf','0px','removeEntities','TextureLoader','unTransformItems','processAdhere','backKey','toggleOffsetting','code','dragging','distanceTo','zoomSpeed','collection','#ff6000','syncByVO','getBoundingClientRect','getMultiItemsSelection','ArrowDown','width','addingPoints','init','Digit2','editLines2d','object','points','lineTo','area2dSelected','lines2dSelected','_lineEntity','deltaY','getCircleIndex','clearSelection','pts','onSelectStart','removeSegment','fillStyle','negate','gapSize','isPerspectiveCamera','makeEmpty','fov','TOUCH_ROTATE','areaIds','_onDragStart','copyProperties','_modified','appendSelectAreas','normalize','markAsLocal','MAX_VALUE','polygonsSub','selectionBoolean','dashSize','adhereToEnd','stateFree','setAllClose','max','maxZoom','OrthographicCamera','visible','onLineRemoved','redoRemove','Raycaster','touches','_lines2dEntityPlugin','redo','extractRotation','setPointerCapture','clearPaneSelection','_initPlugins','stackUndo','getWorldPoints','KeyZ','applyQuaternion','CircleGeometry','14914636nKcxBH','isSelectable','LEFT','KeyM','setDefaultVerts','setFromObject','getMatrixAt','keyDownAlt','firstChild','ctIntersection','scaleSet','volume','editingVert2d','_area2dMeshPlugin','maximumStackLen','flatToVectors','_bacPosAttr','target0','getEtOpenType','minAzimuthAngle','arrow-right','rgb(255,\x20120,\x200)','lineSegments','rotateSpeed','storageSave','lines2dEntities','2986430fEbibG','_modifyVertPlugin','updateHoleIndicesByVertRemove','Vector4','keyup','alias','domElement','linesToAreas2d','pointInPolygon','setFromBufferAttribute','TOUCH_PAN','premultiply','#c71585','makeSafe','threshold','setStyle','phi','selectionMesh','updateMatrixWorld','ray','toggleClosing','undoType','Euler','_onWindowResize','ClipperOffset','backupShape','Equal','parentMatInv','MIDDLE','toggleAdhere','getCenter','KeyH','stringify','stopPropagation','replaceSelectArea','downKey','get','clearFlags','includes','removeFromParent','transparent','keyDownCallback','min','selectGroups','appendAdhereValues','removeGroupEntities','radius','_etOpenType','Line3','wheel','keydown','pointerdown','#90ee90','fill','insertBefore','touchAction','m_Childs','onPointerDown','enableRotate','KeyP','pointerType','minZoom','saveState','initGroupByEntities','material','halfWidth','computeBoundingSphere','closestPointToPoint','locked','find','DOLLY','offsetPolygon','s-resize','adheredPos','setFromMatrixPosition','-8px','xValues','statePastingItems','getPolarAngle','clientX','mouseRaycaster','6MocggZ','RIGHT','saveToLocalStorage','_objScale','_particles','matrix','_parentScaleInv','movingGroupItems','dampingFactor','oldOpacity','KeyV','#fff','reCenter','方案保存到本地成功！','Clipper','redoType','scale','AddPaths','forEach','baseSpeed','enableFlight','KeyQ','isEmptyGroup','clearScene','#2baeff','loadFromLocalStorage','color','keyDownCtrl','dot','groups','theta','geometry','#666','setFromSpherical','_hh0','toLowerCase','DoubleSide','center','Box3','KeyG','eventConsumed','contextmenu','cloneLine','selectionHelper','rotationOld','normal','uuid','toString','order_vert_cross','zoom0','equalPolygons','contour','lines','leftKey','point','ElButton','reset','copyPoints','boundingFrame','_segments','length','#c7158577','_tmpVectors','fly-end','ne-resize','curItems','distanceToSquared','matrixWorldInverse','_newMeshByVertRemove','_quatInv','element','dragging-end','setXYZ','isTopGroup','getStartLocalPos','_selectedAreas','joinHelper','#ffbc11','\x0a\x20\x20<div\x20class=\x22areas-bar\x22\x20v-show=\x22show\x22>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27]\x22\x20@click=\x22scene3d.performSlicing()\x22\x20title=\x22切割图形\x22\x20v-show=\x22showCut\x22>\x0a\x20\x20\x20\x20\x20\x20<el-icon>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<Scissor/>\x0a\x20\x20\x20\x20\x20\x20</el-icon>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<el-popover\x0a\x20\x20\x20\x20\x20\x20\x20\x20placement=\x22left\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20trigger=\x22click\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20effect=\x22dark\x22\x0a\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20<template\x20#reference>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22bar-item\x20bottom-border\x22\x20title=\x22渲染顺序\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_area/distance.png\x22/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</template>\x0a\x20\x20\x20\x20\x20\x20<el-input-number\x0a\x20\x20\x20\x20\x20\x20\x20\x20v-model=\x22order\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20:min=\x220\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20:max=\x221000\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20:step=\x221\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20size=\x22small\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20controls-position=\x22right\x22\x0a\x20\x20\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20</el-input-number>\x0a\x20\x20\x20\x20</el-popover>\x0a\x20\x20\x20\x20<div\x20class=\x22bar-item\x20bottom-border\x22\x20title=\x22区域颜色\x22>\x0a\x20\x20\x20\x20\x20\x20<el-color-picker\x20v-model=\x22areaColor\x22\x20show-alpha\x20:predefine=\x22predefineColors\x22\x20@active-change=\x22area2dColorChanging\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22bar-item\x20bottom-border\x22\x20title=\x22形状偏移\x22\x20@click=\x22scene3d.store.shapeOffsetting()\x22\x20v-show=\x22selectSingle\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_area/offset.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27,\x20\x27bottom-border\x27]\x22\x20@click=\x22scene3d.areasMerge()\x22\x20title=\x22合并图形\x22\x20v-show=\x22selectMulti\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar/union.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27,\x20\x27bottom-border\x27]\x22\x20@click=\x22scene3d.areasIntersect()\x22\x20title=\x22交集\x22\x20v-show=\x22selectMulti\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar/intersect.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27,\x20\x27bottom-border\x27]\x22\x20@click=\x22scene3d.areasDifference()\x22\x20title=\x22差集\x22\x20v-show=\x22selectMulti\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar/difference.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27]\x22\x20@click=\x22scene3d.areasXor()\x22\x20title=\x22异或\x22\x20v-show=\x22selectMulti\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar/xor.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22bar-item\x22\x20@click=\x22deleteArea()\x22\x20title=\x22删除\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_area/delete.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x20\x20','button','addScaledVector','#f00','updateShape','selectLine','_plugins','reverse','toJsonObj','removeAreaMeshes','removedItems','setIndex','getElementById','Mesh','pointerDown','zoom','adjustChildrenPosition','\x0a\x20\x20<div\x20class=\x22arrow-drawer\x22\x20:style=\x22boxStyleObj\x22>\x0a\x20\x20\x20\x20<div\x20:class=\x22arrowLeftClass\x22\x20:style=\x22drawerHandleStyleObj\x22\x20@click=\x22toggleVisible\x22\x20v-if=\x22placement\x20===\x20\x27right\x27\x22></div>\x0a\x20\x20\x20\x20<div\x20class=\x22arrow-drawer-wrapper\x22\x20:style=\x22wrapperStyle\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22arrow-drawer-header\x22\x20v-if=\x22title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22arrow-drawer-header-title\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{{title}}\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22arrow-drawer-body\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<slot/>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22arrowRightClass\x22\x20:style=\x22drawerHandleStyleObj\x22\x20@click=\x22toggleVisible\x22\x20v-if=\x22placement\x20===\x20\x27left\x27\x22></div>\x0a\x20\x20</div>\x0a\x20\x20','etOpenButt','clearMultiSelection','innerHeight','rotation','order_2d_transform','yValues','freeState','positionStart','hovering','component','order_adhere_lines','Digit6','PointInPolygon','parent','keydownHandler','style','BoxGeometry','_createBtns','sort','setFromVector3','divideScalar','removeItems','changeColorOpacity','atan2','pureGroups','ROTATE','height','areasXor','ptClip','order_vert_hover','transform2dControl','removeChild','boundingSphere','28gsLvaP','Vector3','#0f6e22','circlesArr','areasDifference','transformItems','#00ced1','none','_editLines2dPlugin','rotZ','params','initGroupByVO','intersectObjects','order_area','ctrlPoint','#094','\x0avarying\x20vec2\x20uv2;\x0avarying\x20vec2\x20vUv;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20vec4\x20pos\x20=\x20vec4(\x20position,\x201.0\x20);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20pos;\x0a\x0a\x20\x20\x20\x20float\x20planeConstant\x20=\x20-dot(normal,\x20position);\x0a\x20\x20\x20\x20float\x20planeToEyeDist\x20=\x20abs(dot(normal,\x20cameraPosition)\x20+\x20planeConstant);\x0a\x20\x20\x20\x20float\x20scale\x20=\x20planeToEyeDist;\x0a\x20\x20\x20\x20vec2\x20a\x20=\x20vec2(gl_Position.x\x20/\x20scale,\x20gl_Position.y\x20/\x20scale);\x0a\x20\x20\x20\x20uv2\x20=\x20(a\x20+\x201.0)\x20*\x200.5;\x0a\x20\x20\x20\x20vUv\x20=\x20uv;\x0a}\x0a\x20\x20\x20\x20','getSelectSingle','top','scene','polygonsIntersect','containsPoint','metaKey','Points','subVectors','devicePixelRatio','makeTranslation','isInstancedMesh','setFromCoplanarPoints','pureLines','Digit0','updatePositionOfVO','#0f0','clearLine','_keydownHandler','shift','sizeComputed','EndType','getSize','prepareColor','setPts','_tmpVectorsLocal','pointerUpMoved','order_joined','onLineAdd','unproject','needsUpdate','beginPath','adhereUtil','Matrix4','KeyS','enableDamping','pastingItems','context','Delete','MeshBasicMaterial','cloneGroup','list','redoCopy','isClosed','right','lines2d','ElDrawer','oldVisible','PolyTree','maxDistance','toggleVisible','appendSelectEntities','filter','Digit7','attach','_groupEntityPlugin','startPoint','点击！','ONE','fly-start','onWindowResize','startRender','dispatchEvent','getChildEntities','#000','#d40099','position0','areasToLines2d','shapeOffsetting','_lines','setEtOpenType','100%','1287hyTAxJ','removeFromStore','_selectedEntities','getDelta','div','ArrowLeft','shapeLineUndo','planes','quaternion','KeyL','curSegment','expandSlicePaths','selectArea','n-resize','listenToKeyEvents','6991760TJMHVf','_currentAdhere','createPaste','lineIds','undoCopy','stateEditingVert2d','BACK','_orthoCamera','mouseButtons','298ECGihe','minDistance','closing','onSelectMove','addingArea','setOrder','triangulate','hsva(120,\x2040,\x2094,\x200.5)','adhereRadiusForJoin','onPointerUp','success','Digit4','ScaleUpPaths','instances','screenSpacePanning','undoAction','itemSize','movingArea','boundingBox','setAttribute','updateModelData','map','shapeArea','pow','PointsMaterial','lerp','value','getAzimuthalAngle','pointerId','ctXor','camera','minPolarAngle','getJtType','miter','performance','unSelectArea','editingVert','addingAreaExpanding','slicePolygon','getEndLocalPos','store','sw-resize','round','copyWithNoVerts','dropdownArea2d','inLocalSpace','setPosition','default','Default','enableKeys','PAN','8169301wveKxi','onLineUpdate','setItem','addedItems','warn','replaceItemUndo','enablePan','changeItemsColor','\x0a\x20\x20<div\x20id=\x22box\x22\x20class=\x22full-size\x22>\x0a\x20\x20\x20\x20<input\x20type=\x22file\x22\x20id=\x22jsonInput\x22\x20style=\x22display:\x20none\x22\x20accept=\x22application/json\x22/>\x0a\x20\x20\x20\x20<LinesBar\x20class=\x22place-top-right\x22/>\x0a\x20\x20\x20\x20<AreasBar\x20class=\x22place-top-right\x22/>\x0a\x20\x20\x20\x20<ArrowDrawer\x0a\x20\x20\x20\x20\x20\x20title=\x222d编辑\x22\x0a\x20\x20\x20\x20\x20\x20:visible=\x22visi\x22\x0a\x20\x20\x20\x20\x20\x20:setVisible=\x22setVisi\x22\x0a\x20\x20\x20\x20\x20\x20:width=\x22300\x22\x0a\x20\x20\x20\x20>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22scene3d.addingArea(false,\x20areaColor)\x22>添加方块</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22scene3d.addingArea(true,\x20areaColor)\x22>添加区域</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22scene3d.editingVert()\x22>顶点编辑</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22handle\x22>边编辑</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22handle\x22>添加偏移</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22scene3d.addingLines2d()\x22>添加线条</el-button>\x0a\x20\x20\x20\x20\x20\x20<el-button\x20@click=\x22savePlan\x22>保存方案</el-button>\x0a<!--\x20\x20\x20\x20\x20\x20<el-slider\x20v-model=\x22value\x22\x20show-stops\x20:max=\x22180\x22\x20/>-->\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>新增区域颜色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<el-color-picker\x20v-model=\x22areaColor\x22\x20show-alpha\x20:predefine=\x22predefineColors\x22\x20@active-change=\x22area2dColorChanging\x22/>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>新增线条颜色</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<el-color-picker\x20v-model=\x22lineColor\x22\x20show-alpha\x20:predefine=\x22predefineColors\x22\x20@active-change=\x22lines2dColorChanging\x22/>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20<span>offset\x20join\x20type:</span>\x0a\x20\x20\x20\x20\x20\x20<el-select\x20v-model=\x22jtValue\x22\x20size=\x22small\x22\x20style=\x22width:\x20240px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<el-option\x20v-for=\x22item\x20in\x20jtOptions\x22\x20:key=\x22item.value\x22\x20:label=\x22item.label\x22\x20:value=\x22item.value\x22/>\x0a\x20\x20\x20\x20\x20\x20</el-select>\x0a\x20\x20\x20\x20\x20<span>offset\x20end\x20type:</span>\x0a\x20\x20\x20\x20\x20\x20<el-select\x20v-model=\x22etValue\x22\x20size=\x22small\x22\x20style=\x22width:\x20240px\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<el-option\x20v-for=\x22item\x20in\x20etOptions\x22\x20:key=\x22item.value\x22\x20:label=\x22item.label\x22\x20:value=\x22item.value\x22/>\x0a\x20\x20\x20\x20\x20\x20</el-select>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>吸附:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<el-switch\x20v-model=\x22switchAdhere\x22\x20inline-prompt\x20:active-icon=\x22Check\x22\x20:inactive-icon=\x22Close\x22/>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</ArrowDrawer>\x0a\x20\x20</div>','pointTopLeft','getDistanceToPoint','oldRotation','etOpenRound','verts','shiftKey','resetTransform','ctUnion','vectors','BufferGeometry','removeEventListener','updateHoleIndicesByVertAdd','emptyGroup','PlaneGeometry','expandByObject','cos','placeItem','draft','has','transformDirection','selectLines2ds','drawOffsetDraft','index','intersectPlane','Enter','altKey','unshift','initSegments','TOUCH_DOLLY_ROTATE','target','rotateZ','rgba(','performLineEntitiesMerge','jtMiter','initCameraControls','EPSILON','key','posOnEdge','etOpenSquare','cloneArea','aspect','Digit3','clearDaft','markAsWorld','_newMeshByVertAdd','setJtType','keyDownShift','etClosedLine','getContext','enableZoom','editingLines2d','render','hsla(209,\x20100%,\x2056%,\x200.73)','upKey','decompose','clone','changeArea2dColorOpacity','_box','keyUpCallback','mapEnd','copyTransform','Object3D','sqrt','polygonsBoolean','autoRotateSpeed','EventDispatcher','onEdge','startPasting','multiply','_refreshAdhereValuesPurity','pureAreas','toArray','vLines','KeyJ','unHover'];a0_0x11ee=function(){return _0x411be0;};return a0_0x11ee();}class MainScene{['scene'];[a0_0x19d63f(0x253)];[a0_0x19d63f(0x36b)];[a0_0x19d63f(0x233)];[a0_0x19d63f(0x2db)];[a0_0x19d63f(0x3bf)];[a0_0x19d63f(0x25d)];[a0_0x19d63f(0x1f5)];[a0_0x19d63f(0x143)]=new a0_0x412c21[(a0_0x19d63f(0x413))]();[a0_0x19d63f(0x2f0)];[a0_0x19d63f(0x16f)];[a0_0x19d63f(0x1c2)];[a0_0x19d63f(0x33f)]=new EditRecord();['_plugins']=[];[a0_0x19d63f(0xe6)];['_modifyVertPlugin'];[a0_0x19d63f(0x415)];[a0_0x19d63f(0x1cd)];[a0_0x19d63f(0x20c)];[a0_0x19d63f(0x2eb)];[a0_0x19d63f(0x3e9)](_0x2d50ad=undefined){const _0x41bab6=a0_0x19d63f;this[_0x41bab6(0x2da)]={'w':window[_0x41bab6(0x2e0)],'h':window[_0x41bab6(0x1a6)],'dom':_0x2d50ad,'sizeComputed':![]};const _0xa22c50=new a0_0x412c21['Scene']();this['scene']=_0xa22c50,this['axesHelper']=new a0_0x412c21[(_0x41bab6(0x318))](0x7d0),_0xa22c50['add'](this[_0x41bab6(0x30d)]),addGrid(_0xa22c50);const _0x1a40d9=new a0_0x412c21['WebGLRenderer']({'antialias':!![],'canvas':_0x2d50ad});this[_0x41bab6(0x2db)]=_0x1a40d9,_0x1a40d9['setClearColor'](_0x41bab6(0x3c8),0x1),_0x1a40d9[_0x41bab6(0x300)](window['innerWidth'],window['innerHeight']);const _0x51b70b=new a0_0x412c21[(_0x41bab6(0x3ab))](0x46,window['innerWidth']/window[_0x41bab6(0x1a6)],0x1,0x7d0);_0x51b70b[_0x41bab6(0x3ce)]['z']=0x14,this[_0x41bab6(0x253)]=this[_0x41bab6(0x36b)]=_0x51b70b,_0x51b70b['up'][_0x41bab6(0x3b0)](0x0,0x0,0x1),this[_0x41bab6(0x293)]();const _0x5c3221=window['innerWidth']/window[_0x41bab6(0x1a6)],_0x1592a8=0x2,_0x16da0d=_0x1592a8*_0x5c3221;this[_0x41bab6(0x233)]=new a0_0x412c21[(_0x41bab6(0x40f))](-_0x16da0d,_0x16da0d,_0x1592a8,-0x2,0.01,0xfa0),this[_0x41bab6(0x233)]['up'][_0x41bab6(0x3b0)](0x0,0x0,0x1),this['_orthoCamera'][_0x41bab6(0x3ce)]['set'](0x0,0x14,0x0),this[_0x41bab6(0x1b2)]=this[_0x41bab6(0x1e7)][_0x41bab6(0x3d4)](this),this[_0x41bab6(0x211)]=this[_0x41bab6(0x10a)][_0x41bab6(0x3d4)](this),window[_0x41bab6(0x31b)](_0x41bab6(0x125),this[_0x41bab6(0x1b2)]),window['addEventListener'](_0x41bab6(0x3b8),this[_0x41bab6(0x211)]),this[_0x41bab6(0x25d)]=new MainStore(this),this[_0x41bab6(0x1f5)]=new AdhereUtil(this[_0x41bab6(0x25d)]);const _0x4ca5f2=new SelectionHelper(this['renderer'],'select-box'),_0x35e0ae=new SelectionBox(this[_0x41bab6(0x253)],this[_0x41bab6(0x1d8)],0x15f90);this[_0x41bab6(0x16f)]=_0x4ca5f2,this[_0x41bab6(0x2f0)]=_0x35e0ae,this[_0x41bab6(0x1c2)]=new Transform2dControl(_0x51b70b,_0x1a40d9[_0x41bab6(0xf9)]),this['transform2dControl'][_0x41bab6(0x31b)](eventDragEnd[_0x41bab6(0x2bc)],()=>{const _0x3bcc12=_0x41bab6,_0x32d2bb=this[_0x3bcc12(0x1c2)][_0x3bcc12(0x3ec)];if(!_0x32d2bb)return;let _0x8c6b5=[eventDragEnd[_0x3bcc12(0x382)][_0x3bcc12(0x2a8)]()],_0x1fe336=[eventDragEnd[_0x3bcc12(0x273)][_0x3bcc12(0x2a8)]()],_0x11a04a=[_0x32d2bb[_0x3bcc12(0x154)][_0x3bcc12(0x2a8)]()],_0x1fb12e=[_0x32d2bb[_0x3bcc12(0x1a7)][_0x3bcc12(0x2a8)]()];_0x8c6b5[0x0][_0x3bcc12(0x396)](_0x11a04a[0x0])&&(_0x8c6b5=_0x11a04a=undefined),_0x1fe336[0x0][_0x3bcc12(0x396)](_0x1fb12e[0x0])&&(_0x1fe336=_0x1fb12e=undefined),(_0x11a04a||_0x1fb12e)&&this[_0x3bcc12(0x33f)]['addAction'](UndoType[_0x3bcc12(0x1ca)],{'items':[_0x32d2bb],'scaleOld':_0x8c6b5,'scaleNew':_0x11a04a,'rotOld':_0x1fe336,'rotNew':_0x1fb12e});}),_0xa22c50[_0x41bab6(0x37e)](this[_0x41bab6(0x1c2)]);const _0xf554a4=addChangeColorAction[_0x41bab6(0x3d4)](this);this['debouncedAddChangeColorAction']=debounce(_0xf554a4,0x1f4),this[_0x41bab6(0x41a)]();}['initCameraControls'](){const _0x221bac=a0_0x19d63f,_0x3a2021=new FlyOrbitControls(this[_0x221bac(0x253)],this[_0x221bac(0x2db)][_0x221bac(0xf9)]);_0x3a2021['screenSpacePanning']=!![],_0x3a2021[_0x221bac(0x12d)]=![],_0x3a2021['minDistance']=0.3,_0x3a2021['maxDistance']=0x2328,this[_0x221bac(0x3bf)]=_0x3a2021;}['_initPlugins'](){const _0x329cec=a0_0x19d63f;this['_area2dMeshPlugin']=new Area2dMeshPlugin(this),this[_0x329cec(0xf4)]=new ModifyVertexPlugin(this),this[_0x329cec(0x415)]=new Lines2dEntityPlugin(this),this[_0x329cec(0x1cd)]=new EditLines2dPlugin(this),this[_0x329cec(0x20c)]=new GroupEntityPlugin(this),this[_0x329cec(0x2eb)]=new PastingPlugin(this),this['_plugins']=[this[_0x329cec(0x415)],this['_editLines2dPlugin'],this['_area2dMeshPlugin'],this[_0x329cec(0xf4)],this[_0x329cec(0x20c)],this['_pastingPlugin']];}[a0_0x19d63f(0x10a)](){const _0x191d71=a0_0x19d63f;this[_0x191d71(0x2da)]['sizeComputed']=![],this[_0x191d71(0x3ac)]();}[a0_0x19d63f(0x3ac)](){const _0x52fb59=a0_0x19d63f,_0x3620a0=this[_0x52fb59(0x2da)]['dom'];if(!_0x3620a0||this['_dimension'][_0x52fb59(0x1e9)])return;const _0x2cd1fe=getComputedStyle(_0x3620a0),_0x48bc8f=parseInt(_0x2cd1fe[_0x52fb59(0x3e7)]),_0x4c9a65=parseInt(_0x2cd1fe[_0x52fb59(0x1be)]);if(isNaN(_0x48bc8f)||isNaN(_0x4c9a65))return;_0x48bc8f&&(this[_0x52fb59(0x2da)][_0x52fb59(0x1e9)]=!![]);const {w:_0x3a7ef3,h:_0x2defcd}=this['_dimension'];if(_0x3a7ef3!==_0x48bc8f||_0x2defcd!==_0x4c9a65){const _0x430bf1=_0x48bc8f/_0x4c9a65;this[_0x52fb59(0x36b)][_0x52fb59(0x299)]=_0x430bf1,this[_0x52fb59(0x36b)]['updateProjectionMatrix']();const _0x4c3645=0x2,_0xbaab23=_0x4c3645*_0x430bf1;this['_orthoCamera'][_0x52fb59(0x2c9)]=-_0xbaab23,this[_0x52fb59(0x233)][_0x52fb59(0x201)]=_0xbaab23,this['_orthoCamera']['updateProjectionMatrix'](),this[_0x52fb59(0x2db)]['setDrawingBufferSize'](_0x48bc8f,_0x4c9a65,window[_0x52fb59(0x1de)]),this[_0x52fb59(0x2db)]['setSize'](_0x48bc8f,_0x4c9a65,![]);}this['_dimension']['w']=_0x48bc8f,this[_0x52fb59(0x2da)]['h']=_0x4c9a65;}[a0_0x19d63f(0x1e7)](_0x3531c1){const _0x4fd4f5=a0_0x19d63f;if(_0x3531c1[_0x4fd4f5(0x28e)]!==document[_0x4fd4f5(0x34c)])return;const _0x506e32=this['_area2dMeshPlugin']['_selectedAreas'],_0x256aaf=this[_0x4fd4f5(0x415)][_0x4fd4f5(0x21f)];let _0x3973fc;_0x506e32[_0x4fd4f5(0x180)]===0x1&&(_0x3973fc=_0x506e32[0x0]);switch(_0x3531c1[_0x4fd4f5(0x3dd)]){case KeyCode[_0x4fd4f5(0x32f)]:_0x3973fc&&this[_0x4fd4f5(0x25d)][_0x4fd4f5(0x281)](_0x3973fc,!![]);break;case KeyCode[_0x4fd4f5(0x3e6)]:_0x3973fc&&this[_0x4fd4f5(0x25d)][_0x4fd4f5(0x281)](_0x3973fc,![]);break;case KeyCode['C']:{if(!_0x3531c1[_0x4fd4f5(0x3c3)]||!this[_0x4fd4f5(0x25d)][_0x4fd4f5(0x40b)])return;this[_0x4fd4f5(0x2eb)]['startPasting']();break;}case KeyCode['F']:{const _0x16656e=_0x256aaf['filter'](_0xd724f=>_0xd724f['vo'][_0x4fd4f5(0x200)]());if(!_0x506e32[_0x4fd4f5(0x180)]&&!_0x256aaf['length'])return;_0x506e32[_0x4fd4f5(0x180)]>=_0x256aaf[_0x4fd4f5(0x180)]?this[_0x4fd4f5(0x25d)][_0x4fd4f5(0x218)](_0x506e32):this[_0x4fd4f5(0x25d)][_0x4fd4f5(0xfa)](_0x16656e);break;}case KeyCode['G']:{if(!_0x3531c1[_0x4fd4f5(0x3c3)])return;_0x3531c1[_0x4fd4f5(0x323)]();const _0x296c47=this[_0x4fd4f5(0x20c)][_0x4fd4f5(0x11e)],_0x129e3d=this[_0x4fd4f5(0x25d)]['getMultiItemsSelection']();let _0x2a4c04=![];_0x129e3d['forEach'](_0x583746=>{const _0x1b4bc2=_0x4fd4f5;_0x583746 instanceof GroupEntity&&(_0x583746[_0x1b4bc2(0x2bf)](!![]),_0x2a4c04=!![]);});_0x2a4c04&&setTimeout(()=>{_0x129e3d['forEach'](_0x10c3da=>{const _0x228448=a0_0xfa1d;_0x10c3da instanceof GroupEntity&&_0x10c3da[_0x228448(0x2bf)](![]);});},0x7d0);if(!_0x3531c1['shiftKey']){const _0x5b8ba1=new GroupEntity(),{valid:_0x21a26b,involvedGroups:_0x110cc5}=_0x5b8ba1[_0x4fd4f5(0x132)](_0x129e3d);_0x21a26b&&(this['scene'][_0x4fd4f5(0x37e)](_0x5b8ba1),_0x110cc5['length']&&(_0x110cc5['length']===0x1&&_0x110cc5[0x0][_0x4fd4f5(0x383)](_0x5b8ba1),_0x110cc5[_0x4fd4f5(0x156)](_0x118ce0=>_0x118ce0['updateVO']())),this[_0x4fd4f5(0x25d)]['groups']['push'](_0x5b8ba1),_0x5b8ba1[_0x4fd4f5(0x2bf)](!![]),setTimeout(()=>{const _0x5cc6b2=_0x4fd4f5;_0x5b8ba1[_0x5cc6b2(0x2bf)](![]);},0xbb8),this[_0x4fd4f5(0x25d)][_0x4fd4f5(0x1a5)]());}else _0x296c47[_0x4fd4f5(0x156)](_0x506555=>_0x506555['dismissGroup'](this[_0x4fd4f5(0x25d)])),_0x296c47['length']=0x0;break;}case KeyCode['J']:this[_0x4fd4f5(0x415)][_0x4fd4f5(0x291)]();break;case KeyCode['O']:this['store'][_0x4fd4f5(0x219)]();break;case KeyCode['T']:if(this['transform2dControl'][_0x4fd4f5(0x3ec)])this[_0x4fd4f5(0x1c2)][_0x4fd4f5(0x3a9)]();else{const _0x491e9b=this[_0x4fd4f5(0xe6)][_0x4fd4f5(0x1d6)](),_0x537cf3=this[_0x4fd4f5(0x415)][_0x4fd4f5(0x1d6)](),_0x456444=this[_0x4fd4f5(0x20c)][_0x4fd4f5(0x1d6)](),_0x124b08=_0x491e9b||_0x537cf3||_0x456444;_0x124b08&&(this[_0x4fd4f5(0x1c2)][_0x4fd4f5(0x20b)](_0x124b08),this[_0x4fd4f5(0xe6)][_0x4fd4f5(0x2fa)](),this[_0x4fd4f5(0x415)][_0x4fd4f5(0x2fa)](),this[_0x4fd4f5(0x20c)][_0x4fd4f5(0x2fa)]());}break;case KeyCode[_0x4fd4f5(0x2de)]:this[_0x4fd4f5(0x3cd)](),this[_0x4fd4f5(0x415)][_0x4fd4f5(0x3d7)](),this[_0x4fd4f5(0x20c)]['removeGroupEntities']();break;case KeyCode['Z']:{_0x3531c1[_0x4fd4f5(0x3c3)]&&(_0x3531c1[_0x4fd4f5(0x276)]?this[_0x4fd4f5(0x33f)][_0x4fd4f5(0x363)]():this[_0x4fd4f5(0x33f)][_0x4fd4f5(0x244)]());break;}}}[a0_0x19d63f(0x3cd)](){const _0x7eba4d=a0_0x19d63f;this[_0x7eba4d(0xe6)][_0x7eba4d(0x19b)]();}[a0_0x19d63f(0x2a4)](_0x481129){const _0x5ec06b=a0_0x19d63f;this[_0x5ec06b(0x2db)]['render'](this[_0x5ec06b(0x1d8)],this[_0x5ec06b(0x253)]);}['startRender'](){const _0x30b323=a0_0x19d63f,_0x1abedd=_0x5b1d78=>{const _0x3ef9f6=a0_0xfa1d;this[_0x3ef9f6(0x2a4)](_0x5b1d78),this[_0x3ef9f6(0x3a3)]=requestAnimationFrame(_0x1abedd);};_0x1abedd(window[_0x30b323(0x257)]['now']());}[a0_0x19d63f(0x239)](_0x1aea16,_0x1613e5){const _0x28d584=a0_0x19d63f;rgbaStrToColorOpacitiy(_0x1613e5),this[_0x28d584(0x25d)][_0x28d584(0x25a)]=_0x1aea16,this[_0x28d584(0x25d)][_0x28d584(0x239)]();if(this['adhereUtil'][_0x28d584(0x34a)]){const _0x41dcf3=this['_lines2dEntityPlugin'][_0x28d584(0x21f)],_0xe6270c=this[_0x28d584(0x20c)]['selectGroups'];this[_0x28d584(0x1f5)][_0x28d584(0x31a)](_0x41dcf3[_0x28d584(0x2c7)](_0xe6270c));}}[a0_0x19d63f(0x259)](){const _0x3385e7=a0_0x19d63f;this[_0x3385e7(0xe6)][_0x3385e7(0x2fa)](),this['store'][_0x3385e7(0xe5)]();}['addingLines2d'](){const _0x103357=a0_0x19d63f;this[_0x103357(0x415)][_0x103357(0x1ec)](),this[_0x103357(0x415)][_0x103357(0x3c7)](),this[_0x103357(0x25d)]['addingLines2d']();}[a0_0x19d63f(0x3eb)](){const _0x10fb43=a0_0x19d63f;this[_0x10fb43(0x1cd)]['initJoinHelper'](),this['_lines2dEntityPlugin']['_selectedEntities'],this[_0x10fb43(0x415)]['_unSelect'](),this[_0x10fb43(0x25d)][_0x10fb43(0x2a3)]();}['performSlicing'](){const _0x1cc7c0=a0_0x19d63f,_0x585c1a=this[_0x1cc7c0(0xe6)]['_selectedAreas']['slice'](),_0x3b2329=this['_lines2dEntityPlugin'][_0x1cc7c0(0x21f)];if(!_0x585c1a[_0x1cc7c0(0x180)]||!_0x3b2329[_0x1cc7c0(0x180)])return;_0x585c1a[_0x1cc7c0(0x156)](_0x3eef77=>_0x3eef77[_0x1cc7c0(0x277)]()),_0x3b2329[_0x1cc7c0(0x156)](_0x31d929=>_0x31d929[_0x1cc7c0(0x277)]());const _0x586b55=[],_0x310ee4=[];_0x3b2329['forEach'](_0x62a071=>{const _0x19bb1e=_0x1cc7c0;_0x586b55[_0x19bb1e(0x32e)](_0x62a071['vo']['points']),_0x310ee4[_0x19bb1e(0x32e)](_0x62a071['vo'][_0x19bb1e(0x237)]);});const _0x7136c9=[],_0x25dd8b=[],_0x509710=ClipperTool[_0x1cc7c0(0x228)](_0x586b55,_0x310ee4);_0x585c1a[_0x1cc7c0(0x156)](_0x5e88ed=>{const _0x79a64b=_0x1cc7c0,_0x538c95=_0x5e88ed['vo'][_0x79a64b(0x275)],_0x4146ab=ClipperTool['slicePolygon'](_0x538c95,_0x509710),_0x3154bc=_0x4146ab[_0x79a64b(0x180)]!==0x1||!ClipperTool[_0x79a64b(0x176)](_0x4146ab[0x0],_0x538c95);_0x3154bc?(_0x4146ab[_0x79a64b(0x156)](_0x556dda=>{const _0x648063=_0x79a64b,_0x536156=new Area2d()[_0x648063(0x260)](_0x5e88ed['vo'],![]);_0x536156[_0x648063(0x275)]=_0x556dda;const _0xcc53dc=new Area2dMesh(_0x536156);_0xcc53dc[_0x648063(0x29c)](),this['scene'][_0x648063(0x37e)](_0xcc53dc),this[_0x648063(0x25d)]['area2dMeshes']['push'](_0xcc53dc),_0x7136c9[_0x648063(0x32e)](_0xcc53dc);}),_0x5e88ed[_0x79a64b(0x11a)](),removeArrayItem(this[_0x79a64b(0x25d)][_0x79a64b(0x394)],_0x5e88ed),removeArrayItem(this['_area2dMeshPlugin'][_0x79a64b(0x18f)],_0x5e88ed),_0x25dd8b[_0x79a64b(0x32e)](_0x5e88ed)):_0x5e88ed[_0x79a64b(0x150)]();}),_0x3b2329[_0x1cc7c0(0x156)](_0x348cf4=>_0x348cf4[_0x1cc7c0(0x150)]());if(_0x7136c9[_0x1cc7c0(0x180)]){const _0x41e76a=this['scene'],_0x3e7e19=this['store'][_0x1cc7c0(0x394)];this[_0x1cc7c0(0x33f)][_0x1cc7c0(0x346)](UndoType[_0x1cc7c0(0x379)],{'scene':_0x41e76a,'addedAreas':_0x7136c9,'removedAreas':_0x25dd8b,'arr':_0x3e7e19});}}[a0_0x19d63f(0x146)](){const _0x257e46=a0_0x19d63f,_0xa817fc=this[_0x257e46(0x25d)][_0x257e46(0xf1)]();return setLocalItem(WorldConfig[_0x257e46(0x321)],_0xa817fc),_0xa817fc;}[a0_0x19d63f(0x15d)](){const _0x56e145=a0_0x19d63f,_0x290afa=getLocalItem(WorldConfig[_0x56e145(0x321)]);this[_0x56e145(0x25d)][_0x56e145(0x3b5)](_0x290afa);}[a0_0x19d63f(0x2a9)](_0x5c20f6,_0x4cc350){const _0x8808dd=a0_0x19d63f,_0x1152e6=this[_0x8808dd(0xe6)][_0x8808dd(0x18f)];_0x1152e6['forEach'](_0x2e2789=>_0x2e2789['changeColorOpacity'](_0x5c20f6,_0x4cc350)),this[_0x8808dd(0x185)]=_0x1152e6,this[_0x8808dd(0x307)]=_0x5c20f6,this['newOpacity']=_0x4cc350,this[_0x8808dd(0x338)]();}[a0_0x19d63f(0x39e)](_0x3ceaa2,_0x1d9117){const _0x56c2c3=a0_0x19d63f,_0x2e1df3=this['_lines2dEntityPlugin'][_0x56c2c3(0x21f)];_0x2e1df3['forEach'](_0x4429ac=>_0x4429ac[_0x56c2c3(0x1ba)](_0x3ceaa2,_0x1d9117)),this['curItems']=_0x2e1df3,this[_0x56c2c3(0x307)]=_0x3ceaa2,this['newOpacity']=_0x1d9117,this['debouncedAddChangeColorAction']();}[a0_0x19d63f(0x2f8)](_0x54767b){const _0x5af7e=a0_0x19d63f,_0x5e80c6=this['_lines2dEntityPlugin'][_0x5af7e(0x21f)];_0x5e80c6['forEach'](_0xcc4bf2=>_0xcc4bf2[_0x5af7e(0x107)](_0x54767b));}[a0_0x19d63f(0x3f4)](){const _0x4083a3=a0_0x19d63f;this[_0x4083a3(0xe6)][_0x4083a3(0x2fa)](),this[_0x4083a3(0xf4)][_0x4083a3(0x258)]();}['areasMerge'](){const _0xeaea3=a0_0x19d63f;this[_0xeaea3(0xe6)][_0xeaea3(0x408)](a0_0x4c3ad7[_0xeaea3(0x398)][_0xeaea3(0x278)]);}[a0_0x19d63f(0x356)](){const _0x5d33b7=a0_0x19d63f;this['_area2dMeshPlugin'][_0x5d33b7(0x408)](a0_0x4c3ad7['ClipType'][_0x5d33b7(0xe2)]);}[a0_0x19d63f(0x1bf)](){const _0x3ead64=a0_0x19d63f;this[_0x3ead64(0xe6)][_0x3ead64(0x408)](a0_0x4c3ad7[_0x3ead64(0x398)]['ctXor']);}[a0_0x19d63f(0x1c9)](){const _0x113110=a0_0x19d63f;this['_area2dMeshPlugin'][_0x113110(0x408)](a0_0x4c3ad7[_0x113110(0x398)][_0x113110(0x35d)]);}[a0_0x19d63f(0x110)](_0x54f503){const _0x158cb=a0_0x19d63f;this[_0x158cb(0x1f5)][_0x158cb(0x34a)]=_0x54f503;if(!_0x54f503)this[_0x158cb(0x1f5)]['clearLines']();else{if(this['store'][_0x158cb(0x40b)]||this['store'][_0x158cb(0x140)])this['adhereUtil'][_0x158cb(0x2b6)]();else{if(this[_0x158cb(0x25d)][_0x158cb(0x371)]){const _0x55a5b3=this[_0x158cb(0x415)]['_selectedEntities'],_0x138d84=this[_0x158cb(0x20c)]['selectGroups'];this[_0x158cb(0x1f5)][_0x158cb(0x31a)](_0x55a5b3[_0x158cb(0x2c7)](_0x138d84));}}}}[a0_0x19d63f(0x1a0)](_0x2a70a6){const _0x17accf=a0_0x19d63f;startPos[_0x17accf(0x3b0)](_0x2a70a6[_0x17accf(0x142)],_0x2a70a6['clientY']),pointerEverMoved=![];const _0x4966d9=_0x2a70a6[_0x17accf(0x28e)]['getBoundingClientRect']();getMouseRaycaster(this[_0x17accf(0x143)],this[_0x17accf(0x253)],_0x2a70a6[_0x17accf(0x142)],_0x2a70a6[_0x17accf(0x386)],_0x4966d9),this[_0x17accf(0x1f5)]['_refreshAdhereValuesPurity'](),this['_plugins']['forEach'](_0x1c4fc8=>_0x1c4fc8[_0x17accf(0x1a0)](_0x2a70a6));const _0x3a596b=_0x2a70a6[_0x17accf(0x3c3)]&&this['store'][_0x17accf(0x40b)];this[_0x17accf(0x16f)][_0x17accf(0x2d8)]=![],this[_0x17accf(0x3bf)][_0x17accf(0x2d8)]=!_0x3a596b,_0x3a596b&&!this['transform2dControl'][_0x17accf(0x410)]&&(this['selectionHelper'][_0x17accf(0x2d8)]=!![],this[_0x17accf(0x16f)]['onSelectStart'](_0x2a70a6),this['selectionBox'][_0x17accf(0x20d)][_0x17accf(0x3b0)](_0x2a70a6[_0x17accf(0x142)]/window[_0x17accf(0x2e0)]*0x2-0x1,-(_0x2a70a6[_0x17accf(0x386)]/window[_0x17accf(0x1a6)])*0x2+0x1,0.5));}['pointerMove'](_0x1b9b0a){const _0x4525de=a0_0x19d63f;!pointerEverMoved&&(endPos['set'](_0x1b9b0a['clientX'],_0x1b9b0a[_0x4525de(0x386)]),startPos[_0x4525de(0x3df)](endPos)>0x2&&(pointerEverMoved=!![]));if(this[_0x4525de(0x16f)][_0x4525de(0x2d8)])return;const _0x13f8aa=_0x1b9b0a[_0x4525de(0x28e)][_0x4525de(0x3e4)]();getMouseRaycaster(this[_0x4525de(0x143)],this['camera'],_0x1b9b0a[_0x4525de(0x142)],_0x1b9b0a[_0x4525de(0x386)],_0x13f8aa),this[_0x4525de(0x198)][_0x4525de(0x156)](_0x49aa23=>_0x49aa23[_0x4525de(0x2dd)](_0x1b9b0a));}['pointerUp'](_0x2df80a){const _0x9828c6=a0_0x19d63f,_0x12c00e=this[_0x9828c6(0x25d)];_0x12c00e[_0x9828c6(0x16c)]=![];pointerEverMoved?this['_plugins']['forEach'](_0x58055d=>_0x58055d[_0x9828c6(0x1ef)](_0x2df80a)):this['_plugins'][_0x9828c6(0x156)](_0x15cccd=>_0x15cccd['pointerUpUnmoved'](_0x2df80a));const _0x106a86=this['selectionHelper'][_0x9828c6(0x2d8)]&&pointerEverMoved;this[_0x9828c6(0x16f)][_0x9828c6(0x2d8)]=![],this[_0x9828c6(0x3bf)][_0x9828c6(0x2d8)]=!_0x106a86;if(_0x106a86&&!this[_0x9828c6(0x1c2)]['visible']){this['selectionHelper'][_0x9828c6(0x2d8)]=!![],this[_0x9828c6(0x2f0)]['endPoint']['set'](_0x2df80a[_0x9828c6(0x142)]/window[_0x9828c6(0x2e0)]*0x2-0x1,-(_0x2df80a[_0x9828c6(0x386)]/window['innerHeight'])*0x2+0x1,0.5);const _0x1745d9=this[_0x9828c6(0x2f0)][_0x9828c6(0x377)](_0x12c00e['area2dMeshes']);this['_area2dMeshPlugin'][_0x9828c6(0x403)](_0x1745d9);const _0x5e1aac=this[_0x9828c6(0x2f0)][_0x9828c6(0x285)](_0x12c00e[_0x9828c6(0xf2)]);this[_0x9828c6(0x415)][_0x9828c6(0x208)](_0x5e1aac),_0x1745d9[_0x9828c6(0x180)]&&this[_0x9828c6(0x1d8)]['dispatchEvent'](Scene3dEvent['area2dSelected']);}}}let scene3d;function initScene3d(){const _0x375705=a0_0x19d63f;scene3d=new MainScene();const _0x458e99=document[_0x375705(0x31e)](_0x375705(0x3a0),_0x375705(0x372));_0x458e99[_0x375705(0x329)]='full-size',_0x458e99[_0x375705(0x31b)](_0x375705(0x126),_0xbc31dd=>{const _0x3d7c00=_0x375705;scene3d[_0x3d7c00(0x1a0)](_0xbc31dd);}),_0x458e99[_0x375705(0x31b)](_0x375705(0x355),_0x4f576e=>{const _0x2ba8fa=_0x375705;scene3d[_0x2ba8fa(0x2dd)](_0x4f576e);}),_0x458e99[_0x375705(0x31b)](_0x375705(0x340),_0x2662fc=>{const _0x1f6da9=_0x375705;scene3d[_0x1f6da9(0x31c)](_0x2662fc);}),scene3d['init'](_0x458e99),scene3d[_0x375705(0x212)](),scene3d[_0x375705(0x15d)]();}initScene3d();function getScene3dInstance(){return scene3d;}var AreasBar={'components':{'ElIcon':ElIcon,'ElColorPicker':ElColorPicker,'ElInputNumber':ElInputNumber,'ElPopover':ElPopover,'Scissor':Scissor},'setup'(_0x2431a6,_0x13df7f){const _0x111600=a0_0x19d63f,_0x737d7e=getScene3dInstance(),_0x5e386f=ref(![]),_0x338ccc=ref(![]),_0xe83dc5=ref(![]),_0xb63056=ref(![]),_0x521ad5=ref(0x1),_0x25c4a8=ref(_0x111600(0x390));_0x737d7e[_0x111600(0x1d8)][_0x111600(0x31b)](Scene3dEvent['area2dSelected']['type'],()=>{const _0x177ce0=_0x111600,_0x37c43a=_0x737d7e[_0x177ce0(0xe6)][_0x177ce0(0x18f)],_0x23e7f2=_0x737d7e['_lines2dEntityPlugin']['_selectedEntities'],_0x2e3f57=_0x37c43a[_0x177ce0(0x180)];_0x5e386f[_0x177ce0(0x24f)]=_0x2e3f57>0x0,_0x338ccc[_0x177ce0(0x24f)]=_0x2e3f57===0x1,_0xe83dc5['value']=_0x2e3f57>0x1,_0xb63056[_0x177ce0(0x24f)]=_0x2e3f57>0x0&&_0x23e7f2[_0x177ce0(0x180)]>0x0;const _0x3b003f=_0x737d7e[_0x177ce0(0xe6)][_0x177ce0(0x18f)][_0x2e3f57-0x1];_0x521ad5['value']=_0x3b003f['vo'][_0x177ce0(0x2ca)];const {color:_0x486015,opacity:_0x569f28}=Scene3dEvent[_0x177ce0(0x3ef)][_0x177ce0(0x24f)],_0x437559=colorOpacityToRgba(_0x486015,_0x569f28);_0x25c4a8[_0x177ce0(0x24f)]=_0x437559,_0x37c43a[_0x177ce0(0x156)](_0x3ae4b8=>{const _0x2df8c2=_0x177ce0;_0x3ae4b8[_0x2df8c2(0x3a6)][_0x2df8c2(0x391)]=_0x3ae4b8['vo'][_0x2df8c2(0x3b2)],_0x3ae4b8[_0x2df8c2(0x3a6)][_0x2df8c2(0x14d)]=_0x3ae4b8['vo'][_0x2df8c2(0x385)];});}),_0x737d7e[_0x111600(0x1d8)][_0x111600(0x31b)](Scene3dEvent[_0x111600(0x3f0)][_0x111600(0x2bc)],()=>{const _0xcbd21=_0x111600,_0x420f6d=_0x737d7e[_0xcbd21(0xe6)]['_selectedAreas'],_0x15c3dc=_0x737d7e[_0xcbd21(0x415)][_0xcbd21(0x21f)];_0xb63056[_0xcbd21(0x24f)]=_0x420f6d[_0xcbd21(0x180)]>0x0&&_0x15c3dc[_0xcbd21(0x180)]>0x0;}),_0x737d7e[_0x111600(0x1d8)][_0x111600(0x31b)](Scene3dEvent[_0x111600(0x419)][_0x111600(0x2bc)],()=>{_0x5e386f['value']=![];}),watch(_0x521ad5,_0x5b1824=>{const _0x4d5273=_0x111600,_0x31b594=_0x737d7e[_0x4d5273(0xe6)][_0x4d5273(0x18f)];_0x31b594[_0x4d5273(0x156)](_0x12e811=>_0x12e811[_0x4d5273(0x23a)](_0x5b1824));});const _0xb8b591=_0x4b4ebd=>{const _0x53d186=_0x111600,{cssColor:_0x32e514,opacity:_0x128711}=rgbaStrToColorOpacitiy(_0x4b4ebd);_0x737d7e['changeArea2dColorOpacity'](_0x32e514,_0x128711),_0x25c4a8[_0x53d186(0x24f)]=_0x4b4ebd;},_0x4386aa=()=>{const _0x723629=_0x111600;_0x737d7e[_0x723629(0x3cd)](),_0x5e386f[_0x723629(0x24f)]=![];};return{'scene3d':_0x737d7e,'show':_0x5e386f,'selectSingle':_0x338ccc,'selectMulti':_0xe83dc5,'showCut':_0xb63056,'order':_0x521ad5,'areaColor':_0x25c4a8,'area2dColorChanging':_0xb8b591,'predefineColors':predefineColors,'deleteArea':_0x4386aa};},'template':a0_0x19d63f(0x192)},LinesBar={'components':{'ElColorPicker':ElColorPicker},'setup'(_0x5ad43c,_0x4c70f3){const _0x41d112=a0_0x19d63f,_0x4564e6=getScene3dInstance(),_0x31abbf=ref(![]),_0x2e1ae7=ref(![]),_0x1c732d=ref(![]);_0x4564e6['scene'][_0x41d112(0x31b)](Scene3dEvent[_0x41d112(0x3f0)]['type'],()=>{const _0x31d0e0=_0x41d112,_0x3ab1ad=_0x4564e6[_0x31d0e0(0xe6)][_0x31d0e0(0x18f)],_0x2bdf51=_0x4564e6['_lines2dEntityPlugin'][_0x31d0e0(0x21f)];_0x31abbf[_0x31d0e0(0x24f)]=_0x2bdf51[_0x31d0e0(0x180)]>0x0&&!_0x3ab1ad[_0x31d0e0(0x180)],_0x2e1ae7[_0x31d0e0(0x24f)]=_0x2bdf51[_0x31d0e0(0x180)]===0x1;const _0x3b6805=_0x2bdf51[_0x2bdf51[_0x31d0e0(0x180)]-0x1];_0x1c732d[_0x31d0e0(0x24f)]=_0x3b6805['vo'][_0x31d0e0(0x237)][0x0]===0x1;const {cssColor:_0x1edf88,opacity:_0x2feb7e}=_0x3b6805['vo'],_0x3a05f9=colorOpacityToRgba(_0x1edf88,_0x2feb7e);_0x1a3a9c[_0x31d0e0(0x24f)]=_0x3a05f9,_0x2bdf51[_0x31d0e0(0x156)](_0x4355a2=>{const _0x1ace25=_0x31d0e0;_0x4355a2['userData'][_0x1ace25(0x391)]=_0x4355a2['vo']['cssColor'],_0x4355a2[_0x1ace25(0x3a6)][_0x1ace25(0x14d)]=_0x4355a2['vo'][_0x1ace25(0x385)];});}),_0x4564e6[_0x41d112(0x1d8)][_0x41d112(0x31b)](Scene3dEvent[_0x41d112(0x3ef)][_0x41d112(0x2bc)],()=>{const _0x49349b=_0x41d112,_0x2b9dab=_0x4564e6[_0x49349b(0xe6)]['_selectedAreas'],_0x4e42eb=_0x4564e6[_0x49349b(0x415)][_0x49349b(0x21f)];_0x31abbf['value']=_0x4e42eb[_0x49349b(0x180)]>0x0&&!_0x2b9dab[_0x49349b(0x180)];}),_0x4564e6['scene'][_0x41d112(0x31b)](Scene3dEvent[_0x41d112(0x419)][_0x41d112(0x2bc)],()=>{const _0x1fed27=_0x41d112;_0x31abbf[_0x1fed27(0x24f)]=![];});const _0x2e1324=_0x4c79b0=>{const _0x37ad78=_0x41d112;_0x4564e6[_0x37ad78(0x2f8)](_0x4c79b0),_0x1c732d[_0x37ad78(0x24f)]=_0x4c79b0;},_0x1a3a9c=ref('rgba(255,\x2069,\x200,\x200.68)'),_0x89ec6d=_0x53c48a=>{const _0xa1dc10=_0x41d112,{cssColor:_0x597e1a,opacity:_0x4d2bba}=rgbaStrToColorOpacitiy(_0x53c48a);_0x4564e6[_0xa1dc10(0x39e)](_0x597e1a,_0x4d2bba),_0x1a3a9c['value']=_0x53c48a;};return{'scene3d':_0x4564e6,'show':_0x31abbf,'selectSingle':_0x2e1ae7,'predefineColors':predefineColors,'lineColor':_0x1a3a9c,'lines2dColorChanging':_0x89ec6d,'closed':_0x1c732d,'toggleClosed':_0x2e1324};},'template':'\x0a\x20\x20<div\x20class=\x22areas-bar\x22\x20v-show=\x22show\x22>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27,\x20\x27bottom-border\x27]\x22\x20@click=\x22toggleClosed(true)\x22\x20title=\x22闭合\x22\x20v-show=\x22!closed\x20&&\x20selectSingle\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_line/connect\x20device.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27,\x20\x27bottom-border\x27]\x22\x20@click=\x22toggleClosed(false)\x22\x20title=\x22打开\x22\x20v-show=\x22closed\x20&&\x20selectSingle\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_line/disconnect\x20device.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22bar-item\x20bottom-border\x22\x20title=\x22形状偏移\x22\x20@click=\x22scene3d.store.shapeOffsetting()\x22\x20v-show=\x22selectSingle\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_area/offset.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20class=\x22bar-item\x20bottom-border\x22\x20title=\x22线条颜色\x22>\x0a\x20\x20\x20\x20\x20\x20<el-color-picker\x20v-model=\x22lineColor\x22\x20show-alpha\x20:predefine=\x22predefineColors\x22\x20@active-change=\x22lines2dColorChanging\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div\x20:class=\x22[\x27bar-item\x27]\x22\x20@click=\x22scene3d.editLines2d()\x22\x20title=\x22编辑线条\x22>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22./assets/bar_line/edit.png\x22/>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20</div>\x0a\x20\x20'};const app=createApp({'components':{'AreasBar':AreasBar,'LinesBar':LinesBar,'ElSelect':ElSelect,'ElOption':ElOption,'ElSwitch':ElSwitch},'setup'(){const _0x27c305=a0_0x19d63f,_0x5479ab=getScene3dInstance();onMounted(()=>{const _0x507835=a0_0xfa1d,_0x404603=document[_0x507835(0x19e)]('box');_0x404603[_0x507835(0x129)](_0x5479ab[_0x507835(0x2db)]['domElement'],_0x404603[_0x507835(0xe1)]);});const _0xe1c6ca=ref(!![]),_0x3cfbca=_0x2e9484=>{const _0x33d2e8=a0_0xfa1d;_0xe1c6ca[_0x33d2e8(0x24f)]=_0x2e9484;},_0x361294=ref(0x1e),_0x578507=ref(colorOpacityToRgba(Area2d[_0x27c305(0x265)][_0x27c305(0x15e)],Area2d[_0x27c305(0x265)]['opacity'])),_0x2c9952=ref(colorOpacityToRgba(Lines2d[_0x27c305(0x265)][_0x27c305(0x15e)],Lines2d[_0x27c305(0x265)][_0x27c305(0x385)])),_0x1892c7=_0x44cfbf=>{const _0x266ed8=_0x27c305,{cssColor:_0x39fd3e,opacity:_0x2ec3da}=rgbaStrToColorOpacitiy(_0x44cfbf);Area2d[_0x266ed8(0x265)][_0x266ed8(0x15e)]=_0x39fd3e,Area2d[_0x266ed8(0x265)][_0x266ed8(0x385)]=_0x2ec3da,_0x578507[_0x266ed8(0x24f)]=_0x44cfbf;},_0x460364=_0x4f0405=>{const _0x14aa1b=_0x27c305,{cssColor:_0x100e18,opacity:_0x5ae639}=rgbaStrToColorOpacitiy(_0x4f0405);Lines2d[_0x14aa1b(0x265)][_0x14aa1b(0x15e)]=_0x100e18,Lines2d['Default'][_0x14aa1b(0x385)]=_0x5ae639,_0x2c9952[_0x14aa1b(0x24f)]=_0x4f0405;},_0x366fa5=[{'value':a0_0x4c3ad7[_0x27c305(0x35a)][_0x27c305(0x354)],'label':'round'},{'value':a0_0x4c3ad7[_0x27c305(0x35a)][_0x27c305(0x292)],'label':_0x27c305(0x256)},{'value':a0_0x4c3ad7[_0x27c305(0x35a)]['jtSquare'],'label':'square'}],_0xcff1a3=[{'value':a0_0x4c3ad7['EndType']['etOpenButt'],'label':_0x27c305(0x1a4)},{'value':a0_0x4c3ad7[_0x27c305(0x1ea)][_0x27c305(0x274)],'label':_0x27c305(0x274)},{'value':a0_0x4c3ad7[_0x27c305(0x1ea)][_0x27c305(0x297)],'label':_0x27c305(0x297)},{'value':a0_0x4c3ad7[_0x27c305(0x1ea)][_0x27c305(0x2a0)],'label':'etClosedLine'},{'value':a0_0x4c3ad7[_0x27c305(0x1ea)]['etClosedPolygon'],'label':'etClosedPolygon'}],_0x418ebc=ref(ClipperTool['getJtType']());watch(_0x418ebc,_0x2760b9=>ClipperTool[_0x27c305(0x29e)](_0x2760b9));const _0x8a07e3=ref(ClipperTool['getEtOpenType']());watch(_0x8a07e3,_0xf338ff=>ClipperTool[_0x27c305(0x21b)](_0xf338ff));const _0xa6e478=ref(![]);watch(_0xa6e478,_0x23133d=>{const _0x5b6333=_0x27c305;_0x5479ab[_0x5b6333(0x110)](_0x23133d);});const _0x16dd81=()=>{const _0x475b16=_0x27c305;_0x5479ab[_0x475b16(0x146)](),ElMessage({'message':_0x475b16(0x151),'type':_0x475b16(0x23f)});},_0x46aeb8=()=>{const _0x286fe5=_0x27c305;ElMessage({'message':_0x286fe5(0x20e),'type':_0x286fe5(0x23f)});};return{'scene3d':_0x5479ab,'handle':_0x46aeb8,'savePlan':_0x16dd81,'visi':_0xe1c6ca,'setVisi':_0x3cfbca,'value':_0x361294,'areaColor':_0x578507,'lineColor':_0x2c9952,'area2dColorChanging':_0x1892c7,'lines2dColorChanging':_0x460364,'predefineColors':predefineColors,'jtOptions':_0x366fa5,'jtValue':_0x418ebc,'etValue':_0x8a07e3,'etOptions':_0xcff1a3,'switchAdhere':_0xa6e478,'Edit':Edit,'Check':Check,'Close':Close};},'template':a0_0x19d63f(0x270)});app[a0_0x19d63f(0x1ad)]('ArrowDrawer',ArrowDrawer),app[a0_0x19d63f(0x1ad)](a0_0x19d63f(0x17b),ElButton),app[a0_0x19d63f(0x1ad)]('el-slider',ElSlider),app[a0_0x19d63f(0x1ad)](a0_0x19d63f(0x2c3),ElColorPicker),app[a0_0x19d63f(0x1ad)](a0_0x19d63f(0x203),ElDrawer),app[a0_0x19d63f(0x36e)]('#app');